üöÄ Running usage.sh...
insid pid: 2203203
2025-07-23T17:19:16.304-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:19:16.305-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-07-23T17:19:16.587-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:19:16.587-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
2025-07-23T17:19:16.588-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:19:16.588-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-07-23T17:19:17.770-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-07-23T17:19:17.770-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-07-23T17:19:17.770-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-07-23T17:19:17.777-0400 [INFO]  election won: term=2 tally=1
2025-07-23T17:19:17.777-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-07-23T17:19:17.999-0400 [WARN]  no known peers, aborting election
2025-07-23T17:19:18.551-0400 [WARN]  no known peers, aborting election
2025-07-23T17:19:26.313-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-07-23T17:19:26.318-0400 [INFO]  added peer, starting replication: peer=node2
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-07-23T17:19:26.320-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
2025-07-23T17:19:26.320-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-07-23T17:19:26.323-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
2025-07-23T17:19:26.596-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-07-23T17:19:26.601-0400 [INFO]  added peer, starting replication: peer=node1
2025-07-23T17:19:26.607-0400 [WARN]  failed to get previous log: previous-index=4 last-index=0 error="log not found"
2025-07-23T17:19:26.607-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
set root tracker key internal:api_key_memory_usage: value 0
2025-07-23T17:19:26.611-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
‚ÑπÔ∏è Using insic executable: /tmp/insi-test-cluster/insic
‚ÑπÔ∏è Using config: /tmp/insi-test-cluster/cluster.yaml

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚ÑπÔ∏è Attempting to ping server... (will retry up to 15 times)
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml ping
Ping Response:
  status: ok
  uptime: 14.687289536s
  entity: root
  leader: 127.0.0.1:2222
  node-badge-id: c4a1388e-4ea6-4251-af7d-86529d249973
‚úÖ Server is responsive.
‚úÖ [0;32mSUCCESS: Server Ping (and output contains 'Ping Response:')[0m
‚ÑπÔ∏è Starting TKV Usage Limit operations tests...

[0;34m==== Test: Subscriber Limit ====[0m
‚ÑπÔ∏è Creating key for subscriber limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add sublimit_key_1753305571_2203322
time=2025-07-23T17:19:31.423-04:00 level=INFO msg="API key created successfully" key_name=sublimit_key_1753305571_2203322 key="insi_6eW4MIa/mnQ/Hx5nJ+K/3wj9Mj9rkchbVbQersTYmusFLmphZ3pcyWmSHlNqaOLoO3FdND+b5JXvZpgyvQTuYYWPH2NpRQDHPcI1cEqqMUheqUDCGA62q9vehoXRkGbItBhcmeiF70oCbdJI3VAhDUjIN5Q="
API Key Name: sublimit_key_1753305571_2203322
API Key:      insi_6eW4MIa/mnQ/Hx5nJ+K/3wj9Mj9rkchbVbQersTYmusFLmphZ3pcyWmSHlNqaOLoO3FdND+b5JXvZpgyvQTuYYWPH2NpRQDHPcI1cEqqMUheqUDCGA62q9vehoXRkGbItBhcmeiF70oCbdJI3VAhDUjIN5Q=
OK
‚úÖ [0;32mSUCCESS: Create API key for subscriber limit test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Setting subscriber limit for 'insi_6eW4MIa/mnQ/Hx5nJ+K/3wj9Mj9rkchbVbQersTYmusFLmphZ3pcyWmSHlNqaOLoO3FdND+b5JXvZpgyvQTuYYWPH2NpRQDHPcI1cEqqMUheqUDCGA62q9vehoXRkGbItBhcmeiF70oCbdJI3VAhDUjIN5Q=' to a total of 3
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api set-limits insi_6eW4MIa/mnQ/Hx5nJ+K/3wj9Mj9rkchbVbQersTYmusFLmphZ3pcyWmSHlNqaOLoO3FdND+b5JXvZpgyvQTuYYWPH2NpRQDHPcI1cEqqMUheqUDCGA62q9vehoXRkGbItBhcmeiF70oCbdJI3VAhDUjIN5Q= --subs 3
OK
‚úÖ [0;32mSUCCESS: Set subscriber limit to 3 (and output contains 'OK')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --target node0 --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     1073741824
  Bytes in Memory:   262144000
  Events per Second: 1000
  Subscribers:       3
  RPS Data Limit:    25
  RPS Event Limit:   10

Current Usage (for current key):
  Bytes on Disk:     0
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Verify subscriber limit was set (and output contains 'Subscribers:       3')[0m
‚ÑπÔ∏è Launching 3 subscribers, one on each node (should succeed)
Launching subscriber #1 on node0...
Launching subscriber #2 on node1...
Launching subscriber #3 on node2...
‚úÖ [0;32mSUCCESS: All 3 background subscribers connected successfully.[0m
‚ÑπÔ∏è Attempting to launch one more subscriber on node0 (should fail as global limit of 3 is reached)
‚ÑπÔ∏è Running with timeout (with INSI_API_KEY set): timeout 10s /tmp/insi-test-cluster/insic --target node0 --config /tmp/insi-test-cluster/cluster.yaml subscribe test-topic
time=2025-07-23T17:19:56.553-04:00 level=INFO msg="Attempting to subscribe to events" topic=test-topic
time=2025-07-23T17:19:56.553-04:00 level=INFO msg="Attempting to connect to WebSocket for event subscription" client.insi_client.url="wss://localhost:8443/db/api/v1/events/subscribe?topic=test-topic" client.insi_client.attempt=1
time=2025-07-23T17:19:56.560-04:00 level=ERROR msg="Subscription failed" topic=test-topic error="subscriber limit exceeded: subscriber limit exceeded"
Error: subscriber limit exceeded: subscriber limit exceeded
‚úÖ [0;32mSUCCESS (Received Expected Error): Subscriber connection over limit on node0 (and output contains 'subscriber limit exceeded')[0m
‚ÑπÔ∏è Cleaning up subscriber processes...
Killing subscriber process 2203448
Killing subscriber process 2203449
Killing subscriber process 2203450
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_6eW4MIa/mnQ/Hx5nJ+K/3wj9Mj9rkchbVbQersTYmusFLmphZ3pcyWmSHlNqaOLoO3FdND+b5JXvZpgyvQTuYYWPH2NpRQDHPcI1cEqqMUheqUDCGA62q9vehoXRkGbItBhcmeiF70oCbdJI3VAhDUjIN5Q=
time=2025-07-23T17:19:56.591-04:00 level=INFO msg="API key deleted successfully" key_value="insi_6eW4MIa/mnQ/Hx5nJ+K/3wj9Mj9rkchbVbQersTYmusFLmphZ3pcyWmSHlNqaOLoO3FdND+b5JXvZpgyvQTuYYWPH2NpRQDHPcI1cEqqMUheqUDCGA62q9vehoXRkGbItBhcmeiF70oCbdJI3VAhDUjIN5Q="
OK
‚úÖ [0;32mSUCCESS: Delete API key for subscriber test cleanup (and output contains 'OK')[0m

[0;34m==== Test: Disk Usage Limit ====[0m
‚ÑπÔ∏è Creating key for disk limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add disklimit_key_1753305596_2203322
time=2025-07-23T17:19:56.748-04:00 level=INFO msg="API key created successfully" key_name=disklimit_key_1753305596_2203322 key="insi_cEvxzljnDrOHtqubhfLM1mGZTipLHcsDfzTtAX4VdAXI4GzDhS8zTBAzIwZ6dkwRK2JfS//Tu3t8OxX8l1BHo6SMfSt+9DVL/3hxpx8+yGTx1o08iT8KqvniFqLKu7Id6ULsvC7sMvGhHWGDcFfBswSr7Tk="
API Key Name: disklimit_key_1753305596_2203322
API Key:      insi_cEvxzljnDrOHtqubhfLM1mGZTipLHcsDfzTtAX4VdAXI4GzDhS8zTBAzIwZ6dkwRK2JfS//Tu3t8OxX8l1BHo6SMfSt+9DVL/3hxpx8+yGTx1o08iT8KqvniFqLKu7Id6ULsvC7sMvGhHWGDcFfBswSr7Tk=
OK
‚úÖ [0;32mSUCCESS: Create API key for disk limit test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Setting disk limit for 'insi_cEvxzljnDrOHtqubhfLM1mGZTipLHcsDfzTtAX4VdAXI4GzDhS8zTBAzIwZ6dkwRK2JfS//Tu3t8OxX8l1BHo6SMfSt+9DVL/3hxpx8+yGTx1o08iT8KqvniFqLKu7Id6ULsvC7sMvGhHWGDcFfBswSr7Tk=' to 100 bytes
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api set-limits insi_cEvxzljnDrOHtqubhfLM1mGZTipLHcsDfzTtAX4VdAXI4GzDhS8zTBAzIwZ6dkwRK2JfS//Tu3t8OxX8l1BHo6SMfSt+9DVL/3hxpx8+yGTx1o08iT8KqvniFqLKu7Id6ULsvC7sMvGhHWGDcFfBswSr7Tk= --disk 100
OK
‚úÖ [0;32mSUCCESS: Set disk limit to 100 bytes (and output contains 'OK')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     100
  Bytes in Memory:   262144000
  Events per Second: 1000
  Subscribers:       100
  RPS Data Limit:    25
  RPS Event Limit:   10

Current Usage (for current key):
  Bytes on Disk:     0
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Get initial limits (and output contains 'Current Usage')[0m
‚úÖ [0;32mSUCCESS: Check initial disk usage is zero (and output contains 'Bytes on Disk:     0')[0m
‚úÖ [0;32mSUCCESS: Verify disk limit was set (and output contains 'Bytes on Disk:     100')[0m
‚ÑπÔ∏è Attempting to upload blob of size 150 (should fail)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml blob upload disk-limit-blob-1 /tmp/insi_disk_over_blob.txt
time=2025-07-23T17:20:11.851-04:00 level=ERROR msg="Blob upload failed" key=disk-limit-blob-1 path=/tmp/insi_disk_over_blob.txt error="disk limit exceeded: Disk usage limit exceeded. Current: 0, Limit: 100"
Error: disk limit exceeded: Disk usage limit exceeded. Current: 0, Limit: 100
‚úÖ [0;32mSUCCESS (Received Expected Error): Blob upload exceeds disk limit (and output contains 'disk limit exceeded')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     100
  Bytes in Memory:   262144000
  Events per Second: 1000
  Subscribers:       100
  RPS Data Limit:    25
  RPS Event Limit:   10

Current Usage (for current key):
  Bytes on Disk:     0
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Get limits after failed upload (and output contains 'Current Usage')[0m
‚úÖ [0;32mSUCCESS: Check disk usage is still zero (and output contains 'Bytes on Disk:     0')[0m
‚ÑπÔ∏è Attempting to upload blob of size 80 (should succeed)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml blob upload disk-limit-blob-2 /tmp/insi_disk_under_blob.txt
OK
‚úÖ [0;32mSUCCESS: Blob upload under disk limit[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     100
  Bytes in Memory:   262144000
  Events per Second: 1000
  Subscribers:       100
  RPS Data Limit:    25
  RPS Event Limit:   10

Current Usage (for current key):
  Bytes on Disk:     80
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Get limits after successful upload (and output contains 'Current Usage')[0m
‚úÖ [0;32mSUCCESS: Check disk usage is now 80 (and output contains 'Bytes on Disk:     80')[0m
‚ÑπÔ∏è Attempting to upload another blob of size 80 (should fail)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml blob upload disk-limit-blob-3 /tmp/insi_disk_under_blob.txt
time=2025-07-23T17:20:16.994-04:00 level=ERROR msg="Blob upload failed" key=disk-limit-blob-3 path=/tmp/insi_disk_under_blob.txt error="disk limit exceeded: Disk usage limit exceeded. Current: 80, Limit: 100"
Error: disk limit exceeded: Disk usage limit exceeded. Current: 80, Limit: 100
‚úÖ [0;32mSUCCESS (Received Expected Error): Second blob upload exceeds remaining disk space (and output contains 'disk limit exceeded')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     100
  Bytes in Memory:   262144000
  Events per Second: 1000
  Subscribers:       100
  RPS Data Limit:    25
  RPS Event Limit:   10

Current Usage (for current key):
  Bytes on Disk:     80
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Get limits after second failed upload (and output contains 'Current Usage')[0m
‚úÖ [0;32mSUCCESS: Check disk usage is still 80 (and output contains 'Bytes on Disk:     80')[0m
‚ÑπÔ∏è Cleanup for disk usage limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_cEvxzljnDrOHtqubhfLM1mGZTipLHcsDfzTtAX4VdAXI4GzDhS8zTBAzIwZ6dkwRK2JfS//Tu3t8OxX8l1BHo6SMfSt+9DVL/3hxpx8+yGTx1o08iT8KqvniFqLKu7Id6ULsvC7sMvGhHWGDcFfBswSr7Tk=
time=2025-07-23T17:20:17.067-04:00 level=INFO msg="API key deleted successfully" key_value="insi_cEvxzljnDrOHtqubhfLM1mGZTipLHcsDfzTtAX4VdAXI4GzDhS8zTBAzIwZ6dkwRK2JfS//Tu3t8OxX8l1BHo6SMfSt+9DVL/3hxpx8+yGTx1o08iT8KqvniFqLKu7Id6ULsvC7sMvGhHWGDcFfBswSr7Tk="
OK
‚úÖ [0;32mSUCCESS: Delete API key for cleanup (and output contains 'OK')[0m

[0;34m==== Test: Memory (Cache) Usage Limit ====[0m
‚ÑπÔ∏è Creating key for memory limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add memlimit_key_1753305617_2203322
time=2025-07-23T17:20:17.206-04:00 level=INFO msg="API key created successfully" key_name=memlimit_key_1753305617_2203322 key="insi_AACaMSOpv4sKgXmIN0+/VfzeassBctlaIhew5YR1uEVUz3kBhbRNDiS6MnbTjGibWRZ8ntJC0t44bsbu+72zK/4vQeoJHwE7evu58uZeXFK0bt0GNZ9PUi+k4VRU7eUQDL4a6O4K2tGjAKBXYZ4RamYpCpg="
API Key Name: memlimit_key_1753305617_2203322
API Key:      insi_AACaMSOpv4sKgXmIN0+/VfzeassBctlaIhew5YR1uEVUz3kBhbRNDiS6MnbTjGibWRZ8ntJC0t44bsbu+72zK/4vQeoJHwE7evu58uZeXFK0bt0GNZ9PUi+k4VRU7eUQDL4a6O4K2tGjAKBXYZ4RamYpCpg=
OK
‚úÖ [0;32mSUCCESS: Create API key for memory limit test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Setting memory limit for 'insi_AACaMSOpv4sKgXmIN0+/VfzeassBctlaIhew5YR1uEVUz3kBhbRNDiS6MnbTjGibWRZ8ntJC0t44bsbu+72zK/4vQeoJHwE7evu58uZeXFK0bt0GNZ9PUi+k4VRU7eUQDL4a6O4K2tGjAKBXYZ4RamYpCpg=' to 200 bytes
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api set-limits insi_AACaMSOpv4sKgXmIN0+/VfzeassBctlaIhew5YR1uEVUz3kBhbRNDiS6MnbTjGibWRZ8ntJC0t44bsbu+72zK/4vQeoJHwE7evu58uZeXFK0bt0GNZ9PUi+k4VRU7eUQDL4a6O4K2tGjAKBXYZ4RamYpCpg= --mem 200
OK
‚úÖ [0;32mSUCCESS: Set memory limit to 200 bytes (and output contains 'OK')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     1073741824
  Bytes in Memory:   200
  Events per Second: 1000
  Subscribers:       100
  RPS Data Limit:    25
  RPS Event Limit:   10

Current Usage (for current key):
  Bytes on Disk:     0
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Get initial limits (and output contains 'Current Usage')[0m
‚úÖ [0;32mSUCCESS: Check initial memory usage is zero (and output contains 'Bytes in Memory:   0')[0m
‚úÖ [0;32mSUCCESS: Verify memory limit was set (and output contains 'Bytes in Memory:   200')[0m
‚ÑπÔ∏è Attempting to set cache value with size 340 (should fail)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache set mem-key-1 aBXeX3QM+LKrLdEwirP7zQms1PRe7IpVnbRJO2PDYgP/wJN1vVTULgeM0THAbL5aV77iJVoU3Fct
lOHX3RAxHkx8df/I07+cWyTfa6vwzrtWHrTL+WbnJpjSL//6S0tzwmgJ4x4EPR1ai56DpYFKhVAK
lGzu1jpXWxTVUAIHpL+5p8lIwSqtOISm+2iNguIuCIKXrAOM36v+QYnbK86lzVGdG4I4x16EgSw/
pBXEC8zetx40w62pHjCLzQaOOhWModjhu35yEUksah4bjAc03PWbBubKXs0bdxxsbutFH7Qux8nn
ynVdZvCINwUT73sSI3BApeU9RuUjqg==
time=2025-07-23T17:20:32.299-04:00 level=ERROR msg="Cache set failed" key=mem-key-1 error="memory limit exceeded: Memory usage limit exceeded. Current: 0, Limit: 200"
Error: memory limit exceeded: Memory usage limit exceeded. Current: 0, Limit: 200
‚úÖ [0;32mSUCCESS (Received Expected Error): Cache set exceeds memory limit (and output contains 'memory limit exceeded')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     1073741824
  Bytes in Memory:   200
  Events per Second: 1000
  Subscribers:       100
  RPS Data Limit:    25
  RPS Event Limit:   10

Current Usage (for current key):
  Bytes on Disk:     0
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Get limits after failed cache set (and output contains 'Current Usage')[0m
‚úÖ [0;32mSUCCESS: Check memory usage is still zero (and output contains 'Bytes in Memory:   0')[0m
‚ÑπÔ∏è Attempting to set cache value with size 68 (should succeed)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache set mem-key-2 ijDEkoWTW6jzCdOnlrEzTfkvvE0znI2n5Mf6JmcsvK9hoXymrRMJXJXLMqXHYWGS7d0=
OK
‚úÖ [0;32mSUCCESS: Cache set under memory limit (and output contains 'OK')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     1073741824
  Bytes in Memory:   200
  Events per Second: 1000
  Subscribers:       100
  RPS Data Limit:    25
  RPS Event Limit:   10

Current Usage (for current key):
  Bytes on Disk:     0
  Bytes in Memory:   114
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Get limits after successful cache set (and output contains 'Current Usage')[0m
‚úÖ [0;32mSUCCESS: Memory usage increased after successful set.[0m
‚ÑπÔ∏è Attempting to set another cache value with size 68 (should fail)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache set mem-key-3 ijDEkoWTW6jzCdOnlrEzTfkvvE0znI2n5Mf6JmcsvK9hoXymrRMJXJXLMqXHYWGS7d0=
time=2025-07-23T17:20:37.415-04:00 level=ERROR msg="Cache set failed" key=mem-key-3 error="memory limit exceeded: Memory usage limit exceeded. Current: 114, Limit: 200"
Error: memory limit exceeded: Memory usage limit exceeded. Current: 114, Limit: 200
‚úÖ [0;32mSUCCESS (Received Expected Error): Second cache set exceeds remaining memory (and output contains 'memory limit exceeded')[0m
‚ÑπÔ∏è Cleanup for memory usage limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_AACaMSOpv4sKgXmIN0+/VfzeassBctlaIhew5YR1uEVUz3kBhbRNDiS6MnbTjGibWRZ8ntJC0t44bsbu+72zK/4vQeoJHwE7evu58uZeXFK0bt0GNZ9PUi+k4VRU7eUQDL4a6O4K2tGjAKBXYZ4RamYpCpg=
time=2025-07-23T17:20:37.460-04:00 level=INFO msg="API key deleted successfully" key_value="insi_AACaMSOpv4sKgXmIN0+/VfzeassBctlaIhew5YR1uEVUz3kBhbRNDiS6MnbTjGibWRZ8ntJC0t44bsbu+72zK/4vQeoJHwE7evu58uZeXFK0bt0GNZ9PUi+k4VRU7eUQDL4a6O4K2tGjAKBXYZ4RamYpCpg="
OK
‚úÖ [0;32mSUCCESS: Delete API key for cleanup (and output contains 'OK')[0m

[0;34m==== Test: Data Operations (RPS) Rate Limit ====[0m
‚ÑπÔ∏è Creating key for data rate limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add datalimit_key_1753305637_2203322
time=2025-07-23T17:20:37.559-04:00 level=INFO msg="API key created successfully" key_name=datalimit_key_1753305637_2203322 key="insi_rHNquhkTaEV+qntay7/Xdm7MCJGiX08iSjhr00fCfInoZMyJ56+VL5VUfJCsNo4cCnG6J/fkKeP4Rvjm9Zo7GCK/f7tcU91uDvgvcbB9VcN/gmkHdVwvBNGLncYVy893p1iv/vjpFaDFPLBiDE+hULTAce4="
API Key Name: datalimit_key_1753305637_2203322
API Key:      insi_rHNquhkTaEV+qntay7/Xdm7MCJGiX08iSjhr00fCfInoZMyJ56+VL5VUfJCsNo4cCnG6J/fkKeP4Rvjm9Zo7GCK/f7tcU91uDvgvcbB9VcN/gmkHdVwvBNGLncYVy893p1iv/vjpFaDFPLBiDE+hULTAce4=
OK
‚úÖ [0;32mSUCCESS: Create API key for data limit test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Setting data RPS limit for 'insi_rHNquhkTaEV+qntay7/Xdm7MCJGiX08iSjhr00fCfInoZMyJ56+VL5VUfJCsNo4cCnG6J/fkKeP4Rvjm9Zo7GCK/f7tcU91uDvgvcbB9VcN/gmkHdVwvBNGLncYVy893p1iv/vjpFaDFPLBiDE+hULTAce4=' to 5 ops/sec
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api set-limits insi_rHNquhkTaEV+qntay7/Xdm7MCJGiX08iSjhr00fCfInoZMyJ56+VL5VUfJCsNo4cCnG6J/fkKeP4Rvjm9Zo7GCK/f7tcU91uDvgvcbB9VcN/gmkHdVwvBNGLncYVy893p1iv/vjpFaDFPLBiDE+hULTAce4= --rps-data 5
OK
‚úÖ [0;32mSUCCESS: Set data RPS limit to 5/sec (and output contains 'OK')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     1073741824
  Bytes in Memory:   262144000
  Events per Second: 1000
  Subscribers:       100
  RPS Data Limit:    5
  RPS Event Limit:   10

Current Usage (for current key):
  Bytes on Disk:     0
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Verify data RPS limit was set (and output contains 'RPS Data Limit:    5')[0m
‚ÑπÔ∏è Sending 'set' commands in a burst to test rate limit
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-1 val-1
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-2 val-2
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-3 val-3
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-4 val-4
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-5 val-5
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-6 val-6
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-7 val-7
time=2025-07-23T17:20:52.841-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=0s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:20:52.841-04:00 level=ERROR msg="Set failed" key=data-rate-test-7 error="rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-8 val-8
time=2025-07-23T17:20:52.862-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=0s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:20:52.862-04:00 level=ERROR msg="Set failed" key=data-rate-test-8 error="rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-9 val-9
time=2025-07-23T17:20:52.878-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=0s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:20:52.878-04:00 level=ERROR msg="Set failed" key=data-rate-test-9 error="rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-10 val-10
time=2025-07-23T17:20:52.893-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:20:52.893-04:00 level=ERROR msg="Set failed" key=data-rate-test-10 error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-11 val-11
time=2025-07-23T17:20:52.908-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:20:52.909-04:00 level=ERROR msg="Set failed" key=data-rate-test-11 error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-12 val-12
time=2025-07-23T17:20:52.928-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:20:52.928-04:00 level=ERROR msg="Set failed" key=data-rate-test-12 error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-13 val-13
time=2025-07-23T17:20:52.949-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:20:52.949-04:00 level=ERROR msg="Set failed" key=data-rate-test-13 error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-14 val-14
time=2025-07-23T17:20:52.970-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:20:52.970-04:00 level=ERROR msg="Set failed" key=data-rate-test-14 error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set data-rate-test-15 val-15
time=2025-07-23T17:20:52.986-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=2s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:20:52.986-04:00 level=ERROR msg="Set failed" key=data-rate-test-15 error="rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Burst test results: 6 succeeded, 9 failed with expected error.
‚úÖ [0;32mSUCCESS: Data operation burst was correctly throttled (some succeeded, some failed).[0m
‚ÑπÔ∏è Cleanup for data rate limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_rHNquhkTaEV+qntay7/Xdm7MCJGiX08iSjhr00fCfInoZMyJ56+VL5VUfJCsNo4cCnG6J/fkKeP4Rvjm9Zo7GCK/f7tcU91uDvgvcbB9VcN/gmkHdVwvBNGLncYVy893p1iv/vjpFaDFPLBiDE+hULTAce4=
time=2025-07-23T17:20:53.004-04:00 level=INFO msg="API key deleted successfully" key_value="insi_rHNquhkTaEV+qntay7/Xdm7MCJGiX08iSjhr00fCfInoZMyJ56+VL5VUfJCsNo4cCnG6J/fkKeP4Rvjm9Zo7GCK/f7tcU91uDvgvcbB9VcN/gmkHdVwvBNGLncYVy893p1iv/vjpFaDFPLBiDE+hULTAce4="
OK
‚úÖ [0;32mSUCCESS: Delete API key for cleanup (and output contains 'OK')[0m

[0;34m==== Test: Event Rate Limit ====[0m
‚ÑπÔ∏è Creating key for event rate limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add eventlimit_key_1753305653_2203322
time=2025-07-23T17:20:53.128-04:00 level=INFO msg="API key created successfully" key_name=eventlimit_key_1753305653_2203322 key="insi_/dnYvvgaqPRXYv6oRnbjq7vYyZu9J6iAlpFAYGHeQElk5ruWDNBomp1zXskBTVBCQTZr65MnkuKSkxtBwBZ1q453kONYUEie7K48tletowVIgpsWzFg0OvrERJHMUiWJmdveAIY3qmHOW0J5vzof8f+gzo4="
API Key Name: eventlimit_key_1753305653_2203322
API Key:      insi_/dnYvvgaqPRXYv6oRnbjq7vYyZu9J6iAlpFAYGHeQElk5ruWDNBomp1zXskBTVBCQTZr65MnkuKSkxtBwBZ1q453kONYUEie7K48tletowVIgpsWzFg0OvrERJHMUiWJmdveAIY3qmHOW0J5vzof8f+gzo4=
OK
‚úÖ [0;32mSUCCESS: Create API key for event limit test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Setting event RPS limit for 'insi_/dnYvvgaqPRXYv6oRnbjq7vYyZu9J6iAlpFAYGHeQElk5ruWDNBomp1zXskBTVBCQTZr65MnkuKSkxtBwBZ1q453kONYUEie7K48tletowVIgpsWzFg0OvrERJHMUiWJmdveAIY3qmHOW0J5vzof8f+gzo4=' to 3 events/sec
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api set-limits insi_/dnYvvgaqPRXYv6oRnbjq7vYyZu9J6iAlpFAYGHeQElk5ruWDNBomp1zXskBTVBCQTZr65MnkuKSkxtBwBZ1q453kONYUEie7K48tletowVIgpsWzFg0OvrERJHMUiWJmdveAIY3qmHOW0J5vzof8f+gzo4= --rps-event 3
OK
‚úÖ [0;32mSUCCESS: Set event RPS limit to 3/sec (and output contains 'OK')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     1073741824
  Bytes in Memory:   262144000
  Events per Second: 1000
  Subscribers:       100
  RPS Data Limit:    25
  RPS Event Limit:   3

Current Usage (for current key):
  Bytes on Disk:     0
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Verify event RPS limit was set (and output contains 'RPS Event Limit:   3')[0m
‚ÑπÔ∏è Publishing events in a burst to test rate limit
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml publish test-topic message-1
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml publish test-topic message-2
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml publish test-topic message-3
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml publish test-topic message-4
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml publish test-topic message-5
time=2025-07-23T17:21:08.345-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/events client.insi_client.retry_after=0s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:08.345-04:00 level=ERROR msg="Publish failed" topic=test-topic error="rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml publish test-topic message-6
time=2025-07-23T17:21:08.371-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/events client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:08.371-04:00 level=ERROR msg="Publish failed" topic=test-topic error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml publish test-topic message-7
time=2025-07-23T17:21:08.387-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/events client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:08.387-04:00 level=ERROR msg="Publish failed" topic=test-topic error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml publish test-topic message-8
time=2025-07-23T17:21:08.404-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/events client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:08.404-04:00 level=ERROR msg="Publish failed" topic=test-topic error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml publish test-topic message-9
time=2025-07-23T17:21:08.424-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/events client.insi_client.retry_after=2s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:08.424-04:00 level=ERROR msg="Publish failed" topic=test-topic error="rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml publish test-topic message-10
time=2025-07-23T17:21:08.447-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/events client.insi_client.retry_after=2s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:08.447-04:00 level=ERROR msg="Publish failed" topic=test-topic error="rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Burst test results: 4 succeeded, 6 failed with expected error.
‚úÖ [0;32mSUCCESS: Event burst was correctly throttled (some succeeded, some failed).[0m
‚ÑπÔ∏è Cleanup for event rate limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_/dnYvvgaqPRXYv6oRnbjq7vYyZu9J6iAlpFAYGHeQElk5ruWDNBomp1zXskBTVBCQTZr65MnkuKSkxtBwBZ1q453kONYUEie7K48tletowVIgpsWzFg0OvrERJHMUiWJmdveAIY3qmHOW0J5vzof8f+gzo4=
time=2025-07-23T17:21:08.500-04:00 level=INFO msg="API key deleted successfully" key_value="insi_/dnYvvgaqPRXYv6oRnbjq7vYyZu9J6iAlpFAYGHeQElk5ruWDNBomp1zXskBTVBCQTZr65MnkuKSkxtBwBZ1q453kONYUEie7K48tletowVIgpsWzFg0OvrERJHMUiWJmdveAIY3qmHOW0J5vzof8f+gzo4="
OK
‚úÖ [0;32mSUCCESS: Delete API key for cleanup (and output contains 'OK')[0m

[0;34m==== Test: Alias and API Key Rate Limit Sharing ====[0m
‚ÑπÔ∏è Creating key for alias rate limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add aliaslimit_key_1753305668_2203322
time=2025-07-23T17:21:08.636-04:00 level=INFO msg="API key created successfully" key_name=aliaslimit_key_1753305668_2203322 key="insi_ISjTDnioOxHccJdxphRpIOA8Sx7TU96PTtaTnTS5MAv6ckiTP2cEmZ5ArqtO+sFWlhQoFHfbwI+ED3clUUL8fAoMkeOrNogK6QCB84vBIQtJ2Ra0IGTZsyLX0vh+B7aj8C3TY4OphvS8i9JQIl2/m+ZvYvw="
API Key Name: aliaslimit_key_1753305668_2203322
API Key:      insi_ISjTDnioOxHccJdxphRpIOA8Sx7TU96PTtaTnTS5MAv6ckiTP2cEmZ5ArqtO+sFWlhQoFHfbwI+ED3clUUL8fAoMkeOrNogK6QCB84vBIQtJ2Ra0IGTZsyLX0vh+B7aj8C3TY4OphvS8i9JQIl2/m+ZvYvw=
OK
‚úÖ [0;32mSUCCESS: Create API key for alias limit test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Setting data RPS limit for 'insi_ISjTDnioOxHccJdxphRpIOA8Sx7TU96PTtaTnTS5MAv6ckiTP2cEmZ5ArqtO+sFWlhQoFHfbwI+ED3clUUL8fAoMkeOrNogK6QCB84vBIQtJ2Ra0IGTZsyLX0vh+B7aj8C3TY4OphvS8i9JQIl2/m+ZvYvw=' to 5 ops/sec
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api set-limits insi_ISjTDnioOxHccJdxphRpIOA8Sx7TU96PTtaTnTS5MAv6ckiTP2cEmZ5ArqtO+sFWlhQoFHfbwI+ED3clUUL8fAoMkeOrNogK6QCB84vBIQtJ2Ra0IGTZsyLX0vh+B7aj8C3TY4OphvS8i9JQIl2/m+ZvYvw= --rps-data 5
OK
‚úÖ [0;32mSUCCESS: Set data RPS limit to 5/sec (and output contains 'OK')[0m
‚ÑπÔ∏è Creating an alias for the key
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_F5irZ/fnnCKEdt6wiMSUk5/C8xlOqmUdedrW8jemWwYaILr11cg7GAT59g3+Bq7neIjD/wMZHQFfqKthcSWWMtlZpdVrc/XA2EqCC2xSVgpvCw8BZxzkjNSDw/lbNdMOonXhrI12C6fWJSU8HyLhgnwCLXbM2EmtZVDFa6Gc+DKTBTte
OK
‚úÖ [0;32mSUCCESS: Create alias for the key (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Sending 'set' commands using original key and alias to test shared rate limit
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-1 val-1
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-2 val-2
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-3 val-3
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-4 val-4
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-5 val-5
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-6 val-6
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-7 val-7
time=2025-07-23T17:21:23.951-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=0s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:23.951-04:00 level=ERROR msg="Set failed" key=alias-rate-test-7 error="rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-8 val-8
time=2025-07-23T17:21:23.969-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=0s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:23.969-04:00 level=ERROR msg="Set failed" key=alias-rate-test-8 error="rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-9 val-9
time=2025-07-23T17:21:23.992-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=0s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:23.993-04:00 level=ERROR msg="Set failed" key=alias-rate-test-9 error="rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 0s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-10 val-10
time=2025-07-23T17:21:24.011-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:24.011-04:00 level=ERROR msg="Set failed" key=alias-rate-test-10 error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-11 val-11
time=2025-07-23T17:21:24.030-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:24.030-04:00 level=ERROR msg="Set failed" key=alias-rate-test-11 error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-12 val-12
time=2025-07-23T17:21:24.051-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:24.051-04:00 level=ERROR msg="Set failed" key=alias-rate-test-12 error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-13 val-13
time=2025-07-23T17:21:24.070-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:24.070-04:00 level=ERROR msg="Set failed" key=alias-rate-test-13 error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-14 val-14
time=2025-07-23T17:21:24.081-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=1s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:24.081-04:00 level=ERROR msg="Set failed" key=alias-rate-test-14 error="rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 1s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-15 val-15
time=2025-07-23T17:21:24.092-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=2s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:24.092-04:00 level=ERROR msg="Set failed" key=alias-rate-test-15 error="rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-16 val-16
time=2025-07-23T17:21:24.112-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=2s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:24.112-04:00 level=ERROR msg="Set failed" key=alias-rate-test-16 error="rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-17 val-17
time=2025-07-23T17:21:24.139-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=2s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:24.139-04:00 level=ERROR msg="Set failed" key=alias-rate-test-17 error="rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-18 val-18
time=2025-07-23T17:21:24.158-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=2s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:24.158-04:00 level=ERROR msg="Set failed" key=alias-rate-test-18 error="rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-19 val-19
time=2025-07-23T17:21:24.182-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=2s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:24.182-04:00 level=ERROR msg="Set failed" key=alias-rate-test-19 error="rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-rate-test-20 val-20
time=2025-07-23T17:21:24.202-04:00 level=WARN msg="Request was rate limited" client.insi_client.url=https://localhost:8443/db/api/v1/set client.insi_client.retry_after=2s client.insi_client.limit=0 client.insi_client.burst=0
time=2025-07-23T17:21:24.202-04:00 level=ERROR msg="Set failed" key=alias-rate-test-20 error="rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)"
Error: rate limited: Too Many Requests. Try again in 2s. (Limit: 0, Burst: 0)
‚ÑπÔ∏è Shared limit burst test results: 6 succeeded, 14 failed with expected error.
‚úÖ [0;32mSUCCESS: API key and alias correctly share the same rate limit bucket.[0m
‚ÑπÔ∏è Cleanup for alias rate limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_ISjTDnioOxHccJdxphRpIOA8Sx7TU96PTtaTnTS5MAv6ckiTP2cEmZ5ArqtO+sFWlhQoFHfbwI+ED3clUUL8fAoMkeOrNogK6QCB84vBIQtJ2Ra0IGTZsyLX0vh+B7aj8C3TY4OphvS8i9JQIl2/m+ZvYvw=
time=2025-07-23T17:21:24.230-04:00 level=INFO msg="API key deleted successfully" key_value="insi_ISjTDnioOxHccJdxphRpIOA8Sx7TU96PTtaTnTS5MAv6ckiTP2cEmZ5ArqtO+sFWlhQoFHfbwI+ED3clUUL8fAoMkeOrNogK6QCB84vBIQtJ2Ra0IGTZsyLX0vh+B7aj8C3TY4OphvS8i9JQIl2/m+ZvYvw="
OK
‚úÖ [0;32mSUCCESS: Delete API key for cleanup (and output contains 'OK')[0m

[0;32mAll TKV Usage Limit operations tests completed.[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 50
[0;32mAll Usage Limit tests passed successfully![0m
‚úÖ Success: usage.sh completed.
üöÄ Running insight.sh...
insid pid: 2204798
2025-07-23T17:21:24.350-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:21:24.350-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-07-23T17:21:24.351-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:21:24.351-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-07-23T17:21:24.637-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:21:24.637-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-07-23T17:21:25.357-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-07-23T17:21:25.357-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-07-23T17:21:25.357-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-07-23T17:21:25.367-0400 [INFO]  election won: term=2 tally=1
2025-07-23T17:21:25.367-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-07-23T17:21:25.895-0400 [WARN]  no known peers, aborting election
2025-07-23T17:21:26.407-0400 [WARN]  no known peers, aborting election
2025-07-23T17:21:34.358-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-07-23T17:21:34.362-0400 [INFO]  added peer, starting replication: peer=node2
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-07-23T17:21:34.365-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
2025-07-23T17:21:34.365-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-07-23T17:21:34.367-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
set root tracker key internal:api_key_memory_usage: value 0
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
2025-07-23T17:21:34.645-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-07-23T17:21:34.650-0400 [INFO]  added peer, starting replication: peer=node1
2025-07-23T17:21:34.655-0400 [WARN]  failed to get previous log: previous-index=12 last-index=0 error="log not found"
2025-07-23T17:21:34.655-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-07-23T17:21:34.662-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
‚ÑπÔ∏è Using insic executable: /tmp/insi-test-cluster/insic
‚ÑπÔ∏è Using config: /tmp/insi-test-cluster/cluster.yaml

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml ping
Ping Response:
  leader: 127.0.0.1:2222
  node-badge-id: 57bcfa05-ccfb-4e17-b680-a63c78712866
  status: ok
  uptime: 14.923987061s
  entity: root
‚úÖ [0;32mSUCCESS: Server Ping (and output contains 'Ping Response:')[0m
‚ÑπÔ∏è Starting TKV Insight operations tests...

[0;34m==== Test: Insight Data Creation and Retrieval ====[0m
‚ÑπÔ∏è Creating 3 primary keys...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add insight_test_key_1_1753305699_2204888
time=2025-07-23T17:21:39.419-04:00 level=INFO msg="API key created successfully" key_name=insight_test_key_1_1753305699_2204888 key="insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI="
API Key Name: insight_test_key_1_1753305699_2204888
API Key:      insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=
OK
‚úÖ [0;32mSUCCESS: Create primary key #1 (and output contains 'API Key:')[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add insight_test_key_2_1753305699_2204888
time=2025-07-23T17:21:39.551-04:00 level=INFO msg="API key created successfully" key_name=insight_test_key_2_1753305699_2204888 key="insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro="
API Key Name: insight_test_key_2_1753305699_2204888
API Key:      insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=
OK
‚úÖ [0;32mSUCCESS: Create primary key #2 (and output contains 'API Key:')[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add insight_test_key_3_1753305699_2204888
time=2025-07-23T17:21:39.666-04:00 level=INFO msg="API key created successfully" key_name=insight_test_key_3_1753305699_2204888 key="insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8="
API Key Name: insight_test_key_3_1753305699_2204888
API Key:      insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=
OK
‚úÖ [0;32mSUCCESS: Create primary key #3 (and output contains 'API Key:')[0m
‚ÑπÔ∏è Primary keys created:
 - insight_test_key_1_1753305699_2204888: insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=
 - insight_test_key_3_1753305699_2204888: insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=
 - insight_test_key_2_1753305699_2204888: insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=
‚ÑπÔ∏è Creating 2 aliases for each primary key...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_i0hxsieLxEtX8lyypi+O+xlrXb4g/ooRe4yaAnPKm+OZdDkkkp5w+3OqksrVHAUqQ2F/lfmm9XiI1TFfKmIiLn8kouQ4iwN0a+r3iFDI2vMqK4yKtc2XZpFrLOgz1EKW+t8sNi/K2etvLZKIza0bc3w18BKWcUeIz7XeJsLYgwVkFRO1
OK
‚úÖ [0;32mSUCCESS: Create alias #1 for key 'insight_test_key_1_1753305699_2204888' (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_ERoQh0UESUHd0cxi2t7WMNbbcI6ffbmxZODlzRMU0KPDAGrmYyIlZROnXIBfBkygQJpZWID5ymIFI8zLgn8O4QRAP55AKprP+qn4TwTslEGFEK8boFbkOJjN0akl95tlYVZuQxrOPhobZbhqLjVdth9KMiElHD1g1cRrSv1tFIyf4G0s
OK
‚úÖ [0;32mSUCCESS: Create alias #2 for key 'insight_test_key_1_1753305699_2204888' (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_QV4MDfd6Fonm/iY+uoeseIu/zmOkvrbtQjzuduDD1NLh0Af4vL5TSQMj/gZKclwcrqPQ1jeASWb2JhVoeqVQb91ki7yGbxLS4ohpe10qtnKm/EcghLUE6nOuSK/hMQjqQo+zw1X6onDXS3et8D/ZaVnF460QdG0yFqbmQTwFYsWW99dX
OK
‚úÖ [0;32mSUCCESS: Create alias #1 for key 'insight_test_key_3_1753305699_2204888' (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_lK5aFoJXWo/6IE4oF8PLGuzbE0jKewqZqiXqUU5AIsvqb7gpEQ8zlzjSJxJHhRKF7YSkjjjkQt7PHvOPfFrFCbkd14woT1oHcFnNDWW+aVEdpb4Fm/V6c5o+TTdJMTOtoCkIfhV5nWcqzIrJKR1bM77gn7hemuhbOhB1j9jDsWUi8XVi
OK
‚úÖ [0;32mSUCCESS: Create alias #2 for key 'insight_test_key_3_1753305699_2204888' (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_9MFILSWMmz+Wd9fDd0C1i5VC/7tOlUcJpNGv6ckvFUYSAi4kQVeQMM1DUfPrNw+E/dwVovA4VR7u7FCvFSlJznC9eqGSr/MBXYPBflLnSppC5j+8huRJ69aNKyXPti5ZA/fpR8vcSmaJ7ID0zI9KmAyP6mVyxcvL71rWV0kBA7J9zmV1
OK
‚úÖ [0;32mSUCCESS: Create alias #1 for key 'insight_test_key_2_1753305699_2204888' (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_Zrhy3x9WzC84xxujaEqJf9v5kQfImYwQgVPpYAEL8hpALods+nZHFHUB5aH5eWQM57nh2kdO3uPPsGJvP17PXahIimOwsAtAL74lu4JE9ECnQiWNw5lRJEn+E9yy7NlW6LIDyQvnV8cjETAeuZJVn+gjq/KbXOjRzRUvY+MKikWnPF31
OK
‚úÖ [0;32mSUCCESS: Create alias #2 for key 'insight_test_key_2_1753305699_2204888' (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Aliases created:
 - For insi_XxDMhJx... -> insi_QV4MDfd6Fonm/iY+uoeseIu/zmOkvrbtQjzuduDD1NLh0Af4vL5TSQMj/gZKclwcrqPQ1jeASWb2JhVoeqVQb91ki7yGbxLS4ohpe10qtnKm/EcghLUE6nOuSK/hMQjqQo+zw1X6onDXS3et8D/ZaVnF460QdG0yFqbmQTwFYsWW99dX insi_lK5aFoJXWo/6IE4oF8PLGuzbE0jKewqZqiXqUU5AIsvqb7gpEQ8zlzjSJxJHhRKF7YSkjjjkQt7PHvOPfFrFCbkd14woT1oHcFnNDWW+aVEdpb4Fm/V6c5o+TTdJMTOtoCkIfhV5nWcqzIrJKR1bM77gn7hemuhbOhB1j9jDsWUi8XVi
 - For insi_1MCEISx... -> insi_9MFILSWMmz+Wd9fDd0C1i5VC/7tOlUcJpNGv6ckvFUYSAi4kQVeQMM1DUfPrNw+E/dwVovA4VR7u7FCvFSlJznC9eqGSr/MBXYPBflLnSppC5j+8huRJ69aNKyXPti5ZA/fpR8vcSmaJ7ID0zI9KmAyP6mVyxcvL71rWV0kBA7J9zmV1 insi_Zrhy3x9WzC84xxujaEqJf9v5kQfImYwQgVPpYAEL8hpALods+nZHFHUB5aH5eWQM57nh2kdO3uPPsGJvP17PXahIimOwsAtAL74lu4JE9ECnQiWNw5lRJEn+E9yy7NlW6LIDyQvnV8cjETAeuZJVn+gjq/KbXOjRzRUvY+MKikWnPF31
 - For insi_tk/Xo7d... -> insi_i0hxsieLxEtX8lyypi+O+xlrXb4g/ooRe4yaAnPKm+OZdDkkkp5w+3OqksrVHAUqQ2F/lfmm9XiI1TFfKmIiLn8kouQ4iwN0a+r3iFDI2vMqK4yKtc2XZpFrLOgz1EKW+t8sNi/K2etvLZKIza0bc3w18BKWcUeIz7XeJsLYgwVkFRO1 insi_ERoQh0UESUHd0cxi2t7WMNbbcI6ffbmxZODlzRMU0KPDAGrmYyIlZROnXIBfBkygQJpZWID5ymIFI8zLgn8O4QRAP55AKprP+qn4TwTslEGFEK8boFbkOJjN0akl95tlYVZuQxrOPhobZbhqLjVdth9KMiElHD1g1cRrSv1tFIyf4G0s

[0;34m==== Testing 'admin insight entities' ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin insight entities 0 20
Entity Details:
  Root API Key:    insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=
  Key UUID:        17e4d6fc-b8e5-4734-8960-0e14113d5eb4
  Data Scope UUID: 3259c71d-8579-4e23-bb35-05493bfddbe5
  Aliases:
    - insi_9MFILSWMmz+Wd9fDd0C1i5VC/7tOlUcJpNGv6ckvFUYSAi4kQVeQMM1DUfPrNw+E/dwVovA4VR7u7FCvFSlJznC9eqGSr/MBXYPBflLnSppC5j+8huRJ69aNKyXPti5ZA/fpR8vcSmaJ7ID0zI9KmAyP6mVyxcvL71rWV0kBA7J9zmV1
    - insi_Zrhy3x9WzC84xxujaEqJf9v5kQfImYwQgVPpYAEL8hpALods+nZHFHUB5aH5eWQM57nh2kdO3uPPsGJvP17PXahIimOwsAtAL74lu4JE9ECnQiWNw5lRJEn+E9yy7NlW6LIDyQvnV8cjETAeuZJVn+gjq/KbXOjRzRUvY+MKikWnPF31

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0

--------------------
Entity Details:
  Root API Key:    insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=
  Key UUID:        5703117d-2acc-4022-b82f-2978457446bf
  Data Scope UUID: ac3155b5-becd-4c2a-a199-c7833baa109d
  Aliases:
    - insi_QV4MDfd6Fonm/iY+uoeseIu/zmOkvrbtQjzuduDD1NLh0Af4vL5TSQMj/gZKclwcrqPQ1jeASWb2JhVoeqVQb91ki7yGbxLS4ohpe10qtnKm/EcghLUE6nOuSK/hMQjqQo+zw1X6onDXS3et8D/ZaVnF460QdG0yFqbmQTwFYsWW99dX
    - insi_lK5aFoJXWo/6IE4oF8PLGuzbE0jKewqZqiXqUU5AIsvqb7gpEQ8zlzjSJxJHhRKF7YSkjjjkQt7PHvOPfFrFCbkd14woT1oHcFnNDWW+aVEdpb4Fm/V6c5o+TTdJMTOtoCkIfhV5nWcqzIrJKR1bM77gn7hemuhbOhB1j9jDsWUi8XVi

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0

--------------------
Entity Details:
  Root API Key:    insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=
  Key UUID:        7b2ef341-0840-4685-9215-2789977ec994
  Data Scope UUID: 7cb45ac1-5454-4576-af2c-708bcb54786e
  Aliases:
    - insi_ERoQh0UESUHd0cxi2t7WMNbbcI6ffbmxZODlzRMU0KPDAGrmYyIlZROnXIBfBkygQJpZWID5ymIFI8zLgn8O4QRAP55AKprP+qn4TwTslEGFEK8boFbkOJjN0akl95tlYVZuQxrOPhobZbhqLjVdth9KMiElHD1g1cRrSv1tFIyf4G0s
    - insi_i0hxsieLxEtX8lyypi+O+xlrXb4g/ooRe4yaAnPKm+OZdDkkkp5w+3OqksrVHAUqQ2F/lfmm9XiI1TFfKmIiLn8kouQ4iwN0a+r3iFDI2vMqK4yKtc2XZpFrLOgz1EKW+t8sNi/K2etvLZKIza0bc3w18BKWcUeIz7XeJsLYgwVkFRO1

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0
‚úÖ [0;32mSUCCESS: Get list of entities (and output contains 'Entity Details')[0m
‚úÖ [0;32mSUCCESS: Check for primary key 'insight_test_key_1_1753305699_2204888' in entities list (and output contains 'insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=')[0m
‚úÖ [0;32mSUCCESS: Check for primary key 'insight_test_key_3_1753305699_2204888' in entities list (and output contains 'insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=')[0m
‚úÖ [0;32mSUCCESS: Check for primary key 'insight_test_key_2_1753305699_2204888' in entities list (and output contains 'insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=')[0m

[0;34m==== Testing 'admin insight entity' for each primary key ====[0m
‚ÑπÔ∏è Checking entity details for primary key 'insight_test_key_1_1753305699_2204888'
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin insight entity insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=
Entity Details:
  Root API Key:    insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=
  Key UUID:        7b2ef341-0840-4685-9215-2789977ec994
  Data Scope UUID: 7cb45ac1-5454-4576-af2c-708bcb54786e
  Aliases:
    - insi_ERoQh0UESUHd0cxi2t7WMNbbcI6ffbmxZODlzRMU0KPDAGrmYyIlZROnXIBfBkygQJpZWID5ymIFI8zLgn8O4QRAP55AKprP+qn4TwTslEGFEK8boFbkOJjN0akl95tlYVZuQxrOPhobZbhqLjVdth9KMiElHD1g1cRrSv1tFIyf4G0s
    - insi_i0hxsieLxEtX8lyypi+O+xlrXb4g/ooRe4yaAnPKm+OZdDkkkp5w+3OqksrVHAUqQ2F/lfmm9XiI1TFfKmIiLn8kouQ4iwN0a+r3iFDI2vMqK4yKtc2XZpFrLOgz1EKW+t8sNi/K2etvLZKIza0bc3w18BKWcUeIz7XeJsLYgwVkFRO1

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0
‚úÖ [0;32mSUCCESS: Get entity details for key 'insight_test_key_1_1753305699_2204888' (and output contains 'Entity Details')[0m
‚úÖ [0;32mSUCCESS:   - Verify RootApiKey matches (and output contains 'Root API Key:    insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=')[0m
‚úÖ [0;32mSUCCESS:   - Verify alias 'insi_i0hxsieLxEtX8lyypi+O+xlrXb4g/ooRe4yaAnPKm+OZdDkkkp5w+3OqksrVHAUqQ2F/lfmm9XiI1TFfKmIiLn8kouQ4iwN0a+r3iFDI2vMqK4yKtc2XZpFrLOgz1EKW+t8sNi/K2etvLZKIza0bc3w18BKWcUeIz7XeJsLYgwVkFRO1' is listed (and output contains 'insi_i0hxsieLxEtX8lyypi+O+xlrXb4g/ooRe4yaAnPKm+OZdDkkkp5w+3OqksrVHAUqQ2F/lfmm9XiI1TFfKmIiLn8kouQ4iwN0a+r3iFDI2vMqK4yKtc2XZpFrLOgz1EKW+t8sNi/K2etvLZKIza0bc3w18BKWcUeIz7XeJsLYgwVkFRO1')[0m
‚úÖ [0;32mSUCCESS:   - Verify alias 'insi_ERoQh0UESUHd0cxi2t7WMNbbcI6ffbmxZODlzRMU0KPDAGrmYyIlZROnXIBfBkygQJpZWID5ymIFI8zLgn8O4QRAP55AKprP+qn4TwTslEGFEK8boFbkOJjN0akl95tlYVZuQxrOPhobZbhqLjVdth9KMiElHD1g1cRrSv1tFIyf4G0s' is listed (and output contains 'insi_ERoQh0UESUHd0cxi2t7WMNbbcI6ffbmxZODlzRMU0KPDAGrmYyIlZROnXIBfBkygQJpZWID5ymIFI8zLgn8O4QRAP55AKprP+qn4TwTslEGFEK8boFbkOJjN0akl95tlYVZuQxrOPhobZbhqLjVdth9KMiElHD1g1cRrSv1tFIyf4G0s')[0m
‚ÑπÔ∏è Checking entity details for primary key 'insight_test_key_3_1753305699_2204888'
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin insight entity insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=
Entity Details:
  Root API Key:    insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=
  Key UUID:        5703117d-2acc-4022-b82f-2978457446bf
  Data Scope UUID: ac3155b5-becd-4c2a-a199-c7833baa109d
  Aliases:
    - insi_QV4MDfd6Fonm/iY+uoeseIu/zmOkvrbtQjzuduDD1NLh0Af4vL5TSQMj/gZKclwcrqPQ1jeASWb2JhVoeqVQb91ki7yGbxLS4ohpe10qtnKm/EcghLUE6nOuSK/hMQjqQo+zw1X6onDXS3et8D/ZaVnF460QdG0yFqbmQTwFYsWW99dX
    - insi_lK5aFoJXWo/6IE4oF8PLGuzbE0jKewqZqiXqUU5AIsvqb7gpEQ8zlzjSJxJHhRKF7YSkjjjkQt7PHvOPfFrFCbkd14woT1oHcFnNDWW+aVEdpb4Fm/V6c5o+TTdJMTOtoCkIfhV5nWcqzIrJKR1bM77gn7hemuhbOhB1j9jDsWUi8XVi

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0
‚úÖ [0;32mSUCCESS: Get entity details for key 'insight_test_key_3_1753305699_2204888' (and output contains 'Entity Details')[0m
‚úÖ [0;32mSUCCESS:   - Verify RootApiKey matches (and output contains 'Root API Key:    insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=')[0m
‚úÖ [0;32mSUCCESS:   - Verify alias 'insi_QV4MDfd6Fonm/iY+uoeseIu/zmOkvrbtQjzuduDD1NLh0Af4vL5TSQMj/gZKclwcrqPQ1jeASWb2JhVoeqVQb91ki7yGbxLS4ohpe10qtnKm/EcghLUE6nOuSK/hMQjqQo+zw1X6onDXS3et8D/ZaVnF460QdG0yFqbmQTwFYsWW99dX' is listed (and output contains 'insi_QV4MDfd6Fonm/iY+uoeseIu/zmOkvrbtQjzuduDD1NLh0Af4vL5TSQMj/gZKclwcrqPQ1jeASWb2JhVoeqVQb91ki7yGbxLS4ohpe10qtnKm/EcghLUE6nOuSK/hMQjqQo+zw1X6onDXS3et8D/ZaVnF460QdG0yFqbmQTwFYsWW99dX')[0m
‚úÖ [0;32mSUCCESS:   - Verify alias 'insi_lK5aFoJXWo/6IE4oF8PLGuzbE0jKewqZqiXqUU5AIsvqb7gpEQ8zlzjSJxJHhRKF7YSkjjjkQt7PHvOPfFrFCbkd14woT1oHcFnNDWW+aVEdpb4Fm/V6c5o+TTdJMTOtoCkIfhV5nWcqzIrJKR1bM77gn7hemuhbOhB1j9jDsWUi8XVi' is listed (and output contains 'insi_lK5aFoJXWo/6IE4oF8PLGuzbE0jKewqZqiXqUU5AIsvqb7gpEQ8zlzjSJxJHhRKF7YSkjjjkQt7PHvOPfFrFCbkd14woT1oHcFnNDWW+aVEdpb4Fm/V6c5o+TTdJMTOtoCkIfhV5nWcqzIrJKR1bM77gn7hemuhbOhB1j9jDsWUi8XVi')[0m
‚ÑπÔ∏è Checking entity details for primary key 'insight_test_key_2_1753305699_2204888'
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin insight entity insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=
Entity Details:
  Root API Key:    insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=
  Key UUID:        17e4d6fc-b8e5-4734-8960-0e14113d5eb4
  Data Scope UUID: 3259c71d-8579-4e23-bb35-05493bfddbe5
  Aliases:
    - insi_9MFILSWMmz+Wd9fDd0C1i5VC/7tOlUcJpNGv6ckvFUYSAi4kQVeQMM1DUfPrNw+E/dwVovA4VR7u7FCvFSlJznC9eqGSr/MBXYPBflLnSppC5j+8huRJ69aNKyXPti5ZA/fpR8vcSmaJ7ID0zI9KmAyP6mVyxcvL71rWV0kBA7J9zmV1
    - insi_Zrhy3x9WzC84xxujaEqJf9v5kQfImYwQgVPpYAEL8hpALods+nZHFHUB5aH5eWQM57nh2kdO3uPPsGJvP17PXahIimOwsAtAL74lu4JE9ECnQiWNw5lRJEn+E9yy7NlW6LIDyQvnV8cjETAeuZJVn+gjq/KbXOjRzRUvY+MKikWnPF31

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0
‚úÖ [0;32mSUCCESS: Get entity details for key 'insight_test_key_2_1753305699_2204888' (and output contains 'Entity Details')[0m
‚úÖ [0;32mSUCCESS:   - Verify RootApiKey matches (and output contains 'Root API Key:    insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=')[0m
‚úÖ [0;32mSUCCESS:   - Verify alias 'insi_9MFILSWMmz+Wd9fDd0C1i5VC/7tOlUcJpNGv6ckvFUYSAi4kQVeQMM1DUfPrNw+E/dwVovA4VR7u7FCvFSlJznC9eqGSr/MBXYPBflLnSppC5j+8huRJ69aNKyXPti5ZA/fpR8vcSmaJ7ID0zI9KmAyP6mVyxcvL71rWV0kBA7J9zmV1' is listed (and output contains 'insi_9MFILSWMmz+Wd9fDd0C1i5VC/7tOlUcJpNGv6ckvFUYSAi4kQVeQMM1DUfPrNw+E/dwVovA4VR7u7FCvFSlJznC9eqGSr/MBXYPBflLnSppC5j+8huRJ69aNKyXPti5ZA/fpR8vcSmaJ7ID0zI9KmAyP6mVyxcvL71rWV0kBA7J9zmV1')[0m
‚úÖ [0;32mSUCCESS:   - Verify alias 'insi_Zrhy3x9WzC84xxujaEqJf9v5kQfImYwQgVPpYAEL8hpALods+nZHFHUB5aH5eWQM57nh2kdO3uPPsGJvP17PXahIimOwsAtAL74lu4JE9ECnQiWNw5lRJEn+E9yy7NlW6LIDyQvnV8cjETAeuZJVn+gjq/KbXOjRzRUvY+MKikWnPF31' is listed (and output contains 'insi_Zrhy3x9WzC84xxujaEqJf9v5kQfImYwQgVPpYAEL8hpALods+nZHFHUB5aH5eWQM57nh2kdO3uPPsGJvP17PXahIimOwsAtAL74lu4JE9ECnQiWNw5lRJEn+E9yy7NlW6LIDyQvnV8cjETAeuZJVn+gjq/KbXOjRzRUvY+MKikWnPF31')[0m

[0;34m==== Testing 'admin insight entity-by-alias' for each alias ====[0m
‚ÑπÔ∏è Checking entity details for alias 'insi_QV4MDfd...' (should map to 'insi_XxDMhJx...')
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin insight entity-by-alias insi_QV4MDfd6Fonm/iY+uoeseIu/zmOkvrbtQjzuduDD1NLh0Af4vL5TSQMj/gZKclwcrqPQ1jeASWb2JhVoeqVQb91ki7yGbxLS4ohpe10qtnKm/EcghLUE6nOuSK/hMQjqQo+zw1X6onDXS3et8D/ZaVnF460QdG0yFqbmQTwFYsWW99dX
Entity Details:
  Root API Key:    insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=
  Key UUID:        5703117d-2acc-4022-b82f-2978457446bf
  Data Scope UUID: ac3155b5-becd-4c2a-a199-c7833baa109d
  Aliases:
    - insi_QV4MDfd6Fonm/iY+uoeseIu/zmOkvrbtQjzuduDD1NLh0Af4vL5TSQMj/gZKclwcrqPQ1jeASWb2JhVoeqVQb91ki7yGbxLS4ohpe10qtnKm/EcghLUE6nOuSK/hMQjqQo+zw1X6onDXS3et8D/ZaVnF460QdG0yFqbmQTwFYsWW99dX
    - insi_lK5aFoJXWo/6IE4oF8PLGuzbE0jKewqZqiXqUU5AIsvqb7gpEQ8zlzjSJxJHhRKF7YSkjjjkQt7PHvOPfFrFCbkd14woT1oHcFnNDWW+aVEdpb4Fm/V6c5o+TTdJMTOtoCkIfhV5nWcqzIrJKR1bM77gn7hemuhbOhB1j9jDsWUi8XVi

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0
‚úÖ [0;32mSUCCESS: Get entity details for alias 'insi_QV4MDfd' (and output contains 'Entity Details')[0m
‚úÖ [0;32mSUCCESS:   - Verify RootApiKey matches parent (and output contains 'Root API Key:    insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=')[0m
‚ÑπÔ∏è Checking entity details for alias 'insi_lK5aFoJ...' (should map to 'insi_XxDMhJx...')
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin insight entity-by-alias insi_lK5aFoJXWo/6IE4oF8PLGuzbE0jKewqZqiXqUU5AIsvqb7gpEQ8zlzjSJxJHhRKF7YSkjjjkQt7PHvOPfFrFCbkd14woT1oHcFnNDWW+aVEdpb4Fm/V6c5o+TTdJMTOtoCkIfhV5nWcqzIrJKR1bM77gn7hemuhbOhB1j9jDsWUi8XVi
Entity Details:
  Root API Key:    insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=
  Key UUID:        5703117d-2acc-4022-b82f-2978457446bf
  Data Scope UUID: ac3155b5-becd-4c2a-a199-c7833baa109d
  Aliases:
    - insi_QV4MDfd6Fonm/iY+uoeseIu/zmOkvrbtQjzuduDD1NLh0Af4vL5TSQMj/gZKclwcrqPQ1jeASWb2JhVoeqVQb91ki7yGbxLS4ohpe10qtnKm/EcghLUE6nOuSK/hMQjqQo+zw1X6onDXS3et8D/ZaVnF460QdG0yFqbmQTwFYsWW99dX
    - insi_lK5aFoJXWo/6IE4oF8PLGuzbE0jKewqZqiXqUU5AIsvqb7gpEQ8zlzjSJxJHhRKF7YSkjjjkQt7PHvOPfFrFCbkd14woT1oHcFnNDWW+aVEdpb4Fm/V6c5o+TTdJMTOtoCkIfhV5nWcqzIrJKR1bM77gn7hemuhbOhB1j9jDsWUi8XVi

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0
‚úÖ [0;32mSUCCESS: Get entity details for alias 'insi_lK5aFoJ' (and output contains 'Entity Details')[0m
‚úÖ [0;32mSUCCESS:   - Verify RootApiKey matches parent (and output contains 'Root API Key:    insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=')[0m
‚ÑπÔ∏è Checking entity details for alias 'insi_9MFILSW...' (should map to 'insi_1MCEISx...')
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin insight entity-by-alias insi_9MFILSWMmz+Wd9fDd0C1i5VC/7tOlUcJpNGv6ckvFUYSAi4kQVeQMM1DUfPrNw+E/dwVovA4VR7u7FCvFSlJznC9eqGSr/MBXYPBflLnSppC5j+8huRJ69aNKyXPti5ZA/fpR8vcSmaJ7ID0zI9KmAyP6mVyxcvL71rWV0kBA7J9zmV1
Entity Details:
  Root API Key:    insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=
  Key UUID:        17e4d6fc-b8e5-4734-8960-0e14113d5eb4
  Data Scope UUID: 3259c71d-8579-4e23-bb35-05493bfddbe5
  Aliases:
    - insi_9MFILSWMmz+Wd9fDd0C1i5VC/7tOlUcJpNGv6ckvFUYSAi4kQVeQMM1DUfPrNw+E/dwVovA4VR7u7FCvFSlJznC9eqGSr/MBXYPBflLnSppC5j+8huRJ69aNKyXPti5ZA/fpR8vcSmaJ7ID0zI9KmAyP6mVyxcvL71rWV0kBA7J9zmV1
    - insi_Zrhy3x9WzC84xxujaEqJf9v5kQfImYwQgVPpYAEL8hpALods+nZHFHUB5aH5eWQM57nh2kdO3uPPsGJvP17PXahIimOwsAtAL74lu4JE9ECnQiWNw5lRJEn+E9yy7NlW6LIDyQvnV8cjETAeuZJVn+gjq/KbXOjRzRUvY+MKikWnPF31

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0
‚úÖ [0;32mSUCCESS: Get entity details for alias 'insi_9MFILSW' (and output contains 'Entity Details')[0m
‚úÖ [0;32mSUCCESS:   - Verify RootApiKey matches parent (and output contains 'Root API Key:    insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=')[0m
‚ÑπÔ∏è Checking entity details for alias 'insi_Zrhy3x9...' (should map to 'insi_1MCEISx...')
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin insight entity-by-alias insi_Zrhy3x9WzC84xxujaEqJf9v5kQfImYwQgVPpYAEL8hpALods+nZHFHUB5aH5eWQM57nh2kdO3uPPsGJvP17PXahIimOwsAtAL74lu4JE9ECnQiWNw5lRJEn+E9yy7NlW6LIDyQvnV8cjETAeuZJVn+gjq/KbXOjRzRUvY+MKikWnPF31
Entity Details:
  Root API Key:    insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=
  Key UUID:        17e4d6fc-b8e5-4734-8960-0e14113d5eb4
  Data Scope UUID: 3259c71d-8579-4e23-bb35-05493bfddbe5
  Aliases:
    - insi_9MFILSWMmz+Wd9fDd0C1i5VC/7tOlUcJpNGv6ckvFUYSAi4kQVeQMM1DUfPrNw+E/dwVovA4VR7u7FCvFSlJznC9eqGSr/MBXYPBflLnSppC5j+8huRJ69aNKyXPti5ZA/fpR8vcSmaJ7ID0zI9KmAyP6mVyxcvL71rWV0kBA7J9zmV1
    - insi_Zrhy3x9WzC84xxujaEqJf9v5kQfImYwQgVPpYAEL8hpALods+nZHFHUB5aH5eWQM57nh2kdO3uPPsGJvP17PXahIimOwsAtAL74lu4JE9ECnQiWNw5lRJEn+E9yy7NlW6LIDyQvnV8cjETAeuZJVn+gjq/KbXOjRzRUvY+MKikWnPF31

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0
‚úÖ [0;32mSUCCESS: Get entity details for alias 'insi_Zrhy3x9' (and output contains 'Entity Details')[0m
‚úÖ [0;32mSUCCESS:   - Verify RootApiKey matches parent (and output contains 'Root API Key:    insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=')[0m
‚ÑπÔ∏è Checking entity details for alias 'insi_i0hxsie...' (should map to 'insi_tk/Xo7d...')
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin insight entity-by-alias insi_i0hxsieLxEtX8lyypi+O+xlrXb4g/ooRe4yaAnPKm+OZdDkkkp5w+3OqksrVHAUqQ2F/lfmm9XiI1TFfKmIiLn8kouQ4iwN0a+r3iFDI2vMqK4yKtc2XZpFrLOgz1EKW+t8sNi/K2etvLZKIza0bc3w18BKWcUeIz7XeJsLYgwVkFRO1
Entity Details:
  Root API Key:    insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=
  Key UUID:        7b2ef341-0840-4685-9215-2789977ec994
  Data Scope UUID: 7cb45ac1-5454-4576-af2c-708bcb54786e
  Aliases:
    - insi_ERoQh0UESUHd0cxi2t7WMNbbcI6ffbmxZODlzRMU0KPDAGrmYyIlZROnXIBfBkygQJpZWID5ymIFI8zLgn8O4QRAP55AKprP+qn4TwTslEGFEK8boFbkOJjN0akl95tlYVZuQxrOPhobZbhqLjVdth9KMiElHD1g1cRrSv1tFIyf4G0s
    - insi_i0hxsieLxEtX8lyypi+O+xlrXb4g/ooRe4yaAnPKm+OZdDkkkp5w+3OqksrVHAUqQ2F/lfmm9XiI1TFfKmIiLn8kouQ4iwN0a+r3iFDI2vMqK4yKtc2XZpFrLOgz1EKW+t8sNi/K2etvLZKIza0bc3w18BKWcUeIz7XeJsLYgwVkFRO1

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0
‚úÖ [0;32mSUCCESS: Get entity details for alias 'insi_i0hxsie' (and output contains 'Entity Details')[0m
‚úÖ [0;32mSUCCESS:   - Verify RootApiKey matches parent (and output contains 'Root API Key:    insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=')[0m
‚ÑπÔ∏è Checking entity details for alias 'insi_ERoQh0U...' (should map to 'insi_tk/Xo7d...')
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin insight entity-by-alias insi_ERoQh0UESUHd0cxi2t7WMNbbcI6ffbmxZODlzRMU0KPDAGrmYyIlZROnXIBfBkygQJpZWID5ymIFI8zLgn8O4QRAP55AKprP+qn4TwTslEGFEK8boFbkOJjN0akl95tlYVZuQxrOPhobZbhqLjVdth9KMiElHD1g1cRrSv1tFIyf4G0s
Entity Details:
  Root API Key:    insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=
  Key UUID:        7b2ef341-0840-4685-9215-2789977ec994
  Data Scope UUID: 7cb45ac1-5454-4576-af2c-708bcb54786e
  Aliases:
    - insi_ERoQh0UESUHd0cxi2t7WMNbbcI6ffbmxZODlzRMU0KPDAGrmYyIlZROnXIBfBkygQJpZWID5ymIFI8zLgn8O4QRAP55AKprP+qn4TwTslEGFEK8boFbkOJjN0akl95tlYVZuQxrOPhobZbhqLjVdth9KMiElHD1g1cRrSv1tFIyf4G0s
    - insi_i0hxsieLxEtX8lyypi+O+xlrXb4g/ooRe4yaAnPKm+OZdDkkkp5w+3OqksrVHAUqQ2F/lfmm9XiI1TFfKmIiLn8kouQ4iwN0a+r3iFDI2vMqK4yKtc2XZpFrLOgz1EKW+t8sNi/K2etvLZKIza0bc3w18BKWcUeIz7XeJsLYgwVkFRO1

  Maximum Limits:
    Bytes on Disk:     1073741824
    Bytes in Memory:   262144000
    Events Emitted:    1000
    Subscribers:       100

  Current Usage:
    Bytes on Disk:     0
    Bytes in Memory:   0
    Events Emitted:    0
    Subscribers:       0
‚úÖ [0;32mSUCCESS: Get entity details for alias 'insi_ERoQh0U' (and output contains 'Entity Details')[0m
‚úÖ [0;32mSUCCESS:   - Verify RootApiKey matches parent (and output contains 'Root API Key:    insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=')[0m

[0;34m==== Cleaning up created keys ====[0m
‚ÑπÔ∏è Deleting primary key 'insight_test_key_1_1753305699_2204888' (insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=)
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI=
time=2025-07-23T17:21:50.365-04:00 level=INFO msg="API key deleted successfully" key_value="insi_tk/Xo7dXgMzpacH1tvYz5TpY+cRJ6YtHf778Cqt7lbVXDOLsOvndouDtS6XDWhXWM+wHj97NNGWpceIiDI2uoTtsB6Tk/I1T3Ksq5YacSQ9wKBEJ9PakCDwlL4RRY4w+HkueKuRyCp53qDLkV0R3nYxNKCI="
OK
‚úÖ [0;32mSUCCESS: Delete primary key 'insight_test_key_1_1753305699_2204888'[0m
‚ÑπÔ∏è Deleting primary key 'insight_test_key_3_1753305699_2204888' (insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=)
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8=
time=2025-07-23T17:21:50.396-04:00 level=INFO msg="API key deleted successfully" key_value="insi_XxDMhJxNnOb2UOuY/PTnbYmapALs7KGtsfDUDsXGwcBds/8FXUjEcblHS4vMyZkPa5gDZYjKwMz9ECe88glAeWvlOLhxzV4rquGMyMHrFYnmg0Cp9W054OeAmaGz3+SqlPgLVkRfjQnTBCY6Hld5GRbtim8="
OK
‚úÖ [0;32mSUCCESS: Delete primary key 'insight_test_key_3_1753305699_2204888'[0m
‚ÑπÔ∏è Deleting primary key 'insight_test_key_2_1753305699_2204888' (insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=)
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro=
time=2025-07-23T17:21:50.421-04:00 level=INFO msg="API key deleted successfully" key_value="insi_1MCEISxYWn5Y1XGTNm/g5Wxhlvc//iznNcSUGfxyUNevl55BoaaO+FQYK8twzZNz55AckBctC/H1MJgrc3ouqjIkkXzUlzDrBO4s93uo6qe3oSguXZHDSKs5ZiArcyNHsLAGldJGdye/SUBRhyG6uFN6sro="
OK
‚úÖ [0;32mSUCCESS: Delete primary key 'insight_test_key_2_1753305699_2204888'[0m

[0;32mAll TKV Insight operations tests completed.[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 41
[0;32mAll Insight tests passed successfully![0m
‚úÖ Success: insight.sh completed.
üöÄ Running metrics.sh...
insid pid: 2205175
2025-07-23T17:21:50.550-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:21:50.550-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-07-23T17:21:50.552-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:21:50.552-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-07-23T17:21:50.620-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:21:50.621-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-07-23T17:21:51.605-0400 [WARN]  no known peers, aborting election
2025-07-23T17:21:52.097-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-07-23T17:21:52.097-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-07-23T17:21:52.097-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-07-23T17:21:52.105-0400 [INFO]  election won: term=2 tally=1
2025-07-23T17:21:52.105-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-07-23T17:21:52.252-0400 [WARN]  no known peers, aborting election
2025-07-23T17:22:00.559-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-07-23T17:22:00.564-0400 [INFO]  added peer, starting replication: peer=node1
2025-07-23T17:22:00.564-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-07-23T17:22:00.566-0400 [INFO]  added peer, starting replication: peer=node2
2025-07-23T17:22:00.567-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
2025-07-23T17:22:00.567-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-07-23T17:22:00.569-0400 [WARN]  failed to get previous log: previous-index=4 last-index=0 error="log not found"
2025-07-23T17:22:00.569-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-07-23T17:22:00.570-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
2025-07-23T17:22:00.572-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
set root tracker key internal:api_key_memory_usage: value 0
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
‚ÑπÔ∏è Using insic executable: /tmp/insi-test-cluster/insic
‚ÑπÔ∏è Using config: /tmp/insi-test-cluster/cluster.yaml

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml ping
Ping Response:
  entity: root
  leader: 127.0.0.1:2222
  node-badge-id: 98907fba-fc93-4a4a-9625-f7eb7a99fe02
  status: ok
  uptime: 14.854038426s
‚úÖ [0;32mSUCCESS: Server Ping (and output contains 'Ping Response:')[0m
‚ÑπÔ∏è Starting TKV Metrics operations tests...

[0;34m==== Test: Metrics Endpoint Access Control ====[0m
‚ÑπÔ∏è Attempting to get metrics without --root (should fail)
‚ÑπÔ∏è Running (no root): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml admin ops
time=2025-07-23T17:22:05.485-04:00 level=ERROR msg="admin ops requires the --root flag to be set."
Error: admin ops requires --root flag.
‚úÖ [0;32mSUCCESS (Received Expected Error): Get metrics without --root (and output contains 'requires --root flag')[0m
‚ÑπÔ∏è Attempting to get metrics with --root (should succeed)
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin ops
Operations Per Second:
  System:       0.00
  Value Store:  0.00
  Cache:        0.00
  Events:       0.00
  Subscribers:  0.00
  Blobs:        0.00
‚úÖ [0;32mSUCCESS: Get metrics with --root (and output contains 'Operations Per Second:')[0m
‚úÖ [0;32mSUCCESS: Check for System metric (and output contains 'System:')[0m
‚úÖ [0;32mSUCCESS: Check for Value Store metric (and output contains 'Value Store:')[0m

[0;34m==== Test: Metrics Tracking ====[0m
‚ÑπÔ∏è Testing Value Store metrics...
Starting to run 'set' operations continuously...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin ops
Operations Per Second:
  System:       0.00
  Value Store:  38.00
  Cache:        0.00
  Events:       0.00
  Subscribers:  0.00
  Blobs:        0.00
Stopped VS operations.
‚úÖ [0;32mSUCCESS: Get metrics during sustained VS operations (and output contains 'Operations Per Second:')[0m
‚ÑπÔ∏è Detected Value Store Ops/sec: 38.00
‚úÖ [0;32mSUCCESS: Value Store ops/sec (38.00) is greater than 0.1 after operations.[0m
‚ÑπÔ∏è Testing Cache Store metrics...
Starting to run 'cache set' operations continuously...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin ops
Operations Per Second:
  System:       0.00
  Value Store:  0.00
  Cache:        36.96
  Events:       0.00
  Subscribers:  0.00
  Blobs:        0.00
Stopped Cache operations.
‚úÖ [0;32mSUCCESS: Get metrics during sustained Cache operations (and output contains 'Operations Per Second:')[0m
‚ÑπÔ∏è Detected Cache Ops/sec: 36.96
‚úÖ [0;32mSUCCESS: Cache ops/sec (36.96) is greater than 0.1 after operations.[0m

[0;34m==== Test: Event and Subscriber Metrics Tracking ====[0m
‚ÑπÔ∏è Testing Subscribers metric...
Starting to run 'subscribe' operations continuously...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin ops
Operations Per Second:
  System:       0.00
  Value Store:  0.00
  Cache:        0.00
  Events:       0.00
  Subscribers:  5.00
  Blobs:        0.00
Stopped subscriber load process.
‚úÖ [0;32mSUCCESS: Get metrics during sustained subscribe operations (and output contains 'Operations Per Second:')[0m
‚ÑπÔ∏è Detected Subscribers Ops/sec: 5.00
‚úÖ [0;32mSUCCESS: Subscribers ops/sec (5.00) is greater than 0.1 after subscribing.[0m
‚ÑπÔ∏è Testing Events metric...
Starting to run 'publish' operations continuously...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml admin ops
Operations Per Second:
  System:       0.00
  Value Store:  0.00
  Cache:        0.00
  Events:       34.00
  Subscribers:  0.00
  Blobs:        0.00
Stopped publish operations.
‚úÖ [0;32mSUCCESS: Get metrics during sustained publish operations (and output contains 'Operations Per Second:')[0m
‚ÑπÔ∏è Detected Events Ops/sec: 34.00
‚úÖ [0;32mSUCCESS: Events ops/sec (34.00) is greater than 0.1 during publishing.[0m

[0;32mAll TKV Metrics operations tests completed.[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 13
[0;32mAll Metrics tests passed successfully![0m
‚úÖ Success: metrics.sh completed.
üöÄ Running api-keys.sh...
insid pid: 2207946
2025-07-23T17:22:24.838-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:22:24.838-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-07-23T17:22:24.838-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:22:24.838-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-07-23T17:22:24.857-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:22:24.857-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-07-23T17:22:26.079-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-07-23T17:22:26.079-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-07-23T17:22:26.079-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-07-23T17:22:26.088-0400 [INFO]  election won: term=2 tally=1
2025-07-23T17:22:26.088-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-07-23T17:22:26.720-0400 [WARN]  no known peers, aborting election
2025-07-23T17:22:26.858-0400 [WARN]  no known peers, aborting election
2025-07-23T17:22:34.846-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-07-23T17:22:34.851-0400 [INFO]  added peer, starting replication: peer=node1
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-07-23T17:22:34.855-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
2025-07-23T17:22:34.855-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-07-23T17:22:34.858-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
set root tracker key internal:api_key_memory_usage: value 0
2025-07-23T17:22:34.864-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-07-23T17:22:34.873-0400 [INFO]  added peer, starting replication: peer=node2
set root tracker key internal:api_key_disk_usage: value 0
2025-07-23T17:22:34.878-0400 [WARN]  failed to get previous log: previous-index=6 last-index=0 error="log not found"
2025-07-23T17:22:34.878-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-07-23T17:22:34.892-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
‚ÑπÔ∏è Using insic executable: /tmp/insi-test-cluster/insic
‚ÑπÔ∏è Using config: /tmp/insi-test-cluster/cluster.yaml

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚ÑπÔ∏è Attempting to ping server... (will retry up to 15 times)
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml ping
Ping Response:
  entity: root
  leader: 127.0.0.1:2222
  node-badge-id: a39d1e51-e7b0-4d48-8f60-6229e75ef57b
  status: ok
  uptime: 14.936001933s
‚úÖ Server is responsive.
‚úÖ [0;32mSUCCESS: Server Ping (and output contains 'Ping Response:')[0m
‚ÑπÔ∏è Starting TKV API Key operations tests...

[0;34m==== Test: API Key Lifecycle (Add, Verify, Delete) ====[0m
‚ÑπÔ∏è Attempting to add API key: testapikey_1753305759_2208042
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add testapikey_1753305759_2208042
time=2025-07-23T17:22:39.907-04:00 level=INFO msg="API key created successfully" key_name=testapikey_1753305759_2208042 key="insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4="
API Key Name: testapikey_1753305759_2208042
API Key:      insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=
OK
‚úÖ [0;32mSUCCESS: API add key 'testapikey_1753305759_2208042' (and output contains 'API Key:')[0m
‚ÑπÔ∏è Parsed generated key: insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=
‚ÑπÔ∏è Attempting to verify newly created API key: insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api verify insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=
time=2025-07-23T17:22:44.945-04:00 level=INFO msg="No target node specified for verify, using DefaultLeader" node_id=node0
time=2025-07-23T17:22:44.945-04:00 level=INFO msg="Attempting to verify API key with a ping..." target_node=node0
time=2025-07-23T17:22:44.953-04:00 level=INFO msg="API key verification successful: Ping responded" key_value="insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=" response="map[entity:testapikey_1753305759_2208042 leader:127.0.0.1:2222 node-badge-id:a39d1e51-e7b0-4d48-8f60-6229e75ef57b status:ok uptime:20.101729636s]"
API Key Verified Successfully!
Ping Response:
  entity: testapikey_1753305759_2208042
  leader: 127.0.0.1:2222
  node-badge-id: a39d1e51-e7b0-4d48-8f60-6229e75ef57b
  status: ok
  uptime: 20.101729636s
‚úÖ [0;32mSUCCESS: API verify for new key 'insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=' (and output contains 'API Key Verified Successfully!')[0m
‚ÑπÔ∏è Attempting to delete API key: insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=
time=2025-07-23T17:22:44.974-04:00 level=INFO msg="API key deleted successfully" key_value="insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4="
OK
‚úÖ [0;32mSUCCESS: API delete for key 'insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=' (and output contains 'OK')[0m
‚ÑπÔ∏è Attempting to verify deleted API key: insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api verify insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=
time=2025-07-23T17:22:56.996-04:00 level=INFO msg="No target node specified for verify, using DefaultLeader" node_id=node0
time=2025-07-23T17:22:56.996-04:00 level=INFO msg="Attempting to verify API key with a ping..." target_node=node0
time=2025-07-23T17:22:57.003-04:00 level=WARN msg="Received non-2xx status code" verify_client.insi_client.method=GET verify_client.insi_client.url=https://localhost:8443/db/api/v1/ping verify_client.insi_client.status_code=401
time=2025-07-23T17:22:57.003-04:00 level=ERROR msg="API key verification failed: Ping request failed" key_value="insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=" error="server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key."
Error: API key verification failed. Ping error: server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key.
Verification FAILED
‚úÖ [0;32mSUCCESS (Received Expected Error): API verify for deleted key 'insi_YgdheN7+vIbbf9LtgcVt6xb0ewjmgHRY/FoTifKi9Lb1dBit/vcTcXj2Cfeb17IXF4NA7f39RDVUYrghhewB7t+YQUBTcQ240IXHq/P6DUFGd5I3G6/kC/xSOb6T0AnzdmdS04/DVUnkhAw49VZ5pudqnK4=' (and output contains 'Verification FAILED')[0m
‚ÑπÔ∏è Attempting to verify random invalid API key: invalidkey_1753305777_2208042_random
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api verify invalidkey_1753305777_2208042_random
time=2025-07-23T17:22:57.021-04:00 level=INFO msg="No target node specified for verify, using DefaultLeader" node_id=node0
time=2025-07-23T17:22:57.021-04:00 level=INFO msg="Attempting to verify API key with a ping..." target_node=node0
time=2025-07-23T17:22:57.028-04:00 level=WARN msg="Received non-2xx status code" verify_client.insi_client.method=GET verify_client.insi_client.url=https://localhost:8443/db/api/v1/ping verify_client.insi_client.status_code=401
time=2025-07-23T17:22:57.028-04:00 level=ERROR msg="API key verification failed: Ping request failed" key_value=invalidkey_1753305777_2208042_random error="server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key."
Error: API key verification failed. Ping error: server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key.
Verification FAILED
‚úÖ [0;32mSUCCESS (Received Expected Error): API verify for random key 'invalidkey_1753305777_2208042_random' (and output contains 'Verification FAILED')[0m
‚ÑπÔ∏è Attempting to delete random invalid API key: invalidkey_1753305777_2208042_random
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete invalidkey_1753305777_2208042_random
time=2025-07-23T17:22:57.054-04:00 level=WARN msg="Received non-2xx status code" client.insi_client.method=POST client.insi_client.url=https://localhost:8446/db/api/v1/admin/api/delete client.insi_client.status_code=500
time=2025-07-23T17:22:57.054-04:00 level=ERROR msg="API key deletion failed" key_value=invalidkey_1753305777_2208042_random error="server returned status 500 for POST https://localhost:8446/db/api/v1/admin/api/delete: Internal Server Error"
Error: server returned status 500 for POST https://localhost:8446/db/api/v1/admin/api/delete: Internal Server Error
‚úÖ [0;32mSUCCESS (Received Expected Error): API delete for non-existent key 'invalidkey_1753305777_2208042_random' (and output contains 'Error')[0m

[0;34m==== Test: Admin Privileges (requires --root) ====[0m
‚ÑπÔ∏è Attempting to add an API key without --root (should fail)
‚ÑπÔ∏è Running (no root, with dummy key): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api add test_privileges_key_1753305777_2208042
time=2025-07-23T17:22:57.085-04:00 level=ERROR msg="api add requires the --root flag to be set."
Error: api add requires --root flag.
‚úÖ [0;32mSUCCESS (Received Expected Error): API add without --root (and output contains 'requires --root flag')[0m
‚ÑπÔ∏è Adding a key with --root to test deletion
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add test_privileges_key_1753305777_2208042
time=2025-07-23T17:22:57.201-04:00 level=INFO msg="API key created successfully" key_name=test_privileges_key_1753305777_2208042 key="insi_ZkwXZAAqVkLYFa3zlj2PJHB2cABXoxee6ty5yOl7p1q8AgEhKw+l9pAX/xSPH1j/3JWpXajuB3QqbSF4ASvh8a7MwD+79Uk+HZjL4xtHPjB+4Cv5hShCl3D2wTVgCyg/F2k1daN/ZZ0c20t6w4dOaglth9I="
API Key Name: test_privileges_key_1753305777_2208042
API Key:      insi_ZkwXZAAqVkLYFa3zlj2PJHB2cABXoxee6ty5yOl7p1q8AgEhKw+l9pAX/xSPH1j/3JWpXajuB3QqbSF4ASvh8a7MwD+79Uk+HZjL4xtHPjB+4Cv5hShCl3D2wTVgCyg/F2k1daN/ZZ0c20t6w4dOaglth9I=
OK
‚úÖ [0;32mSUCCESS: Created temporary key for delete test: insi_ZkwXZAAqVkLYFa3zlj2PJHB2cABXoxee6ty5yOl7p1q8AgEhKw+l9pAX/xSPH1j/3JWpXajuB3QqbSF4ASvh8a7MwD+79Uk+HZjL4xtHPjB+4Cv5hShCl3D2wTVgCyg/F2k1daN/ZZ0c20t6w4dOaglth9I=[0m
‚ÑπÔ∏è Attempting to delete an API key without --root (should fail)
‚ÑπÔ∏è Running (no root, with dummy key): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api delete insi_ZkwXZAAqVkLYFa3zlj2PJHB2cABXoxee6ty5yOl7p1q8AgEhKw+l9pAX/xSPH1j/3JWpXajuB3QqbSF4ASvh8a7MwD+79Uk+HZjL4xtHPjB+4Cv5hShCl3D2wTVgCyg/F2k1daN/ZZ0c20t6w4dOaglth9I=
time=2025-07-23T17:23:02.237-04:00 level=ERROR msg="api delete requires the --root flag to be set."
Error: api delete requires --root flag.
‚úÖ [0;32mSUCCESS (Received Expected Error): API delete without --root (and output contains 'requires --root flag')[0m
‚ÑπÔ∏è Cleaning up key with --root
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_ZkwXZAAqVkLYFa3zlj2PJHB2cABXoxee6ty5yOl7p1q8AgEhKw+l9pAX/xSPH1j/3JWpXajuB3QqbSF4ASvh8a7MwD+79Uk+HZjL4xtHPjB+4Cv5hShCl3D2wTVgCyg/F2k1daN/ZZ0c20t6w4dOaglth9I=
time=2025-07-23T17:23:02.258-04:00 level=INFO msg="API key deleted successfully" key_value="insi_ZkwXZAAqVkLYFa3zlj2PJHB2cABXoxee6ty5yOl7p1q8AgEhKw+l9pAX/xSPH1j/3JWpXajuB3QqbSF4ASvh8a7MwD+79Uk+HZjL4xtHPjB+4Cv5hShCl3D2wTVgCyg/F2k1daN/ZZ0c20t6w4dOaglth9I="
OK
‚úÖ [0;32mSUCCESS: API delete with --root (cleanup) (and output contains 'OK')[0m

[0;34m==== Test: API Key Limits (Get, Set) ====[0m
‚ÑπÔ∏è Attempting to add API key for limits test: testlimitskey_1753305782_2208042
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add testlimitskey_1753305782_2208042
time=2025-07-23T17:23:02.391-04:00 level=INFO msg="API key created successfully" key_name=testlimitskey_1753305782_2208042 key="insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms="
API Key Name: testlimitskey_1753305782_2208042
API Key:      insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms=
OK
‚úÖ [0;32mSUCCESS: API add key 'testlimitskey_1753305782_2208042' for limits test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Parsed generated key for limits test: insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms=
‚ÑπÔ∏è Attempting to get initial limits for key: insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms=
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     1073741824
  Bytes in Memory:   262144000
  Events per Second: 1000
  Subscribers:       100
  RPS Data Limit:    25
  RPS Event Limit:   10

Current Usage (for current key):
  Bytes on Disk:     0
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Get initial limits for new key (and output contains 'Maximum Limits')[0m
‚úÖ [0;32mSUCCESS: Check initial current usage is zero (and output contains 'Bytes on Disk:     0')[0m
‚ÑπÔ∏è Attempting to set limits for key: insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms=
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api set-limits insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms= --disk 123456789 --mem 987654321 --events 500 --subs 50 --rps-data 10000 --rps-event 10000
OK
‚úÖ [0;32mSUCCESS: Set new limits for key 'insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms=' (and output contains 'OK')[0m
‚ÑπÔ∏è Attempting to get updated limits for key: insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms=
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits
Maximum Limits (for current key):
  Bytes on Disk:     123456789
  Bytes in Memory:   987654321
  Events per Second: 500
  Subscribers:       50
  RPS Data Limit:    10000
  RPS Event Limit:   10000

Current Usage (for current key):
  Bytes on Disk:     0
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Get updated limits for key 'insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms=' (and output contains 'Maximum Limits')[0m
‚úÖ [0;32mSUCCESS: Verify updated disk limit (and output contains 'Bytes on Disk:     123456789')[0m
‚úÖ [0;32mSUCCESS: Verify updated memory limit (and output contains 'Bytes in Memory:   987654321')[0m
‚úÖ [0;32mSUCCESS: Verify updated events limit (and output contains 'Events per Second: 500')[0m
‚úÖ [0;32mSUCCESS: Verify updated subscribers limit (and output contains 'Subscribers:       50')[0m
‚úÖ [0;32mSUCCESS: Verify updated rps data limit (and output contains 'RPS Data Limit:    10000')[0m
‚úÖ [0;32mSUCCESS: Verify updated rps event limit (and output contains 'RPS Event Limit:   10000')[0m
‚ÑπÔ∏è Attempting to delete API key used for limits test: insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms=
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms=
time=2025-07-23T17:23:12.541-04:00 level=INFO msg="API key deleted successfully" key_value="insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms="
OK
‚úÖ [0;32mSUCCESS: API delete for key 'insi_jZShIPx2xc+/nIRKH8XH7LL3YUeDvaZREA7xRzSph4ftaSP8IbGqJ50aop9v61qbu9a7E29lokl+KrMUZ/rKzUrp+mo1InzxFs+4GAjRHkOSgU1se3n1owBEk5k92jt7M66f5e0C2jJA6OpI8uPbWD+V9Ms=' after limits test (and output contains 'OK')[0m

[0;34m==== Test: API Get Another Key's Limits (as root) ====[0m
‚ÑπÔ∏è Attempting to add API key for get-limits test: testgetlimits_1753305792_2208042
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add testgetlimits_1753305792_2208042
time=2025-07-23T17:23:12.666-04:00 level=INFO msg="API key created successfully" key_name=testgetlimits_1753305792_2208042 key="insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs="
API Key Name: testgetlimits_1753305792_2208042
API Key:      insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=
OK
‚úÖ [0;32mSUCCESS: API add key 'testgetlimits_1753305792_2208042' for get-limits test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Parsed generated key for get-limits test: insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=
‚ÑπÔ∏è Attempting to set limits for key: insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api set-limits insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs= --disk 555666777 --mem 111222333 --events 250 --subs 25 --rps-data 10000 --rps-event 10000
OK
‚úÖ [0;32mSUCCESS: Set new limits for key 'insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=' (and output contains 'OK')[0m
‚ÑπÔ∏è Attempting to get specific limits for key 'insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=' using root
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api limits insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=
Limits for key insi_JrN...dzs=
Maximum Limits:
  Bytes on Disk:     555666777
  Bytes in Memory:   111222333
  Events per Second: 250
  Subscribers:       25
  RPS Data Limit:    10000
  RPS Event Limit:   10000

Current Usage:
  Bytes on Disk:     0
  Bytes in Memory:   0
  Events per Second: 0
  Subscribers:       0
‚úÖ [0;32mSUCCESS: Get specific limits for key 'insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=' (and output contains 'Maximum Limits')[0m
‚úÖ [0;32mSUCCESS: Verify specific disk limit (and output contains 'Bytes on Disk:     555666777')[0m
‚úÖ [0;32mSUCCESS: Verify specific memory limit (and output contains 'Bytes in Memory:   111222333')[0m
‚úÖ [0;32mSUCCESS: Verify specific events limit (and output contains 'Events per Second: 250')[0m
‚úÖ [0;32mSUCCESS: Verify specific subscribers limit (and output contains 'Subscribers:       25')[0m
‚úÖ [0;32mSUCCESS: Verify specific rps data limit (and output contains 'RPS Data Limit:    10000')[0m
‚úÖ [0;32mSUCCESS: Verify specific rps event limit (and output contains 'RPS Event Limit:   10000')[0m
‚ÑπÔ∏è Attempting to get specific limits for key 'insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=' WITHOUT root
‚ÑπÔ∏è Running (no root, with dummy key): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml api limits insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=
time=2025-07-23T17:23:22.790-04:00 level=ERROR msg="api limits <key_value> requires the --root flag to be set."
Error: api limits <key_value> requires --root flag.
‚úÖ [0;32mSUCCESS (Received Expected Error): Get specific limits without root (and output contains 'requires --root flag')[0m
‚ÑπÔ∏è Attempting to delete API key used for get-limits test: insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=
time=2025-07-23T17:23:22.813-04:00 level=INFO msg="API key deleted successfully" key_value="insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs="
OK
‚úÖ [0;32mSUCCESS: API delete for key 'insi_JrNE2UrqkiUCq1u9rSrPX4Y9ePhNNx1iSha86nXF3L7chi1y40FadGm5W4kz/6fyVF1x6C4dEoixOH9W73+TPzfztWf3Rh2ZcABb5/yuPMY8KDHK/Y33LMi1wGACaQxqHrqQgYTICnlMqNrqMEIbem4wdzs=' after get-limits test (and output contains 'OK')[0m

[0;34m==== Test: API Key Aliases (Add, List, Use, Delete, Data Scope, Chaining) ====[0m
‚ÑπÔ∏è Creating primary key 'primary_for_alias_1753305802_2208042' for alias test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add primary_for_alias_1753305802_2208042
time=2025-07-23T17:23:22.943-04:00 level=INFO msg="API key created successfully" key_name=primary_for_alias_1753305802_2208042 key="insi_VNIiMh6/EFW8rVgPd98HOa5ZNtUuuwL1WDFLvAHv4cv+QNlXHuV9V85HDfP182dwuJlg+vy7xsNO0K4ImDNxYV2A8wN8tSBDyLfAa7DF5keNuuqDFcSwRWqEPg5IOchs410YHychJGQeRd5Ip7bdghDjOMY="
API Key Name: primary_for_alias_1753305802_2208042
API Key:      insi_VNIiMh6/EFW8rVgPd98HOa5ZNtUuuwL1WDFLvAHv4cv+QNlXHuV9V85HDfP182dwuJlg+vy7xsNO0K4ImDNxYV2A8wN8tSBDyLfAa7DF5keNuuqDFcSwRWqEPg5IOchs410YHychJGQeRd5Ip7bdghDjOMY=
OK
‚úÖ [0;32mSUCCESS: Create primary key for alias test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Parsed primary key: insi_VNIiMh6/EFW8rVgPd98HOa5ZNtUuuwL1WDFLvAHv4cv+QNlXHuV9V85HDfP182dwuJlg+vy7xsNO0K4ImDNxYV2A8wN8tSBDyLfAa7DF5keNuuqDFcSwRWqEPg5IOchs410YHychJGQeRd5Ip7bdghDjOMY=
‚ÑπÔ∏è Setting a value with the primary key 'insi_VNIiMh6/EFW8rVgPd98HOa5ZNtUuuwL1WDFLvAHv4cv+QNlXHuV9V85HDfP182dwuJlg+vy7xsNO0K4ImDNxYV2A8wN8tSBDyLfAa7DF5keNuuqDFcSwRWqEPg5IOchs410YHychJGQeRd5Ip7bdghDjOMY=' to test data scope inheritance
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-test-key alias-test-value
OK
‚úÖ [0;32mSUCCESS: Set value with primary key (and output contains 'OK')[0m
‚ÑπÔ∏è Creating first alias for key insi_VNIiMh6/EFW8rVgPd98HOa5ZNtUuuwL1WDFLvAHv4cv+QNlXHuV9V85HDfP182dwuJlg+vy7xsNO0K4ImDNxYV2A8wN8tSBDyLfAa7DF5keNuuqDFcSwRWqEPg5IOchs410YHychJGQeRd5Ip7bdghDjOMY=
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw
OK
‚úÖ [0;32mSUCCESS: Create first alias (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Parsed alias 1 key: insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw
‚ÑπÔ∏è Getting value with the alias key 'insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw' to test data scope
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml get alias-test-key
alias-test-value
‚úÖ [0;32mSUCCESS: Get value with alias key (and output contains 'alias-test-value')[0m
‚ÑπÔ∏è Attempting to create an alias from another alias (should fail)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
time=2025-07-23T17:23:28.101-04:00 level=ERROR msg="Alias creation failed" error="server returned status 400 Bad Request: Cannot create an alias from an alias key
"
Error: server returned status 400 Bad Request: Cannot create an alias from an alias key
‚úÖ [0;32mSUCCESS (Received Expected Error): Create alias from alias key (and output contains 'Cannot create an alias from an alias key')[0m
‚ÑπÔ∏è Setting a value with the alias key 'insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw' to test limit inheritance
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set alias-write-test this-should-work
OK
‚úÖ [0;32mSUCCESS: Set value with alias key (and output contains 'OK')[0m
‚ÑπÔ∏è Getting value set by alias using the primary key 'insi_VNIiMh6/EFW8rVgPd98HOa5ZNtUuuwL1WDFLvAHv4cv+QNlXHuV9V85HDfP182dwuJlg+vy7xsNO0K4ImDNxYV2A8wN8tSBDyLfAa7DF5keNuuqDFcSwRWqEPg5IOchs410YHychJGQeRd5Ip7bdghDjOMY='
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml get alias-write-test
this-should-work
‚úÖ [0;32mSUCCESS: Get value (set by alias) with primary key (and output contains 'this-should-work')[0m
‚ÑπÔ∏è Creating second alias for key insi_VNIiMh6/EFW8rVgPd98HOa5ZNtUuuwL1WDFLvAHv4cv+QNlXHuV9V85HDfP182dwuJlg+vy7xsNO0K4ImDNxYV2A8wN8tSBDyLfAa7DF5keNuuqDFcSwRWqEPg5IOchs410YHychJGQeRd5Ip7bdghDjOMY=
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_W9aOMTeF+TKU1I6ppAEJOM/R3cG0ou/K6JHJnsS4e/nhjjB4KH2VQn1ykRQX19o7XtqL+JGXhr1BL6vJUY1ikfnYM/mpxqQ4CiWCcPnKL8I+feGepJrBWBUgQDGBKqdJgN3S4wy680rK8/ByiLa6A0lAKCpfDiG57qf4cv6hhE0QiWMj
OK
‚úÖ [0;32mSUCCESS: Create second alias (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Parsed alias 2 key: insi_W9aOMTeF+TKU1I6ppAEJOM/R3cG0ou/K6JHJnsS4e/nhjjB4KH2VQn1ykRQX19o7XtqL+JGXhr1BL6vJUY1ikfnYM/mpxqQ4CiWCcPnKL8I+feGepJrBWBUgQDGBKqdJgN3S4wy680rK8/ByiLa6A0lAKCpfDiG57qf4cv6hhE0QiWMj
‚ÑπÔ∏è Listing aliases for primary key insi_VNIiMh6/EFW8rVgPd98HOa5ZNtUuuwL1WDFLvAHv4cv+QNlXHuV9V85HDfP182dwuJlg+vy7xsNO0K4ImDNxYV2A8wN8tSBDyLfAa7DF5keNuuqDFcSwRWqEPg5IOchs410YHychJGQeRd5Ip7bdghDjOMY=
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias list
Aliases:
  - insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw
  - insi_W9aOMTeF+TKU1I6ppAEJOM/R3cG0ou/K6JHJnsS4e/nhjjB4KH2VQn1ykRQX19o7XtqL+JGXhr1BL6vJUY1ikfnYM/mpxqQ4CiWCcPnKL8I+feGepJrBWBUgQDGBKqdJgN3S4wy680rK8/ByiLa6A0lAKCpfDiG57qf4cv6hhE0QiWMj
‚úÖ [0;32mSUCCESS: List aliases (and output contains 'insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw')[0m
‚úÖ [0;32mSUCCESS: Check for second alias in list (and output contains 'insi_W9aOMTeF+TKU1I6ppAEJOM/R3cG0ou/K6JHJnsS4e/nhjjB4KH2VQn1ykRQX19o7XtqL+JGXhr1BL6vJUY1ikfnYM/mpxqQ4CiWCcPnKL8I+feGepJrBWBUgQDGBKqdJgN3S4wy680rK8/ByiLa6A0lAKCpfDiG57qf4cv6hhE0QiWMj')[0m
‚ÑπÔ∏è Verifying first alias key via ping: insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml ping
Ping Response:
  entity: alias_for_primary_for_alias_1753305802_2208042
  leader: 127.0.0.1:2222
  node-badge-id: a39d1e51-e7b0-4d48-8f60-6229e75ef57b
  status: ok
  uptime: 1m8.393474387s
‚úÖ [0;32mSUCCESS: Ping with first alias (and output contains 'Ping Response:')[0m
‚ÑπÔ∏è Verifying second alias key via ping: insi_W9aOMTeF+TKU1I6ppAEJOM/R3cG0ou/K6JHJnsS4e/nhjjB4KH2VQn1ykRQX19o7XtqL+JGXhr1BL6vJUY1ikfnYM/mpxqQ4CiWCcPnKL8I+feGepJrBWBUgQDGBKqdJgN3S4wy680rK8/ByiLa6A0lAKCpfDiG57qf4cv6hhE0QiWMj
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml ping
Ping Response:
  leader: 127.0.0.1:2222
  node-badge-id: a39d1e51-e7b0-4d48-8f60-6229e75ef57b
  status: ok
  uptime: 1m8.422848446s
  entity: alias_for_primary_for_alias_1753305802_2208042
‚úÖ [0;32mSUCCESS: Ping with second alias (and output contains 'Ping Response:')[0m
‚ÑπÔ∏è Deleting first alias key: insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias delete insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw
OK
‚úÖ [0;32mSUCCESS: Delete first alias (and output contains 'OK')[0m
‚ÑπÔ∏è Verifying that deleted alias is invalid: insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api verify insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw
time=2025-07-23T17:23:45.347-04:00 level=INFO msg="No target node specified for verify, using DefaultLeader" node_id=node0
time=2025-07-23T17:23:45.347-04:00 level=INFO msg="Attempting to verify API key with a ping..." target_node=node0
time=2025-07-23T17:23:45.352-04:00 level=WARN msg="Received non-2xx status code" verify_client.insi_client.method=GET verify_client.insi_client.url=https://localhost:8443/db/api/v1/ping verify_client.insi_client.status_code=401
time=2025-07-23T17:23:45.352-04:00 level=ERROR msg="API key verification failed: Ping request failed" key_value=insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw error="server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key."
Error: API key verification failed. Ping error: server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key.
Verification FAILED
‚úÖ [0;32mSUCCESS (Received Expected Error): Verify deleted alias (and output contains 'Verification FAILED')[0m
‚ÑπÔ∏è Verifying the second alias is the only one remaining in the list
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias list
Aliases:
  - insi_W9aOMTeF+TKU1I6ppAEJOM/R3cG0ou/K6JHJnsS4e/nhjjB4KH2VQn1ykRQX19o7XtqL+JGXhr1BL6vJUY1ikfnYM/mpxqQ4CiWCcPnKL8I+feGepJrBWBUgQDGBKqdJgN3S4wy680rK8/ByiLa6A0lAKCpfDiG57qf4cv6hhE0QiWMj
‚úÖ [0;32mSUCCESS: List aliases after delete (and output contains 'insi_W9aOMTeF+TKU1I6ppAEJOM/R3cG0ou/K6JHJnsS4e/nhjjB4KH2VQn1ykRQX19o7XtqL+JGXhr1BL6vJUY1ikfnYM/mpxqQ4CiWCcPnKL8I+feGepJrBWBUgQDGBKqdJgN3S4wy680rK8/ByiLa6A0lAKCpfDiG57qf4cv6hhE0QiWMj')[0m
‚úÖ [0;32mSUCCESS: Deleted alias 'insi_N8WO3sHkcgz7Equm5+BJIYHZohLV8B/1/A8+1ZMGSW5wWjZ2e3hDLB+u0varUmZQDQ4xehsQdmTL74MLsrxIdwvEVEHMwiETNh1A8JnjvKbj/eJxNFXDk2lZGC3nlAaxtmqYI3OT/z9aRoVGdQc+IhYMXFfGncZ3ubm8/a7ifnbA0lgw' was not found in list after deletion.[0m
‚ÑπÔ∏è Verifying second alias still works after deleting first: insi_W9aOMTeF+TKU1I6ppAEJOM/R3cG0ou/K6JHJnsS4e/nhjjB4KH2VQn1ykRQX19o7XtqL+JGXhr1BL6vJUY1ikfnYM/mpxqQ4CiWCcPnKL8I+feGepJrBWBUgQDGBKqdJgN3S4wy680rK8/ByiLa6A0lAKCpfDiG57qf4cv6hhE0QiWMj
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml ping
Ping Response:
  uptime: 1m20.54100389s
  entity: alias_for_primary_for_alias_1753305802_2208042
  leader: 127.0.0.1:2222
  node-badge-id: a39d1e51-e7b0-4d48-8f60-6229e75ef57b
  status: ok
‚úÖ [0;32mSUCCESS: Ping with second alias after deleting first (and output contains 'Ping Response:')[0m
‚ÑπÔ∏è Cleanup: Deleting primary key insi_VNIiMh6/EFW8rVgPd98HOa5ZNtUuuwL1WDFLvAHv4cv+QNlXHuV9V85HDfP182dwuJlg+vy7xsNO0K4ImDNxYV2A8wN8tSBDyLfAa7DF5keNuuqDFcSwRWqEPg5IOchs410YHychJGQeRd5Ip7bdghDjOMY=
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_VNIiMh6/EFW8rVgPd98HOa5ZNtUuuwL1WDFLvAHv4cv+QNlXHuV9V85HDfP182dwuJlg+vy7xsNO0K4ImDNxYV2A8wN8tSBDyLfAa7DF5keNuuqDFcSwRWqEPg5IOchs410YHychJGQeRd5Ip7bdghDjOMY=
time=2025-07-23T17:23:45.430-04:00 level=INFO msg="API key deleted successfully" key_value="insi_VNIiMh6/EFW8rVgPd98HOa5ZNtUuuwL1WDFLvAHv4cv+QNlXHuV9V85HDfP182dwuJlg+vy7xsNO0K4ImDNxYV2A8wN8tSBDyLfAa7DF5keNuuqDFcSwRWqEPg5IOchs410YHychJGQeRd5Ip7bdghDjOMY="
OK
‚úÖ [0;32mSUCCESS: Delete primary key for cleanup (and output contains 'OK')[0m

[0;34m==== Test: API Key Alias Limit (Max 16) ====[0m
‚ÑπÔ∏è Creating primary key 'primary_for_alias_limit_1753305825_2208042' for alias limit test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add primary_for_alias_limit_1753305825_2208042
time=2025-07-23T17:23:45.566-04:00 level=INFO msg="API key created successfully" key_name=primary_for_alias_limit_1753305825_2208042 key="insi_Yzsf340P8LVi51mo+vtMWwVAZyh6r7KNnqYefEQ8cPk1Ae6PweauX11qxbYBQjuj5pGx5pqHbVWhWBrhLavi/unZfQmGq2phzKxCq6SwtELIH3cyl2NJgMHy1Zl3Pkp0mHJM84pUTQWYRG9y4xl47XTygdY="
API Key Name: primary_for_alias_limit_1753305825_2208042
API Key:      insi_Yzsf340P8LVi51mo+vtMWwVAZyh6r7KNnqYefEQ8cPk1Ae6PweauX11qxbYBQjuj5pGx5pqHbVWhWBrhLavi/unZfQmGq2phzKxCq6SwtELIH3cyl2NJgMHy1Zl3Pkp0mHJM84pUTQWYRG9y4xl47XTygdY=
OK
‚úÖ [0;32mSUCCESS: Create primary key for alias limit test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Creating 16 aliases (should succeed)
‚ÑπÔ∏è Creating alias #1...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_wm5BYQLVTcLKJTq1v7WuJoxOHQw+yF6vbK4xBz6ikJfftGSYzWtf1OAe6w0clkyV3OfX7JfuS3Q1IWotILx+MCGaKdwGxsSNvR4YehDVtiXozqlYURnxCmRsqN0v79er6gWSQEzJ2w4U3jMz9XqYRweH9iK4BPr9k4XJOBmFiJJlsLA2
OK
‚úÖ [0;32mSUCCESS: Create alias #1 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #2...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_5pZrOqBDvGFst3EqJN4ulMvj7j54E60n0FZ+7yLrTO/wsN4vOYnpqa+vuD0nDSV+a2nbE41GOXIAV7Imzp5TYKaYy/ZZwgn19koLCfDeaiKsvDjm9co4se2QH8mQ/vfPXxI+q35x4lChuthoZQOpvZOaeoxIIqcuctZTO8Cb4NE4zHeb
OK
‚úÖ [0;32mSUCCESS: Create alias #2 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #3...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_dIFV3aF90I3fr7QKu2fAksI0OAylRSUPY/jmj+TotRVmVUTA3LRxKBvn2EUbZfni3WKr02BRDYjegORlpofwYttOPyrz4bsmSTqVyqNpD1D5xVjx6Ho0skeavGNT53dRWoA9fRdld+3D6gqIrQND1ckFjMyFe20vHkbdhlEeKr2GhAZW
OK
‚úÖ [0;32mSUCCESS: Create alias #3 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #4...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_dJ5+bsyzUlu+jKyKCepf9IYfsvEEDL/bDtpyCb8eAm/yKXlLVUWXm/VMzHHWLGgh5A6/TaJwETILgpWnqtW+D9pm21OgpBq05DlgDObOrbLsfkiHB0QFiU9pn/ZQToC6pswVLvCcUhXpSxyLp3CJLATx7pUrbqqTnlMl0GMw2dCVuTjz
OK
‚úÖ [0;32mSUCCESS: Create alias #4 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #5...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_kBRFg9qPrdAOq6PR+aCclwGSYi7NhzUWzGzbBYJvEW9nCmeZFAdHzVDsYnErLaJCE7qT0lbPthu0sjZ0j+tgjHQfpGnn+4woOPJjeuQvw3wbcIH5Naum/iSjNTdrHcT6oSyMwgFI1xlAMhFG3pfWyzQZfCrAMfr8scQU1YEcqj98rT02
OK
‚úÖ [0;32mSUCCESS: Create alias #5 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #6...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_SUBsvZkgnsb6K1C7rQDRdyEB6laZqvtYV3jSt0n+TsTRpDH8rM3vprhbFFDW7EKy4qujj0twRd6KSAqpaMJVFHvdQs/fzrNzJ4p1cY5o4hpuTvf39UXzJrW3q9eAXamS083QkkOyAEm1Q8ibdykWMeU/gLE7KVzL14LqTZdzwffrCSq5
OK
‚úÖ [0;32mSUCCESS: Create alias #6 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #7...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_Ozw6kXR/iA3P0sOaCoFiMkYiz/5Es86WAgu+4bCtfJCJTalIMx13Et6ONgqtue3qEHLa4DYqNtQzN03s1/83kixKmuoMK27x808h7DYOawe1h/fmHPwwjTtZw2/hqVjZpWEaWZDu7DUeqBrKzHzkjdpzBEIhBerOJ7MAli0kcERaMRtR
OK
‚úÖ [0;32mSUCCESS: Create alias #7 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #8...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_cBH70jY/N0JR73JmSiEipe8CT0JRAwmgngNLEs6DKhS4rfBfFCYaGdUgg1Wke3X3yhY5nL91LAGfuKl3YYUrRZH0JYzZqFAifeCJcTAAtg28RzCIKxiu4elnJjUVPh1UgK36Dr24ruOQeyg2/GI56GDu0hvSvmU0eV9md7szWMmNKD83
OK
‚úÖ [0;32mSUCCESS: Create alias #8 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #9...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_Hu1L0rlx5Bv9LyAB45E3cNVjWKABPa3ee5Vd3q3hLRdmSOJ4ki/cnaTy2+ejELuLPFxaqjxI7Gi2fnvmmJ49+Z9UBW6THVIQOumyCf82ogbJlyx6tMY0+oKdozp0D9Y41+kzgdF5AIPjTKiUp9oKzwUstAqeOS60AqWARzs4c7G0OBJm
OK
‚úÖ [0;32mSUCCESS: Create alias #9 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #10...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_S1S+FoD14zq0JvM1Nf2aUy+lBr6mujFlbUJLl7hGREsIKDAfC7HbnS7VmJn5WKGxkBBA4mVt+BnNhFY8/+D2J5hI6lHY6CpkycdU3DR96LpGfmtnkrs1z/aKzokNuEHOMI9aGkoKEC/ZvyPermik1jwMBCMosVxiv1rkijnfehf/vgUr
OK
‚úÖ [0;32mSUCCESS: Create alias #10 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #11...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_u9yUTCUPHjfoFv5O87/faYDHqblC4CKph2TMYLZpyJs0Ryr3rxw3uscZGCKUVjP+P6NIG8859JXUUFFWkXKxEArjyVwp7ZVMQdcIUrFw0kQYTjxFkoIM2OEgs+6LK1Al9lrmsKP0L92/E8IWlUnJUhh/7ECXLdc6A/cc0n/igPcCdJpM
OK
‚úÖ [0;32mSUCCESS: Create alias #11 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #12...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_t2f+/Q0DQNS2W/mDV/N8K8/8oWlHcRwNTKJqlX1p89V0NUJNFgvvHpcSc3jqNOMOp1rpciqaOrxZ7h4cKN+9NYImU7zwSwC4CCMcGIFMqos2vfcEchMS5VI4CI0/ud/ydAaraV8PyGssxnvjk35nam+RoG3XKUfbQQgeamgMc3wzXwqc
OK
‚úÖ [0;32mSUCCESS: Create alias #12 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #13...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_9N5AHWZj7BLyZPWSu3Dy9dqy75APANCGf1xxUAj5JbdYP6QrUn09CwNuKGNwEoaegrfsxpPhMW+ZmPhfjLwd82r7fvge4AhO5PHSlz2qCnuzgMwOrxHUtslI2bUmJDupuiTb2Y812kIzfuapGm/pwa8wJfWStpQeljDlxk6LM0B4z4uD
OK
‚úÖ [0;32mSUCCESS: Create alias #13 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #14...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_z5UjnesRBhldKJpi7Shyb3MCRkkAMwRJv2G7q+oqf+Zs+Ox8N3rDNerczuiqKpPZxoUBlXrotg0t/rP0oiNkQrKowFPWQeodxotir6nucjSp8tEjfgTM0lAxvS/Zob88GXQOUj3BjYWLqzhu+J/NNfGkZEfk3O5mL/2BieIEALwdNE4R
OK
‚úÖ [0;32mSUCCESS: Create alias #14 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #15...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_4qbf51ZDQjtOkG0yi+5bMsjBaPlI5CnJkF0a9df2k/qf4bcB8tK2rD1oBx5TI1cJl4Td/N/Zuhavpsanw/SprMz8bP+Bun5xY91m0nRx/lGmwfkeIneh60bxkczXaIh/NaMmNhtTVJJKxMPulyUv8SwNxoct8mRgizTvAUxv7rKQql0x
OK
‚úÖ [0;32mSUCCESS: Create alias #15 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #16...
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_6h08VtfaPof5g+ts/zmYrAVXnk+bRFL/mog0/k0nycOBhi3YmUxqprRDmfDucdsR+JttSWHVCdJ2ywnHB8z3G8BWdbt2DCzsNfV3+Sj+oFPmL1mYI5W53okWXE6VkNdLXardgn3i6PBTLKnmExTZkiNVYPM3/8zsaSn++rmX8H2nCIYH
OK
‚úÖ [0;32mSUCCESS: Create alias #16 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Attempting to create 17th alias (should fail)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
time=2025-07-23T17:23:51.296-04:00 level=ERROR msg="Alias creation failed" error="server returned status 400 Bad Request: Alias limit of 16 reached
"
Error: server returned status 400 Bad Request: Alias limit of 16 reached
‚úÖ [0;32mSUCCESS (Received Expected Error): Create 17th alias (and output contains 'Alias limit of 16 reached')[0m
‚ÑπÔ∏è Cleanup: Deleting primary key for alias limit test: insi_Yzsf340P8LVi51mo+vtMWwVAZyh6r7KNnqYefEQ8cPk1Ae6PweauX11qxbYBQjuj5pGx5pqHbVWhWBrhLavi/unZfQmGq2phzKxCq6SwtELIH3cyl2NJgMHy1Zl3Pkp0mHJM84pUTQWYRG9y4xl47XTygdY=
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_Yzsf340P8LVi51mo+vtMWwVAZyh6r7KNnqYefEQ8cPk1Ae6PweauX11qxbYBQjuj5pGx5pqHbVWhWBrhLavi/unZfQmGq2phzKxCq6SwtELIH3cyl2NJgMHy1Zl3Pkp0mHJM84pUTQWYRG9y4xl47XTygdY=
time=2025-07-23T17:23:51.323-04:00 level=INFO msg="API key deleted successfully" key_value="insi_Yzsf340P8LVi51mo+vtMWwVAZyh6r7KNnqYefEQ8cPk1Ae6PweauX11qxbYBQjuj5pGx5pqHbVWhWBrhLavi/unZfQmGq2phzKxCq6SwtELIH3cyl2NJgMHy1Zl3Pkp0mHJM84pUTQWYRG9y4xl47XTygdY="
OK
‚úÖ [0;32mSUCCESS: Delete primary key for alias limit cleanup (and output contains 'OK')[0m

[0;34m==== Test: Alias Deletion Security ====[0m
‚ÑπÔ∏è Creating primary key A
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add key_A_1753305831_2208042
time=2025-07-23T17:23:51.432-04:00 level=INFO msg="API key created successfully" key_name=key_A_1753305831_2208042 key="insi_ZgnjSxJSbxKHBVyijh9wM4Z83BYOfRTn5tqMtsmebo+0y89bbtnO12ODfzi24/ayPA4t2mcCW6uBIUwkpMGFfmqPVq/jTu9GrkaUvRCnWJ9vJWIgChgj7XoZGL89gNXeuIdAAMYIuxiaEkhK2TZVTfnj2CI="
API Key Name: key_A_1753305831_2208042
API Key:      insi_ZgnjSxJSbxKHBVyijh9wM4Z83BYOfRTn5tqMtsmebo+0y89bbtnO12ODfzi24/ayPA4t2mcCW6uBIUwkpMGFfmqPVq/jTu9GrkaUvRCnWJ9vJWIgChgj7XoZGL89gNXeuIdAAMYIuxiaEkhK2TZVTfnj2CI=
OK
‚ÑπÔ∏è Creating primary key B
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add key_B_1753305831_2208042
time=2025-07-23T17:23:51.538-04:00 level=INFO msg="API key created successfully" key_name=key_B_1753305831_2208042 key="insi_ybfbAvA7x7JAs5+ijdIoOvy08zbI9tzWjHQMOjKyYB38xKX1vSLK7GbVugqFy8eXMOEYucGxgB9QbLm/uojdIATMGAC8q/Qb+1PJxhwGklgJTIl73eh9oZXkV2aaSMSH/wVtVoHfxcI1DiNn52SSJnObbf0="
API Key Name: key_B_1753305831_2208042
API Key:      insi_ybfbAvA7x7JAs5+ijdIoOvy08zbI9tzWjHQMOjKyYB38xKX1vSLK7GbVugqFy8eXMOEYucGxgB9QbLm/uojdIATMGAC8q/Qb+1PJxhwGklgJTIl73eh9oZXkV2aaSMSH/wVtVoHfxcI1DiNn52SSJnObbf0=
OK
‚ÑπÔ∏è Creating alias A1 for key A
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_+nRVJiLMle5tNngJW85K/DQIJAO3RSulDADPh9AEEHYghkiA3SuRnvt4tYN/mZwOCUNKa16XKFU8ENmpVPM7FuZfxgn19VATDMAZBa4EbEW5k3kH/DS/Iea4FS3DuIpW8UVH4MMAibHfVWZ86nk1WgRYANPVc1T1U8u1jFnBgB2Xer7N
OK
‚ÑπÔ∏è Attempting to delete alias A1 using its own key (should fail)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias delete insi_+nRVJiLMle5tNngJW85K/DQIJAO3RSulDADPh9AEEHYghkiA3SuRnvt4tYN/mZwOCUNKa16XKFU8ENmpVPM7FuZfxgn19VATDMAZBa4EbEW5k3kH/DS/Iea4FS3DuIpW8UVH4MMAibHfVWZ86nk1WgRYANPVc1T1U8u1jFnBgB2Xer7N
time=2025-07-23T17:23:56.635-04:00 level=WARN msg="Received non-2xx status code" client.insi_client.method=POST client.insi_client.url=https://localhost:8443/db/api/v1/alias/delete client.insi_client.status_code=403
time=2025-07-23T17:23:56.635-04:00 level=ERROR msg="Alias deletion failed" alias=insi_+nRVJiLMle5tNngJW85K/DQIJAO3RSulDADPh9AEEHYghkiA3SuRnvt4tYN/mZwOCUNKa16XKFU8ENmpVPM7FuZfxgn19VATDMAZBa4EbEW5k3kH/DS/Iea4FS3DuIpW8UVH4MMAibHfVWZ86nk1WgRYANPVc1T1U8u1jFnBgB2Xer7N error="server returned status 403 for POST https://localhost:8443/db/api/v1/alias/delete: Forbidden: an alias key cannot be used to delete an alias, use the parent key"
Error: server returned status 403 for POST https://localhost:8443/db/api/v1/alias/delete: Forbidden: an alias key cannot be used to delete an alias, use the parent key
‚úÖ [0;32mSUCCESS (Received Expected Error): Delete alias with its own key (and output contains 'an alias key cannot be used to delete an alias')[0m
‚ÑπÔ∏è Attempting to delete alias A1 using unrelated key B (should fail)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias delete insi_+nRVJiLMle5tNngJW85K/DQIJAO3RSulDADPh9AEEHYghkiA3SuRnvt4tYN/mZwOCUNKa16XKFU8ENmpVPM7FuZfxgn19VATDMAZBa4EbEW5k3kH/DS/Iea4FS3DuIpW8UVH4MMAibHfVWZ86nk1WgRYANPVc1T1U8u1jFnBgB2Xer7N
time=2025-07-23T17:23:56.653-04:00 level=WARN msg="Received non-2xx status code" client.insi_client.method=POST client.insi_client.url=https://localhost:8443/db/api/v1/alias/delete client.insi_client.status_code=403
time=2025-07-23T17:23:56.654-04:00 level=ERROR msg="Alias deletion failed" alias=insi_+nRVJiLMle5tNngJW85K/DQIJAO3RSulDADPh9AEEHYghkiA3SuRnvt4tYN/mZwOCUNKa16XKFU8ENmpVPM7FuZfxgn19VATDMAZBa4EbEW5k3kH/DS/Iea4FS3DuIpW8UVH4MMAibHfVWZ86nk1WgRYANPVc1T1U8u1jFnBgB2Xer7N error="server returned status 403 for POST https://localhost:8443/db/api/v1/alias/delete: Forbidden: you can only delete aliases belonging to the authenticated key"
Error: server returned status 403 for POST https://localhost:8443/db/api/v1/alias/delete: Forbidden: you can only delete aliases belonging to the authenticated key
‚úÖ [0;32mSUCCESS (Received Expected Error): Delete alias with unrelated key (and output contains 'you can only delete aliases belonging to the authenticated key')[0m
‚ÑπÔ∏è Attempting to delete non-existent alias 'alias_nonexistent_1753305836_2208042' with key A (should fail)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias delete alias_nonexistent_1753305836_2208042
time=2025-07-23T17:23:56.677-04:00 level=ERROR msg="Alias deletion failed" alias=alias_nonexistent_1753305836_2208042 error="endpoint not found (404) at https://localhost:8443/db/api/v1/alias/delete: Alias not found
"
Error: endpoint not found (404) at https://localhost:8443/db/api/v1/alias/delete: Alias not found
‚úÖ [0;32mSUCCESS (Received Expected Error): Delete non-existent alias (and output contains 'not found')[0m
‚ÑπÔ∏è Cleanup for alias security test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_ZgnjSxJSbxKHBVyijh9wM4Z83BYOfRTn5tqMtsmebo+0y89bbtnO12ODfzi24/ayPA4t2mcCW6uBIUwkpMGFfmqPVq/jTu9GrkaUvRCnWJ9vJWIgChgj7XoZGL89gNXeuIdAAMYIuxiaEkhK2TZVTfnj2CI=
time=2025-07-23T17:23:56.711-04:00 level=INFO msg="API key deleted successfully" key_value="insi_ZgnjSxJSbxKHBVyijh9wM4Z83BYOfRTn5tqMtsmebo+0y89bbtnO12ODfzi24/ayPA4t2mcCW6uBIUwkpMGFfmqPVq/jTu9GrkaUvRCnWJ9vJWIgChgj7XoZGL89gNXeuIdAAMYIuxiaEkhK2TZVTfnj2CI="
OK
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_ybfbAvA7x7JAs5+ijdIoOvy08zbI9tzWjHQMOjKyYB38xKX1vSLK7GbVugqFy8eXMOEYucGxgB9QbLm/uojdIATMGAC8q/Qb+1PJxhwGklgJTIl73eh9oZXkV2aaSMSH/wVtVoHfxcI1DiNn52SSJnObbf0=
time=2025-07-23T17:23:56.734-04:00 level=INFO msg="API key deleted successfully" key_value="insi_ybfbAvA7x7JAs5+ijdIoOvy08zbI9tzWjHQMOjKyYB38xKX1vSLK7GbVugqFy8eXMOEYucGxgB9QbLm/uojdIATMGAC8q/Qb+1PJxhwGklgJTIl73eh9oZXkV2aaSMSH/wVtVoHfxcI1DiNn52SSJnObbf0="
OK

[0;34m==== Test: Root Key Cannot Create Alias ====[0m
‚ÑπÔ∏è Attempting to create an alias using the system root key (should fail)
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml alias add
time=2025-07-23T17:23:56.746-04:00 level=ERROR msg="Alias creation failed" error="server returned status 400 Bad Request: Cannot set alias for root key
"
Error: server returned status 400 Bad Request: Cannot set alias for root key
‚úÖ [0;32mSUCCESS (Received Expected Error): Create alias with root key (and output contains 'Cannot set alias for root key')[0m

[0;34m==== Test: Alias Shares Parent's Resource Limits ====[0m
‚ÑπÔ∏è Creating primary key 'primary_for_limit_share_1753305836_2208042' for limit sharing test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add primary_for_limit_share_1753305836_2208042
time=2025-07-23T17:23:56.870-04:00 level=INFO msg="API key created successfully" key_name=primary_for_limit_share_1753305836_2208042 key="insi_sntMnB+nklfGNaer1sT7UO8ScH36u/kG9rTs40K/psOrEKlKFD7n7P1buY7Vt/tFz+aNNymVmztv0yR/OfGD38wYsVTwjvXjaaZUYJBwqfF1TMUBxPdBJunp1WLtXm0mPHJrQCkC41zGm/r7WytHAb8Hldk="
API Key Name: primary_for_limit_share_1753305836_2208042
API Key:      insi_sntMnB+nklfGNaer1sT7UO8ScH36u/kG9rTs40K/psOrEKlKFD7n7P1buY7Vt/tFz+aNNymVmztv0yR/OfGD38wYsVTwjvXjaaZUYJBwqfF1TMUBxPdBJunp1WLtXm0mPHJrQCkC41zGm/r7WytHAb8Hldk=
OK
‚ÑπÔ∏è Setting disk limit for 'insi_sntMnB+nklfGNaer1sT7UO8ScH36u/kG9rTs40K/psOrEKlKFD7n7P1buY7Vt/tFz+aNNymVmztv0yR/OfGD38wYsVTwjvXjaaZUYJBwqfF1TMUBxPdBJunp1WLtXm0mPHJrQCkC41zGm/r7WytHAb8Hldk=' to 50 bytes
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api set-limits insi_sntMnB+nklfGNaer1sT7UO8ScH36u/kG9rTs40K/psOrEKlKFD7n7P1buY7Vt/tFz+aNNymVmztv0yR/OfGD38wYsVTwjvXjaaZUYJBwqfF1TMUBxPdBJunp1WLtXm0mPHJrQCkC41zGm/r7WytHAb8Hldk= --disk 50 --rps-data 10000 --rps-event 10000
OK
‚ÑπÔ∏è Creating alias for the limit-restricted key
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_yyLqAWDBX7kQYy0/cb5FcCL7dph85msyqS5lZXnIhraPfNpAOqMZKrFzxLINvxkdGJihM93+PPsIi5ufRNHnKrRaiE4jNeCN3S7m9VkAnFv9LPfuEwu+0SJNXgKCvI9SkHFF17oMU7zv2666Fa+021NrND2R3AC+MfCmNECPL34fxOn/
OK
‚ÑπÔ∏è Created test file '/tmp/insi_limit_test_blob.txt' of size 66 bytes
‚ÑπÔ∏è Attempting to upload blob with alias key (should fail due to limit)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml blob upload limit-test-blob /tmp/insi_limit_test_blob.txt
time=2025-07-23T17:24:02.019-04:00 level=ERROR msg="Blob upload failed" key=limit-test-blob path=/tmp/insi_limit_test_blob.txt error="disk limit exceeded: Disk usage limit exceeded. Current: 0, Limit: 50"
Error: disk limit exceeded: Disk usage limit exceeded. Current: 0, Limit: 50
‚úÖ [0;32mSUCCESS (Received Expected Error): Blob upload with alias exceeds disk limit (and output contains 'exceeded')[0m
‚ÑπÔ∏è Attempting to upload blob with primary key (should also fail)
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml blob upload limit-test-blob /tmp/insi_limit_test_blob.txt
time=2025-07-23T17:24:02.035-04:00 level=ERROR msg="Blob upload failed" key=limit-test-blob path=/tmp/insi_limit_test_blob.txt error="disk limit exceeded: Disk usage limit exceeded. Current: 0, Limit: 50"
Error: disk limit exceeded: Disk usage limit exceeded. Current: 0, Limit: 50
‚úÖ [0;32mSUCCESS (Received Expected Error): Blob upload with primary key exceeds disk limit (and output contains 'exceeded')[0m
‚ÑπÔ∏è Cleanup for shared limits test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_sntMnB+nklfGNaer1sT7UO8ScH36u/kG9rTs40K/psOrEKlKFD7n7P1buY7Vt/tFz+aNNymVmztv0yR/OfGD38wYsVTwjvXjaaZUYJBwqfF1TMUBxPdBJunp1WLtXm0mPHJrQCkC41zGm/r7WytHAb8Hldk=
time=2025-07-23T17:24:02.076-04:00 level=INFO msg="API key deleted successfully" key_value="insi_sntMnB+nklfGNaer1sT7UO8ScH36u/kG9rTs40K/psOrEKlKFD7n7P1buY7Vt/tFz+aNNymVmztv0yR/OfGD38wYsVTwjvXjaaZUYJBwqfF1TMUBxPdBJunp1WLtXm0mPHJrQCkC41zGm/r7WytHAb8Hldk="
OK

[0;34m==== Test: Multi-Alias Data Scope ====[0m
‚ÑπÔ∏è Creating primary key 'primary_for_multi_alias_1753305842_2208042' for multi-alias test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add primary_for_multi_alias_1753305842_2208042
time=2025-07-23T17:24:02.200-04:00 level=INFO msg="API key created successfully" key_name=primary_for_multi_alias_1753305842_2208042 key="insi_+L7q1RghumJ01cBmCTOA7h/tAbdasNOhqxz1k2xUqd3Y4EuHAfqNGXKlLBf5vSyGJRxv8laWIaGXvNofN4l538erqMSoZKJVVyb4v+ZIIV2xjGCm3+vJ3yyV6Ol2/fMqSoMxInCdPcWrN68Wxb1z7Fj0JjA="
API Key Name: primary_for_multi_alias_1753305842_2208042
API Key:      insi_+L7q1RghumJ01cBmCTOA7h/tAbdasNOhqxz1k2xUqd3Y4EuHAfqNGXKlLBf5vSyGJRxv8laWIaGXvNofN4l538erqMSoZKJVVyb4v+ZIIV2xjGCm3+vJ3yyV6Ol2/fMqSoMxInCdPcWrN68Wxb1z7Fj0JjA=
OK
‚úÖ [0;32mSUCCESS: Create primary key for multi-alias test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Creating 3 aliases for key insi_+L7q1RghumJ01cBmCTOA7h/tAbdasNOhqxz1k2xUqd3Y4EuHAfqNGXKlLBf5vSyGJRxv8laWIaGXvNofN4l538erqMSoZKJVVyb4v+ZIIV2xjGCm3+vJ3yyV6Ol2/fMqSoMxInCdPcWrN68Wxb1z7Fj0JjA=
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_QyHMJ81MazEBjuEqyWZ5ldACtDIqBZYKl42uLP7Ijf9Z0WUdPWLxJu1bcD0wXIxQxYmS6UW0zX1KQBFQ1pJi/D4vWJRpByPJHb8v5rcVdbPczxQW5M57dP+wDe5KxkBNjj6tH1OxMdDszloVXh/HNSGHxSt5YvVd6tWwhHwvJ8X8w57b
OK
‚ÑπÔ∏è  - Alias 1: insi_QyHMJ81MazEBjuEqyWZ5ldACtDIqBZYKl42uLP7Ijf9Z0WUdPWLxJu1bcD0wXIxQxYmS6UW0zX1KQBFQ1pJi/D4vWJRpByPJHb8v5rcVdbPczxQW5M57dP+wDe5KxkBNjj6tH1OxMdDszloVXh/HNSGHxSt5YvVd6tWwhHwvJ8X8w57b
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_Li2WFDQ1Klgg04tp4kkehF87IExDh+2pC5RedaeFgCgO317IXkjxFoABLZJlmBnklMIHQgmYAckT0g/LJ6zNyGElGTxeanXiqvtIi1e9WEl9TPK2hg0EtF6Cr2TYS9EyzHTkviml6uYAVqywtsAGlXGD0JarZ7cQCl3NWPPxzP8Kb5jW
OK
‚ÑπÔ∏è  - Alias 2: insi_Li2WFDQ1Klgg04tp4kkehF87IExDh+2pC5RedaeFgCgO317IXkjxFoABLZJlmBnklMIHQgmYAckT0g/LJ6zNyGElGTxeanXiqvtIi1e9WEl9TPK2hg0EtF6Cr2TYS9EyzHTkviml6uYAVqywtsAGlXGD0JarZ7cQCl3NWPPxzP8Kb5jW
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_4V21xbJ1IjNrZ5iXTe16qQ/zwAGPRSuJKMRa2NIOGghbVnDTqSuZo8BxbfCBVEY1aIUhwWVr+lTbPA2BWoqK7MQFQYIzY+PFiu0cRzi999rsvW105MqnG5qKEPQpLysG8SiUhyRxHwwSC5uG1ZGc7EBGKF/GIlOzElpRdZehSwA/a30n
OK
‚ÑπÔ∏è  - Alias 3: insi_4V21xbJ1IjNrZ5iXTe16qQ/zwAGPRSuJKMRa2NIOGghbVnDTqSuZo8BxbfCBVEY1aIUhwWVr+lTbPA2BWoqK7MQFQYIzY+PFiu0cRzi999rsvW105MqnG5qKEPQpLysG8SiUhyRxHwwSC5uG1ZGc7EBGKF/GIlOzElpRdZehSwA/a30n
‚ÑπÔ∏è Using Alias 1 to set 'multi_alias_key' to 'value_from_alias1'
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set multi_alias_key value_from_alias1
OK
‚úÖ [0;32mSUCCESS: Set value with alias 1 (and output contains 'OK')[0m
‚ÑπÔ∏è Using Alias 2 to get 'multi_alias_key'
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml get multi_alias_key
value_from_alias1
‚úÖ [0;32mSUCCESS: Get value with alias 2 (and output contains 'value_from_alias1')[0m
‚ÑπÔ∏è Using Alias 3 to update 'multi_alias_key' to 'updated_by_alias3'
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set multi_alias_key updated_by_alias3
OK
‚úÖ [0;32mSUCCESS: Update value with alias 3 (and output contains 'OK')[0m
‚ÑπÔ∏è Using primary key to confirm final value of 'multi_alias_key'
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml get multi_alias_key
updated_by_alias3
‚úÖ [0;32mSUCCESS: Confirm updated value with primary key (and output contains 'updated_by_alias3')[0m
‚ÑπÔ∏è Cleanup: Deleting primary key for multi-alias test: insi_+L7q1RghumJ01cBmCTOA7h/tAbdasNOhqxz1k2xUqd3Y4EuHAfqNGXKlLBf5vSyGJRxv8laWIaGXvNofN4l538erqMSoZKJVVyb4v+ZIIV2xjGCm3+vJ3yyV6Ol2/fMqSoMxInCdPcWrN68Wxb1z7Fj0JjA=
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_+L7q1RghumJ01cBmCTOA7h/tAbdasNOhqxz1k2xUqd3Y4EuHAfqNGXKlLBf5vSyGJRxv8laWIaGXvNofN4l538erqMSoZKJVVyb4v+ZIIV2xjGCm3+vJ3yyV6Ol2/fMqSoMxInCdPcWrN68Wxb1z7Fj0JjA=
time=2025-07-23T17:24:07.508-04:00 level=INFO msg="API key deleted successfully" key_value="insi_+L7q1RghumJ01cBmCTOA7h/tAbdasNOhqxz1k2xUqd3Y4EuHAfqNGXKlLBf5vSyGJRxv8laWIaGXvNofN4l538erqMSoZKJVVyb4v+ZIIV2xjGCm3+vJ3yyV6Ol2/fMqSoMxInCdPcWrN68Wxb1z7Fj0JjA="
OK
‚úÖ [0;32mSUCCESS: Delete primary key for multi-alias cleanup (and output contains 'OK')[0m

[0;34m==== Test: Alias Cleanup on Parent Key Deletion ====[0m
‚ÑπÔ∏è Creating primary key 'primary_for_cleanup_test_1753305847_2208042' for cleanup test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add primary_for_cleanup_test_1753305847_2208042
time=2025-07-23T17:24:07.632-04:00 level=INFO msg="API key created successfully" key_name=primary_for_cleanup_test_1753305847_2208042 key="insi_f536t/7XW0pAkUrbNU7w4/FpI/n839kl0zvIaXsXoN4iEVXX6ZP00yGT0SWoQ04/NSe5b5TZB2OUuvcQWwwclVslZLrPqJb6URYOulTMICTyKcr3qmtlVpDiKDwRpBNeb8YSFLGFb9QAZm55UHjzS7qG8Ts="
API Key Name: primary_for_cleanup_test_1753305847_2208042
API Key:      insi_f536t/7XW0pAkUrbNU7w4/FpI/n839kl0zvIaXsXoN4iEVXX6ZP00yGT0SWoQ04/NSe5b5TZB2OUuvcQWwwclVslZLrPqJb6URYOulTMICTyKcr3qmtlVpDiKDwRpBNeb8YSFLGFb9QAZm55UHjzS7qG8Ts=
OK
‚úÖ [0;32mSUCCESS: Create primary key for cleanup test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Parsed primary key for cleanup test: insi_f536t/7XW0pAkUrbNU7w4/FpI/n839kl0zvIaXsXoN4iEVXX6ZP00yGT0SWoQ04/NSe5b5TZB2OUuvcQWwwclVslZLrPqJb6URYOulTMICTyKcr3qmtlVpDiKDwRpBNeb8YSFLGFb9QAZm55UHjzS7qG8Ts=
‚ÑπÔ∏è Creating 3 aliases for key insi_f536t/7XW0pAkUrbNU7w4/FpI/n839kl0zvIaXsXoN4iEVXX6ZP00yGT0SWoQ04/NSe5b5TZB2OUuvcQWwwclVslZLrPqJb6URYOulTMICTyKcr3qmtlVpDiKDwRpBNeb8YSFLGFb9QAZm55UHjzS7qG8Ts=
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_LWTWHfrZ8AFMBiiZHt3uKoZWHnk37TsGpPe9v7C+TsVn8Ga7ZNAvReNIvITwZz9SYWwlY7rVgfHgTB2K040b0cTxk4+qmr7TqiGLy0bLhZkCl0lPhjc5Vx4kGhK3VwKMhCvLpeC2UYHOcU6U+FXtBNeaOT4BtKe/Fv7TudO/jnGHH1Pq
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_VaK1TZfkjPEsYWoaXz3vgA5zz8H0q0/czJBN2VS7gfool60ZZJ8innR2oyL7bKDTh29BTO0tjfE8o8d/9ywXUefuTw7IbmcYKRs+wcgJ5mouIBkYWP0lZeMawAQkwb1KI8inzZnaxzBU+pkdr7wUHdriFdswyoKRFrIsroVvl2X00kar
OK
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml alias add
Alias Key: insi_P8MHT7PRE6p3RPm4eaKCIohH3aGcDhHwVPm9G7+mxLPnw225XttIGvcOI3Z1THB+KkGA0k1HiS8M2eW4lL3415L9kI72DA5fgDVq1LOMl+3km7rFQ1ZbM+lyQ6H48HWh3I5AcAm51HfPysm7OFGtp2BOjkLXTz60rUq6zFNt1hhSjvpB
OK
‚ÑπÔ∏è  - Alias 1: insi_LWTWHfrZ8AFMBiiZHt3uKoZWHnk37TsGpPe9v7C+TsVn8Ga7ZNAvReNIvITwZz9SYWwlY7rVgfHgTB2K040b0cTxk4+qmr7TqiGLy0bLhZkCl0lPhjc5Vx4kGhK3VwKMhCvLpeC2UYHOcU6U+FXtBNeaOT4BtKe/Fv7TudO/jnGHH1Pq
‚ÑπÔ∏è  - Alias 2: insi_VaK1TZfkjPEsYWoaXz3vgA5zz8H0q0/czJBN2VS7gfool60ZZJ8innR2oyL7bKDTh29BTO0tjfE8o8d/9ywXUefuTw7IbmcYKRs+wcgJ5mouIBkYWP0lZeMawAQkwb1KI8inzZnaxzBU+pkdr7wUHdriFdswyoKRFrIsroVvl2X00kar
‚ÑπÔ∏è  - Alias 3: insi_P8MHT7PRE6p3RPm4eaKCIohH3aGcDhHwVPm9G7+mxLPnw225XttIGvcOI3Z1THB+KkGA0k1HiS8M2eW4lL3415L9kI72DA5fgDVq1LOMl+3km7rFQ1ZbM+lyQ6H48HWh3I5AcAm51HfPysm7OFGtp2BOjkLXTz60rUq6zFNt1hhSjvpB
‚ÑπÔ∏è Deleting primary key 'insi_f536t/7XW0pAkUrbNU7w4/FpI/n839kl0zvIaXsXoN4iEVXX6ZP00yGT0SWoQ04/NSe5b5TZB2OUuvcQWwwclVslZLrPqJb6URYOulTMICTyKcr3qmtlVpDiKDwRpBNeb8YSFLGFb9QAZm55UHjzS7qG8Ts=' to trigger alias cleanup
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_f536t/7XW0pAkUrbNU7w4/FpI/n839kl0zvIaXsXoN4iEVXX6ZP00yGT0SWoQ04/NSe5b5TZB2OUuvcQWwwclVslZLrPqJb6URYOulTMICTyKcr3qmtlVpDiKDwRpBNeb8YSFLGFb9QAZm55UHjzS7qG8Ts=
time=2025-07-23T17:24:12.844-04:00 level=INFO msg="API key deleted successfully" key_value="insi_f536t/7XW0pAkUrbNU7w4/FpI/n839kl0zvIaXsXoN4iEVXX6ZP00yGT0SWoQ04/NSe5b5TZB2OUuvcQWwwclVslZLrPqJb6URYOulTMICTyKcr3qmtlVpDiKDwRpBNeb8YSFLGFb9QAZm55UHjzS7qG8Ts="
OK
‚úÖ [0;32mSUCCESS: Delete primary key to trigger cleanup (and output contains 'OK')[0m
‚ÑπÔ∏è Waiting 45 seconds for tombstone runner to clean up aliases...
‚ÑπÔ∏è Verifying all aliases are now invalid
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api verify insi_LWTWHfrZ8AFMBiiZHt3uKoZWHnk37TsGpPe9v7C+TsVn8Ga7ZNAvReNIvITwZz9SYWwlY7rVgfHgTB2K040b0cTxk4+qmr7TqiGLy0bLhZkCl0lPhjc5Vx4kGhK3VwKMhCvLpeC2UYHOcU6U+FXtBNeaOT4BtKe/Fv7TudO/jnGHH1Pq
time=2025-07-23T17:24:57.859-04:00 level=INFO msg="No target node specified for verify, using DefaultLeader" node_id=node0
time=2025-07-23T17:24:57.859-04:00 level=INFO msg="Attempting to verify API key with a ping..." target_node=node0
time=2025-07-23T17:24:57.865-04:00 level=WARN msg="Received non-2xx status code" verify_client.insi_client.method=GET verify_client.insi_client.url=https://localhost:8443/db/api/v1/ping verify_client.insi_client.status_code=401
time=2025-07-23T17:24:57.865-04:00 level=ERROR msg="API key verification failed: Ping request failed" key_value=insi_LWTWHfrZ8AFMBiiZHt3uKoZWHnk37TsGpPe9v7C+TsVn8Ga7ZNAvReNIvITwZz9SYWwlY7rVgfHgTB2K040b0cTxk4+qmr7TqiGLy0bLhZkCl0lPhjc5Vx4kGhK3VwKMhCvLpeC2UYHOcU6U+FXtBNeaOT4BtKe/Fv7TudO/jnGHH1Pq error="server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key."
Error: API key verification failed. Ping error: server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key.
Verification FAILED
‚úÖ [0;32mSUCCESS (Received Expected Error): Verify alias 1 is invalid after parent deletion (and output contains 'Verification FAILED')[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api verify insi_VaK1TZfkjPEsYWoaXz3vgA5zz8H0q0/czJBN2VS7gfool60ZZJ8innR2oyL7bKDTh29BTO0tjfE8o8d/9ywXUefuTw7IbmcYKRs+wcgJ5mouIBkYWP0lZeMawAQkwb1KI8inzZnaxzBU+pkdr7wUHdriFdswyoKRFrIsroVvl2X00kar
time=2025-07-23T17:24:57.874-04:00 level=INFO msg="No target node specified for verify, using DefaultLeader" node_id=node0
time=2025-07-23T17:24:57.874-04:00 level=INFO msg="Attempting to verify API key with a ping..." target_node=node0
time=2025-07-23T17:24:57.879-04:00 level=WARN msg="Received non-2xx status code" verify_client.insi_client.method=GET verify_client.insi_client.url=https://localhost:8443/db/api/v1/ping verify_client.insi_client.status_code=401
time=2025-07-23T17:24:57.879-04:00 level=ERROR msg="API key verification failed: Ping request failed" key_value=insi_VaK1TZfkjPEsYWoaXz3vgA5zz8H0q0/czJBN2VS7gfool60ZZJ8innR2oyL7bKDTh29BTO0tjfE8o8d/9ywXUefuTw7IbmcYKRs+wcgJ5mouIBkYWP0lZeMawAQkwb1KI8inzZnaxzBU+pkdr7wUHdriFdswyoKRFrIsroVvl2X00kar error="server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key."
Error: API key verification failed. Ping error: server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key.
Verification FAILED
‚úÖ [0;32mSUCCESS (Received Expected Error): Verify alias 2 is invalid after parent deletion (and output contains 'Verification FAILED')[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api verify insi_P8MHT7PRE6p3RPm4eaKCIohH3aGcDhHwVPm9G7+mxLPnw225XttIGvcOI3Z1THB+KkGA0k1HiS8M2eW4lL3415L9kI72DA5fgDVq1LOMl+3km7rFQ1ZbM+lyQ6H48HWh3I5AcAm51HfPysm7OFGtp2BOjkLXTz60rUq6zFNt1hhSjvpB
time=2025-07-23T17:24:57.896-04:00 level=INFO msg="No target node specified for verify, using DefaultLeader" node_id=node0
time=2025-07-23T17:24:57.896-04:00 level=INFO msg="Attempting to verify API key with a ping..." target_node=node0
time=2025-07-23T17:24:57.907-04:00 level=WARN msg="Received non-2xx status code" verify_client.insi_client.method=GET verify_client.insi_client.url=https://localhost:8443/db/api/v1/ping verify_client.insi_client.status_code=401
time=2025-07-23T17:24:57.907-04:00 level=ERROR msg="API key verification failed: Ping request failed" key_value=insi_P8MHT7PRE6p3RPm4eaKCIohH3aGcDhHwVPm9G7+mxLPnw225XttIGvcOI3Z1THB+KkGA0k1HiS8M2eW4lL3415L9kI72DA5fgDVq1LOMl+3km7rFQ1ZbM+lyQ6H48HWh3I5AcAm51HfPysm7OFGtp2BOjkLXTz60rUq6zFNt1hhSjvpB error="server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key."
Error: API key verification failed. Ping error: server error (status 401): AUTHENTICATION_FAILED - Authentication failed. Invalid or missing API key.
Verification FAILED
‚úÖ [0;32mSUCCESS (Received Expected Error): Verify alias 3 is invalid after parent deletion (and output contains 'Verification FAILED')[0m

[0;34m==== Test: Blob file is deleted when parent API key is deleted ====[0m
‚ÑπÔ∏è Creating a primary key for the blob cleanup test
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api add key_with_blob_1753305897_2208042
time=2025-07-23T17:24:58.057-04:00 level=INFO msg="API key created successfully" key_name=key_with_blob_1753305897_2208042 key="insi_sksqiOpETDlMHCAn6e9vx1eeXghwqWsarl04irAaC30H6czQurcplvgXGwhZJjPglUc+vS1Rk4XwgNRBNFeIXsbc+53sQ2DyQ8j0aslpeJtJ3fqquFfrHQVopT9H6bz/iX2P5TMS8tK6Qc1AWm7hRXQl7Nc="
API Key Name: key_with_blob_1753305897_2208042
API Key:      insi_sksqiOpETDlMHCAn6e9vx1eeXghwqWsarl04irAaC30H6czQurcplvgXGwhZJjPglUc+vS1Rk4XwgNRBNFeIXsbc+53sQ2DyQ8j0aslpeJtJ3fqquFfrHQVopT9H6bz/iX2P5TMS8tK6Qc1AWm7hRXQl7Nc=
OK
‚úÖ [0;32mCreated key: insi_sksqiOpETDlMHCAn6e9vx1eeXghwqWsarl04irAaC30H6czQurcplvgXGwhZJjPglUc+vS1Rk4XwgNRBNFeIXsbc+53sQ2DyQ8j0aslpeJtJ3fqquFfrHQVopT9H6bz/iX2P5TMS8tK6Qc1AWm7hRXQl7Nc=[0m
‚ÑπÔ∏è Uploading blob with the new key
‚ÑπÔ∏è Running (with INSI_API_KEY set): /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml blob upload blob_to_be_orphaned /tmp/insi_orphan_blob_test.txt
OK
‚úÖ [0;32mSUCCESS: Blob upload with temporary key[0m
‚ÑπÔ∏è Verifying physical blob existence...
‚úÖ [0;32mVerified blob file exists on all 3 nodes before key deletion.[0m
‚ÑπÔ∏è Deleting parent API key 'insi_sksqiOpETDlMHCAn6e9vx1eeXghwqWsarl04irAaC30H6czQurcplvgXGwhZJjPglUc+vS1Rk4XwgNRBNFeIXsbc+53sQ2DyQ8j0aslpeJtJ3fqquFfrHQVopT9H6bz/iX2P5TMS8tK6Qc1AWm7hRXQl7Nc='
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml api delete insi_sksqiOpETDlMHCAn6e9vx1eeXghwqWsarl04irAaC30H6czQurcplvgXGwhZJjPglUc+vS1Rk4XwgNRBNFeIXsbc+53sQ2DyQ8j0aslpeJtJ3fqquFfrHQVopT9H6bz/iX2P5TMS8tK6Qc1AWm7hRXQl7Nc=
time=2025-07-23T17:25:08.170-04:00 level=INFO msg="API key deleted successfully" key_value="insi_sksqiOpETDlMHCAn6e9vx1eeXghwqWsarl04irAaC30H6czQurcplvgXGwhZJjPglUc+vS1Rk4XwgNRBNFeIXsbc+53sQ2DyQ8j0aslpeJtJ3fqquFfrHQVopT9H6bz/iX2P5TMS8tK6Qc1AWm7hRXQl7Nc="
OK
‚úÖ [0;32mSUCCESS: Delete parent API key (and output contains 'OK')[0m
‚ÑπÔ∏è Waiting 45 seconds for tombstone runner to clean up blobs...
‚ÑπÔ∏è Verifying physical blob no longer exists...
‚úÖ [0;32mVerified blob file was physically deleted from all nodes after parent key deletion.[0m

[0;32mAll TKV API Key operations tests completed.[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 92
[0;32mAll API Key tests passed successfully![0m
‚úÖ Success: api-keys.sh completed.
üöÄ Running crud-iter.sh...
insid pid: 2210151
2025-07-23T17:25:53.272-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:25:53.272-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-07-23T17:25:53.413-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:25:53.413-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-07-23T17:25:53.414-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:25:53.414-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-07-23T17:25:54.440-0400 [WARN]  no known peers, aborting election
2025-07-23T17:25:55.244-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-07-23T17:25:55.244-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-07-23T17:25:55.244-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-07-23T17:25:55.252-0400 [INFO]  election won: term=2 tally=1
2025-07-23T17:25:55.252-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-07-23T17:25:55.410-0400 [WARN]  no known peers, aborting election
set root tracker key internal:api_key_memory_usage: value 0
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
2025-07-23T17:26:03.424-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-07-23T17:26:03.429-0400 [INFO]  added peer, starting replication: peer=node2
2025-07-23T17:26:03.429-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-07-23T17:26:03.432-0400 [INFO]  added peer, starting replication: peer=node1
2025-07-23T17:26:03.433-0400 [WARN]  failed to get previous log: previous-index=11 last-index=0 error="log not found"
2025-07-23T17:26:03.433-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-07-23T17:26:03.435-0400 [WARN]  failed to get previous log: previous-index=12 last-index=0 error="log not found"
2025-07-23T17:26:03.435-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-07-23T17:26:03.441-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
2025-07-23T17:26:03.448-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
‚ÑπÔ∏è Using config: /tmp/insi-test-cluster/cluster.yaml

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml ping 
Exit code: 0
‚úÖ [0;32mServer is online. Proceeding with tests.[0m
‚ÑπÔ∏è Starting TKV data tests with insic: /tmp/insi-test-cluster/insic
‚ÑπÔ∏è Using config: /tmp/insi-test-cluster/cluster.yaml

[0;34m==== Test: Set and Get ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set testkey_sg_1753305968 testvalue_sg_1753305968
Exit code: 0
‚úÖ [0;32mSUCCESS: Set key 'testkey_sg_1753305968' to 'testvalue_sg_1753305968'[0m
   Output: OK
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml get testkey_sg_1753305968
Exit code: 0
‚úÖ [0;32mSUCCESS: Get key 'testkey_sg_1753305968'[0m
   Output: testvalue_sg_1753305968
‚úÖ [0;32mValue for 'testkey_sg_1753305968' matches![0m

[0;34m==== Test: Get Non-Existent Key ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml get nonexistentkey_1753305968
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): Get non-existent key 'nonexistentkey_1753305968'[0m
   Output contains: Error: Key 'nonexistentkey_1753305968' not found.
‚úÖ [0;32mCorrectly received an error message for non-existent key.[0m

[0;34m==== Test: Set, Delete, and Get ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set testkey_del_1753305968 testvalue_del_1753305968
Exit code: 0
‚úÖ [0;32mSUCCESS: Set key 'testkey_del_1753305968' for deletion test[0m
   Output: OK
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml delete testkey_del_1753305968
Exit code: 0
‚úÖ [0;32mSUCCESS: Delete key 'testkey_del_1753305968'[0m
   Output: OK
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml get testkey_del_1753305968
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): Get deleted key 'testkey_del_1753305968'[0m
   Output contains: Error: Key 'testkey_del_1753305968' not found.

[0;34m==== Test: Iterate by Prefix ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set iter_prefix_1753305968_key1 value1_iter
Exit code: 0
‚úÖ [0;32mSUCCESS: Set key 'iter_prefix_1753305968_key1' for iteration[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set iter_prefix_1753305968_key2 value2_iter
Exit code: 0
‚úÖ [0;32mSUCCESS: Set key 'iter_prefix_1753305968_key2' for iteration[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set iter_prefix_1753305968_key3 value3_iter
Exit code: 0
‚úÖ [0;32mSUCCESS: Set key 'iter_prefix_1753305968_key3' for iteration[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml iterate prefix iter_prefix_1753305968_
Exit code: 0
‚úÖ [0;32mSUCCESS: Iterate by prefix 'iter_prefix_1753305968_' (expecting keys)[0m
   Output: iter_prefix_1753305968_key1
iter_prefix_1753305968_key2
iter_prefix_1753305968_key3
‚úÖ [0;32mIterate by prefix 'iter_prefix_1753305968_' successfully retrieved all expected keys and no extras.[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml delete iter_prefix_1753305968_key1
Exit code: 0
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml delete iter_prefix_1753305968_key2
Exit code: 0
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml delete iter_prefix_1753305968_key3
Exit code: 0

[0;34m==== Test: Bump Integer Value ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set testkey_bump_1753305968 10
Exit code: 0
‚úÖ [0;32mSUCCESS: Set initial value for bump test ('testkey_bump_1753305968' -> '10')[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml bump testkey_bump_1753305968 5
Exit code: 0
‚úÖ [0;32mSUCCESS: Bump key 'testkey_bump_1753305968' up by '5'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml get testkey_bump_1753305968
Exit code: 0
‚úÖ [0;32mSUCCESS: Get key 'testkey_bump_1753305968' after bumping up[0m
‚úÖ [0;32mValue for 'testkey_bump_1753305968' is '15' as expected.[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml bump testkey_bump_1753305968 -10
Exit code: 0
‚úÖ [0;32mSUCCESS: Bump key 'testkey_bump_1753305968' down by '-10'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml get testkey_bump_1753305968
Exit code: 0
‚úÖ [0;32mSUCCESS: Get key 'testkey_bump_1753305968' after bumping down[0m
‚úÖ [0;32mValue for 'testkey_bump_1753305968' is '5' as expected.[0m
‚ÑπÔ∏è Testing bumping below zero (expected to result in '0')...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml bump testkey_bump_1753305968 -10
Exit code: 0
‚úÖ [0;32mSUCCESS: Bump key 'testkey_bump_1753305968' by '-10' which would go below zero[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml get testkey_bump_1753305968
Exit code: 0
‚úÖ [0;32mSUCCESS: Get key 'testkey_bump_1753305968' after bumping below zero[0m
‚úÖ [0;32mValue for 'testkey_bump_1753305968' is '0' as expected. Bumping does not go below zero.[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml bump new_bump_key_1753305968 100
Exit code: 0
‚úÖ [0;32mSUCCESS: Bump non-existent key 'new_bump_key_1753305968' by '100'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml get new_bump_key_1753305968
Exit code: 0
‚úÖ [0;32mSUCCESS: Get key 'new_bump_key_1753305968' after initial bump[0m
‚úÖ [0;32mValue for new key 'new_bump_key_1753305968' is '100' as expected.[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml bump new_bump_key_1753305968 not-a-number
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): Bump key 'new_bump_key_1753305968' with non-integer value 'not-a-number'[0m
   Output contains: time=2025-07-23T17:26:08.962-04:00 level=ERROR msg="bump: value must be an integer" error="strconv.Atoi: parsing \"not-a-number\": invalid syntax"
Error: Value must be an integer: strconv.Atoi: parsing "not-a-number": invalid syntax
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml set non_int_key_1753305968 i-am-string
Exit code: 0
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml bump non_int_key_1753305968 5
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): Bump key 'non_int_key_1753305968' which holds a string value[0m
   Output contains: time=2025-07-23T17:26:09.000-04:00 level=ERROR msg="Bump failed" key=non_int_key_1753305968 error="server returned status 400 Bad Request: The existing value is not a valid integer, cannot bump.
"
Error: server returned status 400 Bad Request: The existing value is not a valid integer, cannot bump.
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml delete testkey_bump_1753305968
Exit code: 0
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml delete new_bump_key_1753305968
Exit code: 0
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml delete non_int_key_1753305968
Exit code: 0

[0;32mAll TKV data tests completed.[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 22
[0;32mAll tests passed successfully![0m
‚úÖ Success: crud-iter.sh completed.
üöÄ Running cas-setnx.sh...
insid pid: 2210502
2025-07-23T17:26:09.391-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:26:09.391-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-07-23T17:26:09.393-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:26:09.394-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
2025-07-23T17:26:09.396-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:26:09.396-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-07-23T17:26:10.785-0400 [WARN]  no known peers, aborting election
2025-07-23T17:26:11.035-0400 [WARN]  no known peers, aborting election
2025-07-23T17:26:11.331-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-07-23T17:26:11.331-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-07-23T17:26:11.331-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-07-23T17:26:11.339-0400 [INFO]  election won: term=2 tally=1
2025-07-23T17:26:11.339-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-07-23T17:26:19.401-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-07-23T17:26:19.406-0400 [INFO]  added peer, starting replication: peer=node2
2025-07-23T17:26:19.409-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-07-23T17:26:19.410-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-07-23T17:26:19.410-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-07-23T17:26:19.413-0400 [INFO]  added peer, starting replication: peer=node1
2025-07-23T17:26:19.414-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
2025-07-23T17:26:19.417-0400 [WARN]  failed to get previous log: previous-index=5 last-index=0 error="log not found"
2025-07-23T17:26:19.417-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
set root tracker key internal:api_key_memory_usage: value 0
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-07-23T17:26:19.420-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml ping 
Exit code: 0
‚úÖ [0;32mServer is online. Proceeding with atomic op tests.[0m

[0;34m==== Test: setnx ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml setnx test_setnx_1753305984 value1
Exit code: 0
‚úÖ [0;32mSUCCESS: setnx on new key 'test_setnx_1753305984'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml get test_setnx_1753305984
Exit code: 0
‚úÖ [0;32mValue for 'test_setnx_1753305984' correctly set to 'value1'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml setnx test_setnx_1753305984 value2
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Conflict): setnx on existing key 'test_setnx_1753305984'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml get test_setnx_1753305984
Exit code: 0
‚úÖ [0;32mValue for 'test_setnx_1753305984' remained 'value1' after failed setnx[0m

[0;34m==== Test: cas (Compare-And-Swap) ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml set test_cas_1753305984 initial_cas_value
Exit code: 0
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cas nonexistent_test_cas_1753305984 initial_cas_value new_cas_value
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Conflict): cas on non-existent key[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cas test_cas_1753305984 wrong_cas_value new_cas_value
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Conflict): cas with incorrect old value for key 'test_cas_1753305984'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml get test_cas_1753305984
Exit code: 0
‚úÖ [0;32mValue for 'test_cas_1753305984' remained 'initial_cas_value' after failed cas[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cas test_cas_1753305984 initial_cas_value new_cas_value
Exit code: 0
‚úÖ [0;32mSUCCESS: cas with correct old value for key 'test_cas_1753305984'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml get test_cas_1753305984
Exit code: 0
‚úÖ [0;32mValue for 'test_cas_1753305984' correctly updated to 'new_cas_value'[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 5
[0;32mAll atomic op tests passed successfully![0m
‚úÖ Success: cas-setnx.sh completed.
üöÄ Running events.sh...
insid pid: 2210730
2025-07-23T17:26:25.512-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:26:25.512-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-07-23T17:26:25.815-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:26:25.815-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-07-23T17:26:25.816-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:26:25.816-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-07-23T17:26:26.792-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-07-23T17:26:26.792-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-07-23T17:26:26.792-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-07-23T17:26:26.799-0400 [INFO]  election won: term=2 tally=1
2025-07-23T17:26:26.799-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-07-23T17:26:26.925-0400 [WARN]  no known peers, aborting election
2025-07-23T17:26:27.383-0400 [WARN]  no known peers, aborting election
set root tracker key internal:api_key_memory_usage: value 0
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
2025-07-23T17:26:35.822-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-07-23T17:26:35.827-0400 [INFO]  added peer, starting replication: peer=node2
2025-07-23T17:26:35.827-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-07-23T17:26:35.830-0400 [INFO]  added peer, starting replication: peer=node1
2025-07-23T17:26:35.831-0400 [WARN]  failed to get previous log: previous-index=11 last-index=0 error="log not found"
2025-07-23T17:26:35.831-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-07-23T17:26:35.833-0400 [WARN]  failed to get previous log: previous-index=12 last-index=0 error="log not found"
2025-07-23T17:26:35.833-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-07-23T17:26:35.836-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
2025-07-23T17:26:35.842-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
--- Test Setup ---
Using insic: /tmp/insi-test-cluster/insic
Using config: /tmp/insi-test-cluster/cluster.yaml
Targeting node: node0
Test directory: /tmp/insic_events_test_bmjXrn
Output file: /tmp/insic_events_test_bmjXrn/output.txt
Topic: test-event-topic-2210819
------------------
Starting subscriber for topic 'test-event-topic-2210819'...
Subscriber started with PID: 2210822. Outputting to: /tmp/insic_events_test_bmjXrn/output.txt
Subscriber process seems to be running.
Waiting for subscriber to connect...
Subscriber connected.
Publishing 3 messages to topic 'test-event-topic-2210819'...
Publishing: 'Hello_World_1_2210819'
OK
Publishing: 'Another_Message_2_2210819'
OK
Publishing: 'Test_Data_3_2210819'
OK
All messages published.
Waiting for messages to be processed (10 seconds)...
Stopping subscriber (PID: 2210822)...
Subscriber stopped.
Verifying received messages in /tmp/insic_events_test_bmjXrn/output.txt...
OK: Found message 'Hello_World_1_2210819'
OK: Found message 'Another_Message_2_2210819'
OK: Found message 'Test_Data_3_2210819'
--- Test Summary ---
SUCCESS: All 3 messages were received!
See /tmp/insic_events_test_bmjXrn/output.txt for details.
--------------------

--- Testing Purge Functionality ---
Starting 3 subscribers for purge test...
Subscriber 1 started with PID: 2210982
Subscriber 2 started with PID: 2210983
Subscriber 3 started with PID: 2210984
Waiting for all subscribers to connect...
Checking subscriber connection status...
Subscriber 1 connected successfully
Subscriber 2 connected successfully
Subscriber 3 connected successfully
Running subscribers: 3 out of 3
Running purge command...
Purge command output:
time=2025-07-23T17:27:02.270-04:00 level=INFO msg="Attempting to purge all event subscriptions for current API key"
Successfully purged 3 event subscription(s).
Purge exit code: 0
Purge reported 3 disconnected sessions
OK: Subscriber PID 2210982 has terminated
OK: Subscriber PID 2210983 has terminated
OK: Subscriber PID 2210984 has terminated
--- Purge Test Summary ---
- Started with 3 running subscribers
- Purge reported 3 disconnected sessions
- 3 subscribers terminated after purge
- 0 subscribers still running after purge
SUCCESS: Purge functionality working correctly!
--------------------------
--- Cleaning up ---
Subscriber process (PID: 2210822) already exited.
Removing temporary directory: /tmp/insic_events_test_bmjXrn
---------------------
‚úÖ Success: events.sh completed.
üöÄ Running events-purge-advanced.sh...
insid pid: 2211110
2025-07-23T17:27:04.831-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:27:04.831-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-07-23T17:27:04.834-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:27:04.834-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
2025-07-23T17:27:04.835-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:27:04.835-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-07-23T17:27:06.007-0400 [WARN]  no known peers, aborting election
2025-07-23T17:27:06.026-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-07-23T17:27:06.026-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-07-23T17:27:06.026-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-07-23T17:27:06.034-0400 [INFO]  election won: term=2 tally=1
2025-07-23T17:27:06.034-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-07-23T17:27:06.086-0400 [WARN]  no known peers, aborting election
2025-07-23T17:27:14.841-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-07-23T17:27:14.846-0400 [INFO]  added peer, starting replication: peer=node2
2025-07-23T17:27:14.850-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-07-23T17:27:14.851-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
2025-07-23T17:27:14.851-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-07-23T17:27:14.859-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
2025-07-23T17:27:14.860-0400 [INFO]  added peer, starting replication: peer=node1
set root tracker key internal:api_key_memory_usage: value 0
2025-07-23T17:27:14.865-0400 [WARN]  failed to get previous log: previous-index=5 last-index=0 error="log not found"
2025-07-23T17:27:14.865-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-07-23T17:27:14.870-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
=== Advanced Event Purge Tests ===
Using insic: /tmp/insi-test-cluster/insic
Using config: /tmp/insi-test-cluster/cluster.yaml
Test directory: /tmp/insic_purge_advanced_test_iuUHg4
=================================

--- Test 1: Purge with no active subscriptions ---
‚úì PASS: Correctly handled no active subscriptions

--- Test 2: Multiple purges in succession ---
‚úì PASS: Multiple purges handled correctly

--- Test 3: Purge with mixed API keys ---
Created test API key: insi_nT5PuhwAFUBLIIH...
‚úì PASS: API key isolation working correctly

--- Test 4: Concurrent purge and subscribe ---
Purged 5 subscriptions during concurrent operations
‚úì PASS: Concurrent operations handled safely

--- Test 5: Purge behavior with connection issues ---
Simulated network freeze for subscriber
‚úì PASS: Handled frozen client correctly

--- Test 6: Rate limiting on purge endpoint ---
‚úì INFO: Made 20 rapid purge requests
‚úì INFO: Rate limiting threshold not reached in test

--- Test 7: Per-node purge isolation verification ---
Testing across nodes: node0 node1 node2
Created test API key for cross-node test: insi_Vmuc651E6R+Pazb...
Started subscriber on node0 with PID 2211741
Started subscriber on node0 with PID 2211742
Started subscriber on node1 with PID 2211764
Started subscriber on node1 with PID 2211765
Started subscriber on node2 with PID 2211786
Started subscriber on node2 with PID 2211787
Started 6 subscribers across 3 nodes
Verified 6 subscribers are running

=== Purging from node: node0 ===
  Subscribers on node0 before purge: 2
  Subscribers on other nodes before purge: 4
  Purge reported: 2 subscription(s) disconnected
  Subscribers on node0 after purge: 0 (expected: 0)
  Subscribers on other nodes after purge: 4 (expected: 4)
  ‚úì PASS: Node node0 correctly purged only its local subscriptions

=== Purging from node: node1 ===
  Subscribers on node1 before purge: 2
  Subscribers on other nodes before purge: 2
  Purge reported: 2 subscription(s) disconnected
  Subscribers on node1 after purge: 0 (expected: 0)
  Subscribers on other nodes after purge: 2 (expected: 2)
  ‚úì PASS: Node node1 correctly purged only its local subscriptions

=== Purging from node: node2 ===
  Subscribers on node2 before purge: 2
  Subscribers on other nodes before purge: 0
  Purge reported: 2 subscription(s) disconnected
  Subscribers on node2 after purge: 0 (expected: 0)
  Subscribers on other nodes after purge: 0 (expected: 0)
  ‚úì PASS: Node node2 correctly purged only its local subscriptions

--- Per-Node Purge Isolation Test Summary ---
- Nodes tested: 3
- Total subscribers started: 6
- Total purged: 6
‚úì PASS: Per-node purge isolation working correctly!
  Each node only purged its local subscriptions without affecting other nodes

--- Test 8: Purge all nodes at once verification ---
Testing purge-all across nodes: node0 node1 node2
Created test API key for purge-all test: insi_txMNQEhIJ/fP98b...
Started subscriber on node0 with PID 2212052
Started subscriber on node0 with PID 2212053
Started subscriber on node0 with PID 2212054
Started subscriber on node1 with PID 2212082
Started subscriber on node1 with PID 2212083
Started subscriber on node1 with PID 2212084
Started subscriber on node2 with PID 2212103
Started subscriber on node2 with PID 2212108
Started subscriber on node2 with PID 2212111
Started 9 subscribers across 3 nodes
Verified 9 subscribers are running before purge-all

=== Executing purge-all from node: node0 ===
Purge-all reported: 3 subscription(s) disconnected

--- Purge-All Test Results ---
Subscribers before purge-all: 9
Subscribers after purge-all: 6
Total reported as purged: 3
‚úì INFO: Purge command executed successfully (purged 3 subscriptions)
  Note: Full purge-all across nodes requires implementation in insic client
/tmp/insi-test-cluster/events-purge-advanced.sh: line 583: 2212082 Killed                  INSI_API_KEY="$PURGE_ALL_API_KEY" "$INSIC_EXE" --config "$CONFIG_FILE" --target "$NODE" subscribe "purge-all-topic-$i" > "$SUB_OUTPUT" 2>&1
/tmp/insi-test-cluster/events-purge-advanced.sh: line 583: 2212083 Killed                  INSI_API_KEY="$PURGE_ALL_API_KEY" "$INSIC_EXE" --config "$CONFIG_FILE" --target "$NODE" subscribe "purge-all-topic-$i" > "$SUB_OUTPUT" 2>&1
/tmp/insi-test-cluster/events-purge-advanced.sh: line 583: 2212084 Killed                  INSI_API_KEY="$PURGE_ALL_API_KEY" "$INSIC_EXE" --config "$CONFIG_FILE" --target "$NODE" subscribe "purge-all-topic-$i" > "$SUB_OUTPUT" 2>&1
/tmp/insi-test-cluster/events-purge-advanced.sh: line 583: 2212103 Killed                  INSI_API_KEY="$PURGE_ALL_API_KEY" "$INSIC_EXE" --config "$CONFIG_FILE" --target "$NODE" subscribe "purge-all-topic-$i" > "$SUB_OUTPUT" 2>&1
/tmp/insi-test-cluster/events-purge-advanced.sh: line 583: 2212108 Killed                  INSI_API_KEY="$PURGE_ALL_API_KEY" "$INSIC_EXE" --config "$CONFIG_FILE" --target "$NODE" subscribe "purge-all-topic-$i" > "$SUB_OUTPUT" 2>&1
/tmp/insi-test-cluster/events-purge-advanced.sh: line 594: 2212111 Killed                  INSI_API_KEY="$PURGE_ALL_API_KEY" "$INSIC_EXE" --config "$CONFIG_FILE" --target "$NODE" subscribe "purge-all-topic-$i" > "$SUB_OUTPUT" 2>&1

‚úì Test 8 completed (purge-all functionality test)

=== All Advanced Purge Tests Completed ===
‚úì All tests passed!
--- Cleaning up ---
---------------------
‚úÖ Success: events-purge-advanced.sh completed.
üöÄ Running get-set-delete.sh...
insid pid: 2212381
2025-07-23T17:28:04.895-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:28:04.895-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-07-23T17:28:04.896-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:28:04.896-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-07-23T17:28:05.003-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:28:05.003-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-07-23T17:28:06.118-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-07-23T17:28:06.118-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-07-23T17:28:06.118-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-07-23T17:28:06.119-0400 [WARN]  no known peers, aborting election
2025-07-23T17:28:06.126-0400 [INFO]  election won: term=2 tally=1
2025-07-23T17:28:06.126-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-07-23T17:28:06.793-0400 [WARN]  no known peers, aborting election
2025-07-23T17:28:14.900-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-07-23T17:28:14.904-0400 [INFO]  added peer, starting replication: peer=node1
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-07-23T17:28:14.914-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
2025-07-23T17:28:14.914-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-07-23T17:28:14.917-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
set root tracker key internal:api_key_memory_usage: value 0
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
2025-07-23T17:28:15.016-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-07-23T17:28:15.023-0400 [INFO]  added peer, starting replication: peer=node2
set root tracker key internal:api_key_max_subscriptions:
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-07-23T17:28:15.030-0400 [WARN]  failed to get previous log: previous-index=11 last-index=0 error="log not found"
2025-07-23T17:28:15.030-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-07-23T17:28:15.042-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
‚ÑπÔ∏è Using config: /tmp/insi-test-cluster/cluster.yaml

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml ping 
Exit code: 0
‚úÖ [0;32mServer is online. Proceeding with tests.[0m
‚ÑπÔ∏è Starting TKV cache tests with insic: /tmp/insi-test-cluster/insic

[0;34m==== Test: Cache Set and Get Basic ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache set cachekey_sg_1753306099 cachevalue_sg_1753306099
Exit code: 0
‚úÖ [0;32mSUCCESS: Cache set key 'cachekey_sg_1753306099' to 'cachevalue_sg_1753306099', received 'OK'.[0m
‚ÑπÔ∏è Brief pause after set...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache get cachekey_sg_1753306099
Exit code: 0
‚úÖ [0;32mSUCCESS: Cache get key 'cachekey_sg_1753306099' returned correct value.[0m

[0;34m==== Test: Cache Delete ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache set cachekey_del_1753306100 cachevalue_del_1753306100
Exit code: 0
‚úÖ [0;32mSUCCESS: Cache set key 'cachekey_del_1753306100' for delete test, received 'OK'.[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache delete cachekey_del_1753306100
Exit code: 0
‚úÖ [0;32mSUCCESS: Cache delete key 'cachekey_del_1753306100', received 'OK'.[0m
‚ÑπÔ∏è Brief pause after delete...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache get cachekey_del_1753306100
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): Cache get deleted key 'cachekey_del_1753306100' (should fail after delete)[0m

[0;34m==== Test: Cache Get Non-Existent Key ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache get nonexistentcachekey_1753306100
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): Cache get non-existent key 'nonexistentcachekey_1753306100'[0m

[0;34m==== Test: Cache CLI Argument Validation ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache set argtest_key_1753306100
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): cache set: missing value argument[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache set argtest_key_1753306100 argtest_val extra_arg
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): cache set: too many arguments[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache get
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): cache get: missing key argument[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache get argtest_key_1753306100 extra_arg
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): cache get: too many arguments[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache delete
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): cache delete: missing key argument[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache delete argtest_key_1753306100 extra_arg
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Error): cache delete: too many arguments[0m

[0;34m==== Test: Cache Iterate by Prefix ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache set c_iter_prefix_1753306100_key1 c_value1_iter
Exit code: 0
‚úÖ [0;32mSUCCESS: Cache set key 'c_iter_prefix_1753306100_key1' for iteration[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache set c_iter_prefix_1753306100_key2 c_value2_iter
Exit code: 0
‚úÖ [0;32mSUCCESS: Cache set key 'c_iter_prefix_1753306100_key2' for iteration[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache set c_iter_prefix_1753306100_key3 c_value3_iter
Exit code: 0
‚úÖ [0;32mSUCCESS: Cache set key 'c_iter_prefix_1753306100_key3' for iteration[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache iterate prefix c_iter_prefix_1753306100_
Exit code: 0
‚úÖ [0;32mSUCCESS: Cache iterate by prefix 'c_iter_prefix_1753306100_'[0m
‚úÖ [0;32mCache iterate by prefix 'c_iter_prefix_1753306100_' successfully retrieved all expected keys and no extras.[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache delete c_iter_prefix_1753306100_key1
Exit code: 0
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache delete c_iter_prefix_1753306100_key2
Exit code: 0
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --config /tmp/insi-test-cluster/cluster.yaml cache delete c_iter_prefix_1753306100_key3
Exit code: 0

[0;32mAll TKV cache tests completed.[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 17
[0;32mAll tests passed successfully![0m
‚úÖ Success: get-set-delete.sh completed.
üöÄ Running cache-cas-setnx.sh...
insid pid: 2212703
2025-07-23T17:28:21.747-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:28:21.747-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-07-23T17:28:21.749-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:28:21.749-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
2025-07-23T17:28:21.752-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:28:21.752-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-07-23T17:28:23.014-0400 [WARN]  no known peers, aborting election
2025-07-23T17:28:23.334-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-07-23T17:28:23.334-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-07-23T17:28:23.334-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-07-23T17:28:23.343-0400 [INFO]  election won: term=2 tally=1
2025-07-23T17:28:23.343-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-07-23T17:28:23.646-0400 [WARN]  no known peers, aborting election
2025-07-23T17:28:31.755-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-07-23T17:28:31.760-0400 [INFO]  added peer, starting replication: peer=node2
2025-07-23T17:28:31.763-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-07-23T17:28:31.764-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
2025-07-23T17:28:31.764-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-07-23T17:28:31.767-0400 [INFO]  added peer, starting replication: peer=node1
2025-07-23T17:28:31.768-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
2025-07-23T17:28:31.770-0400 [WARN]  failed to get previous log: previous-index=5 last-index=0 error="log not found"
2025-07-23T17:28:31.770-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
set root tracker key internal:api_key_memory_usage: value 0
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-07-23T17:28:31.773-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚úÖ [0;32mServer is online. Proceeding with atomic cache op tests.[0m

[0;34m==== Test: cache setnx ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cache setnx test_cache_setnx_1753306116 value1
Exit code: 0
‚úÖ [0;32mSUCCESS: cache setnx on new key 'test_cache_setnx_1753306116'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cache get test_cache_setnx_1753306116
Exit code: 0
‚úÖ [0;32mValue for 'test_cache_setnx_1753306116' correctly set to 'value1'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cache setnx test_cache_setnx_1753306116 value2
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Conflict/Precondition): cache setnx on existing key 'test_cache_setnx_1753306116'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cache get test_cache_setnx_1753306116
Exit code: 0
‚úÖ [0;32mValue for 'test_cache_setnx_1753306116' remained 'value1' after failed setnx[0m

[0;34m==== Test: cache cas (Compare-And-Swap) ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cache set test_cache_cas_1753306116 initial_cas_value
Exit code: 0
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cache cas nonexistent_test_cache_cas_1753306116 initial_cas_value new_cas_value
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Conflict/Precondition): cas on non-existent key[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cache cas test_cache_cas_1753306116 wrong_cas_value new_cas_value
Exit code: 1
‚úÖ [0;32mSUCCESS (Received Expected Conflict/Precondition): cas with incorrect old value for key 'test_cache_cas_1753306116'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cache get test_cache_cas_1753306116
Exit code: 0
‚úÖ [0;32mValue for 'test_cache_cas_1753306116' remained 'initial_cas_value' after failed cas[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cache cas test_cache_cas_1753306116 initial_cas_value new_cas_value
Exit code: 0
‚úÖ [0;32mSUCCESS: cas with correct old value for key 'test_cache_cas_1753306116'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml cache get test_cache_cas_1753306116
Exit code: 0
‚úÖ [0;32mValue for 'test_cache_cas_1753306116' correctly updated to 'new_cas_value'[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 5
[0;32mAll atomic cache op tests passed successfully![0m
‚úÖ Success: cache-cas-setnx.sh completed.
üöÄ Running blob.sh...
insid pid: 2212939
2025-07-23T17:28:38.132-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:28:38.132-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
2025-07-23T17:28:38.133-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:28:38.133-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-07-23T17:28:38.138-0400 [INFO]  initial configuration: index=0 servers=[]
2025-07-23T17:28:38.138-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-07-23T17:28:39.379-0400 [WARN]  no known peers, aborting election
2025-07-23T17:28:39.770-0400 [WARN]  no known peers, aborting election
2025-07-23T17:28:39.848-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-07-23T17:28:39.848-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-07-23T17:28:39.848-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-07-23T17:28:39.856-0400 [INFO]  election won: term=2 tally=1
2025-07-23T17:28:39.856-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-07-23T17:28:48.145-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
set root tracker key internal:api_key_memory_usage: value 0
2025-07-23T17:28:48.147-0400 [INFO]  added peer, starting replication: peer=node1
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-07-23T17:28:48.150-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-07-23T17:28:48.151-0400 [WARN]  failed to get previous log: previous-index=4 last-index=0 error="log not found"
2025-07-23T17:28:48.151-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-07-23T17:28:48.158-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
2025-07-23T17:28:48.159-0400 [INFO]  added peer, starting replication: peer=node2
set root tracker key internal:api_key_disk_usage: value 0
2025-07-23T17:28:48.163-0400 [WARN]  failed to get previous log: previous-index=6 last-index=0 error="log not found"
2025-07-23T17:28:48.163-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-07-23T17:28:48.182-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
‚ÑπÔ∏è Test directory prepared at /tmp/insic-blob-tests

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml ping 
‚úÖ [0;32mServer is online. Proceeding with blob tests.[0m

[0;34m==== Test: Blob Lifecycle ====[0m
‚ÑπÔ∏è Created test file '/tmp/insic-blob-tests/upload.txt' with SHA256 hash: e5f1dae104445fafb2376cff15b67671c83c67781e51df6d11b7a0baf20d3d90
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob upload test_blob_1753306132_file1.txt /tmp/insic-blob-tests/upload.txt
‚úÖ [0;32mSUCCESS: Upload blob with key 'test_blob_1753306132_file1.txt'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob iterate test_blob_1753306132
‚úÖ [0;32mIterate found blob key 'test_blob_1753306132_file1.txt'[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob download test_blob_1753306132_file1.txt /tmp/insic-blob-tests/download.txt
‚úÖ [0;32mSUCCESS: Download blob with key 'test_blob_1753306132_file1.txt'[0m
‚ÑπÔ∏è Downloaded file hash: e5f1dae104445fafb2376cff15b67671c83c67781e51df6d11b7a0baf20d3d90
‚úÖ [0;32mDownloaded file content matches original[0m

‚ÑπÔ∏è[1;33m Verifying physical blob existence on ALL nodes...[0m
‚ÑπÔ∏è[1;33m > Key: 'test_blob_1753306132_file1.txt', Hash: '22dd929953b677615ae5e8f740ae45443143c14dc4ad0e71803aa5c34a898040', Scope: 'test-cluster-prefix'[0m
‚ÑπÔ∏è[1;33m > Waiting up to 10s for replication to all nodes...[0m
‚úÖ [0;32mVerified blob file exists on all 3 nodes.[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob delete test_blob_1753306132_file1.txt
‚úÖ [0;32mSUCCESS: Delete blob with key 'test_blob_1753306132_file1.txt'[0m
‚úÖ [0;32mSUCCESS (Received Expected Failure): Attempt to download deleted blob 'test_blob_1753306132_file1.txt'[0m

‚ÑπÔ∏è[1;33m Verifying API no longer lists the deleted blob...[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob iterate test_blob_1753306132
‚úÖ [0;32mIterate no longer finds deleted blob key 'test_blob_1753306132_file1.txt'[0m

‚ÑπÔ∏è[1;33m Verifying physical blob deletion on ALL nodes...[0m
‚ö†Ô∏è The application's blob garbage collector runs every 30 seconds.
‚ÑπÔ∏è[1;33m > WAITING 35 SECONDS for the garbage collector and replication...[0m
‚úÖ [0;32mVerified blob file was physically deleted from all 3 nodes.[0m

[0;34m==== Test: Blob Iteration ====[0m
‚ÑπÔ∏è Uploading test blobs...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob upload iteration_test_1753306168/file1.txt /tmp/insic-blob-tests/upload_iter.txt
‚úÖ [0;32mSUCCESS: Upload blob 1 ('iteration_test_1753306168/file1.txt')[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob upload iteration_test_1753306168/file2.txt /tmp/insic-blob-tests/upload_iter.txt
‚úÖ [0;32mSUCCESS: Upload blob 2 ('iteration_test_1753306168/file2.txt')[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob upload iteration_test_1753306168/subdir/file3.txt /tmp/insic-blob-tests/upload_iter.txt
‚úÖ [0;32mSUCCESS: Upload blob 3 ('iteration_test_1753306168/subdir/file3.txt')[0m
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob upload other_prefix/file4.txt /tmp/insic-blob-tests/upload_iter.txt
‚úÖ [0;32mSUCCESS: Upload blob 4 ('other_prefix/file4.txt')[0m

‚ÑπÔ∏è Iterating with prefix 'iteration_test_1753306168'...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob iterate iteration_test_1753306168
‚úÖ [0;32mSUCCESS: Iterate found all 3 expected blobs.[0m
‚úÖ [0;32mSUCCESS: Iterate did not find unexpected blob 'other_prefix/file4.txt'.[0m

‚ÑπÔ∏è Testing iteration with limit...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob iterate iteration_test_1753306168 0 2
‚úÖ [0;32mSUCCESS: Iterate with limit=2 returned 2 keys.[0m

‚ÑπÔ∏è Testing iteration with offset...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob iterate iteration_test_1753306168 2 2
‚úÖ [0;32mSUCCESS: Iterate with offset=2, limit=2 returned 1 key.[0m

‚ÑπÔ∏è Testing iteration with a non-existent prefix...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob iterate nonexistentprefix_12345
‚úÖ [0;32mSUCCESS: Iterate with non-existent prefix correctly reported no keys.[0m

‚ÑπÔ∏è Cleaning up uploaded blobs...
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob delete iteration_test_1753306168/file1.txt
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob delete iteration_test_1753306168/file2.txt
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob delete iteration_test_1753306168/subdir/file3.txt
‚ÑπÔ∏è Running: /tmp/insi-test-cluster/insic --root --config /tmp/insi-test-cluster/cluster.yaml blob delete other_prefix/file4.txt
‚ÑπÔ∏è Cleanup complete.

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 18
[0;32mAll blob tests passed successfully![0m
‚ÑπÔ∏è Test directory cleaned up.
‚úÖ Success: blob.sh completed.
üéâ All tests passed successfully!
