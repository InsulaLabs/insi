üöÄ Running api-keys.sh...
insid pid: 563008
2025-06-21T10:24:46.005-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:24:46.005-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-06-21T10:24:46.009-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:24:46.009-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-06-21T10:24:46.011-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:24:46.011-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-06-21T10:24:47.164-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-06-21T10:24:47.164-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-06-21T10:24:47.164-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-06-21T10:24:47.173-0400 [INFO]  election won: term=2 tally=1
2025-06-21T10:24:47.173-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-06-21T10:24:47.549-0400 [WARN]  no known peers, aborting election
2025-06-21T10:24:47.599-0400 [WARN]  no known peers, aborting election
2025-06-21T10:24:56.011-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-06-21T10:24:56.015-0400 [INFO]  added peer, starting replication: peer=node1
2025-06-21T10:24:56.015-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-06-21T10:24:56.018-0400 [INFO]  added peer, starting replication: peer=node2
2025-06-21T10:24:56.019-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
2025-06-21T10:24:56.020-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-06-21T10:24:56.023-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
2025-06-21T10:24:56.024-0400 [WARN]  failed to get previous log: previous-index=4 last-index=0 error="log not found"
2025-06-21T10:24:56.024-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-06-21T10:24:56.029-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
set root tracker key internal:api_key_memory_usage: value 0
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
‚ÑπÔ∏è Using insic executable: /tmp/insi-test-cluster/insic
‚ÑπÔ∏è Using config: /tmp/insi-test-cluster/cluster.yaml

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚ÑπÔ∏è Attempting to ping server... (will retry up to 15 times)
‚úÖ Server is responsive.
‚úÖ [0;32mSUCCESS: Server Ping (and output contains 'Ping Response:')[0m
‚ÑπÔ∏è Starting TKV API Key operations tests...

[0;34m==== Test: API Key Lifecycle (Add, Verify, Delete) ====[0m
‚ÑπÔ∏è Attempting to add API key: testapikey_1750515900_563117
‚úÖ [0;32mSUCCESS: API add key 'testapikey_1750515900_563117' (and output contains 'API Key:')[0m
‚ÑπÔ∏è Parsed generated key: insi_y2YKhDIm0KI7e0Oo4wpgRSDy4HJnjdbGKEEAMHZrCPiqcfpOqT4fioyerqNb+vOiBDuqyQShC8lcPrt0maxHdaBx012WcuPivd41sFTMpuw/cOwZRxUBjKykcBUoIY/8rLycNQdfOLm+zzUpBPFeA6yMwTM=
‚ÑπÔ∏è Attempting to verify newly created API key: insi_y2YKhDIm0KI7e0Oo4wpgRSDy4HJnjdbGKEEAMHZrCPiqcfpOqT4fioyerqNb+vOiBDuqyQShC8lcPrt0maxHdaBx012WcuPivd41sFTMpuw/cOwZRxUBjKykcBUoIY/8rLycNQdfOLm+zzUpBPFeA6yMwTM=
‚úÖ [0;32mSUCCESS: API verify for new key 'insi_y2YKhDIm0KI7e0Oo4wpgRSDy4HJnjdbGKEEAMHZrCPiqcfpOqT4fioyerqNb+vOiBDuqyQShC8lcPrt0maxHdaBx012WcuPivd41sFTMpuw/cOwZRxUBjKykcBUoIY/8rLycNQdfOLm+zzUpBPFeA6yMwTM=' (and output contains 'API Key Verified Successfully!')[0m
‚ÑπÔ∏è Attempting to delete API key: insi_y2YKhDIm0KI7e0Oo4wpgRSDy4HJnjdbGKEEAMHZrCPiqcfpOqT4fioyerqNb+vOiBDuqyQShC8lcPrt0maxHdaBx012WcuPivd41sFTMpuw/cOwZRxUBjKykcBUoIY/8rLycNQdfOLm+zzUpBPFeA6yMwTM=
‚úÖ [0;32mSUCCESS: API delete for key 'insi_y2YKhDIm0KI7e0Oo4wpgRSDy4HJnjdbGKEEAMHZrCPiqcfpOqT4fioyerqNb+vOiBDuqyQShC8lcPrt0maxHdaBx012WcuPivd41sFTMpuw/cOwZRxUBjKykcBUoIY/8rLycNQdfOLm+zzUpBPFeA6yMwTM=' (and output contains 'OK')[0m
‚ÑπÔ∏è Attempting to verify deleted API key: insi_y2YKhDIm0KI7e0Oo4wpgRSDy4HJnjdbGKEEAMHZrCPiqcfpOqT4fioyerqNb+vOiBDuqyQShC8lcPrt0maxHdaBx012WcuPivd41sFTMpuw/cOwZRxUBjKykcBUoIY/8rLycNQdfOLm+zzUpBPFeA6yMwTM=
‚úÖ [0;32mSUCCESS (Received Expected Error): API verify for deleted key 'insi_y2YKhDIm0KI7e0Oo4wpgRSDy4HJnjdbGKEEAMHZrCPiqcfpOqT4fioyerqNb+vOiBDuqyQShC8lcPrt0maxHdaBx012WcuPivd41sFTMpuw/cOwZRxUBjKykcBUoIY/8rLycNQdfOLm+zzUpBPFeA6yMwTM=' (and output contains 'Verification FAILED')[0m
‚ÑπÔ∏è Attempting to verify random invalid API key: invalidkey_1750515918_563117_random
‚úÖ [0;32mSUCCESS (Received Expected Error): API verify for random key 'invalidkey_1750515918_563117_random' (and output contains 'Verification FAILED')[0m
‚ÑπÔ∏è Attempting to delete random invalid API key: invalidkey_1750515918_563117_random
‚úÖ [0;32mSUCCESS (Received Expected Error): API delete for non-existent key 'invalidkey_1750515918_563117_random' (and output contains 'Error')[0m

[0;34m==== Test: Admin Privileges (requires --root) ====[0m
‚ÑπÔ∏è Attempting to add an API key without --root (should fail)
‚úÖ [0;32mSUCCESS (Received Expected Error): API add without --root (and output contains 'requires --root flag')[0m
‚ÑπÔ∏è Adding a key with --root to test deletion
‚úÖ [0;32mSUCCESS: Created temporary key for delete test: insi_gJ2fuddUMRDp8GQezGC7Dx9b5ePRDfjOFVFjxHzDcpCdpa/HFeI3JYovRg1KLsRS0uGpAI47fDpxByugHUlU8UaLrxhcrZ83+T4hLTB3RThkB5rYRsnzs/IiBzneZ262hLx1HgMZlxqV1fCjxQdwjJm9byk=[0m
‚ÑπÔ∏è Attempting to delete an API key without --root (should fail)
‚úÖ [0;32mSUCCESS (Received Expected Error): API delete without --root (and output contains 'requires --root flag')[0m
‚ÑπÔ∏è Cleaning up key with --root
‚úÖ [0;32mSUCCESS: API delete with --root (cleanup) (and output contains 'OK')[0m

[0;34m==== Test: API Key Limits (Get, Set) ====[0m
‚ÑπÔ∏è Attempting to add API key for limits test: testlimitskey_1750515923_563117
‚úÖ [0;32mSUCCESS: API add key 'testlimitskey_1750515923_563117' for limits test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Parsed generated key for limits test: insi_XZYL73JsMly1tQIsFI2aVf7S1b70aTTcV3hIDdpZpBaxYgNT0sP4cXLUxTTjFweC6ueje/peCRgNauME1SSEIfx1zAZSVqSECbywL9JnaNBFl+01kk598ZZUNawSmM4TjRMMEbXhw0ZFadxmFF96uy0rD1k=
‚ÑπÔ∏è Attempting to get initial limits for key: insi_XZYL73JsMly1tQIsFI2aVf7S1b70aTTcV3hIDdpZpBaxYgNT0sP4cXLUxTTjFweC6ueje/peCRgNauME1SSEIfx1zAZSVqSECbywL9JnaNBFl+01kk598ZZUNawSmM4TjRMMEbXhw0ZFadxmFF96uy0rD1k=
‚úÖ [0;32mSUCCESS: Get initial limits for new key (and output contains 'Maximum Limits')[0m
‚úÖ [0;32mSUCCESS: Check initial current usage is zero (and output contains 'Bytes on Disk:     0')[0m
‚ÑπÔ∏è Attempting to set limits for key: insi_XZYL73JsMly1tQIsFI2aVf7S1b70aTTcV3hIDdpZpBaxYgNT0sP4cXLUxTTjFweC6ueje/peCRgNauME1SSEIfx1zAZSVqSECbywL9JnaNBFl+01kk598ZZUNawSmM4TjRMMEbXhw0ZFadxmFF96uy0rD1k=
‚úÖ [0;32mSUCCESS: Set new limits for key 'insi_XZYL73JsMly1tQIsFI2aVf7S1b70aTTcV3hIDdpZpBaxYgNT0sP4cXLUxTTjFweC6ueje/peCRgNauME1SSEIfx1zAZSVqSECbywL9JnaNBFl+01kk598ZZUNawSmM4TjRMMEbXhw0ZFadxmFF96uy0rD1k=' (and output contains 'OK')[0m
‚ÑπÔ∏è Attempting to get updated limits for key: insi_XZYL73JsMly1tQIsFI2aVf7S1b70aTTcV3hIDdpZpBaxYgNT0sP4cXLUxTTjFweC6ueje/peCRgNauME1SSEIfx1zAZSVqSECbywL9JnaNBFl+01kk598ZZUNawSmM4TjRMMEbXhw0ZFadxmFF96uy0rD1k=
‚úÖ [0;32mSUCCESS: Get updated limits for key 'insi_XZYL73JsMly1tQIsFI2aVf7S1b70aTTcV3hIDdpZpBaxYgNT0sP4cXLUxTTjFweC6ueje/peCRgNauME1SSEIfx1zAZSVqSECbywL9JnaNBFl+01kk598ZZUNawSmM4TjRMMEbXhw0ZFadxmFF96uy0rD1k=' (and output contains 'Maximum Limits')[0m
‚úÖ [0;32mSUCCESS: Verify updated disk limit (and output contains 'Bytes on Disk:     123456789')[0m
‚úÖ [0;32mSUCCESS: Verify updated memory limit (and output contains 'Bytes in Memory:   987654321')[0m
‚úÖ [0;32mSUCCESS: Verify updated events limit (and output contains 'Events per Second: 500')[0m
‚úÖ [0;32mSUCCESS: Verify updated subscribers limit (and output contains 'Subscribers:       50')[0m
‚ÑπÔ∏è Attempting to delete API key used for limits test: insi_XZYL73JsMly1tQIsFI2aVf7S1b70aTTcV3hIDdpZpBaxYgNT0sP4cXLUxTTjFweC6ueje/peCRgNauME1SSEIfx1zAZSVqSECbywL9JnaNBFl+01kk598ZZUNawSmM4TjRMMEbXhw0ZFadxmFF96uy0rD1k=
‚úÖ [0;32mSUCCESS: API delete for key 'insi_XZYL73JsMly1tQIsFI2aVf7S1b70aTTcV3hIDdpZpBaxYgNT0sP4cXLUxTTjFweC6ueje/peCRgNauME1SSEIfx1zAZSVqSECbywL9JnaNBFl+01kk598ZZUNawSmM4TjRMMEbXhw0ZFadxmFF96uy0rD1k=' after limits test (and output contains 'OK')[0m

[0;34m==== Test: API Get Another Key's Limits (as root) ====[0m
‚ÑπÔ∏è Attempting to add API key for get-limits test: testgetlimits_1750515933_563117
‚úÖ [0;32mSUCCESS: API add key 'testgetlimits_1750515933_563117' for get-limits test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Parsed generated key for get-limits test: insi_17+OqpEXHucZ6JYuQNDvZXE1HzwYuYNfQVC4of5WF6vR2xV2hcdZz2jjkXeW62auumbsMmllZCbYrEKaTflRKwLTtBVld18dCK5Pmp6AXLj1M9rqq+b2s+EQTsWqzg/qGXKcxIXGCXVyg4+sLkgBXwJiY3Y=
‚ÑπÔ∏è Attempting to set limits for key: insi_17+OqpEXHucZ6JYuQNDvZXE1HzwYuYNfQVC4of5WF6vR2xV2hcdZz2jjkXeW62auumbsMmllZCbYrEKaTflRKwLTtBVld18dCK5Pmp6AXLj1M9rqq+b2s+EQTsWqzg/qGXKcxIXGCXVyg4+sLkgBXwJiY3Y=
‚úÖ [0;32mSUCCESS: Set new limits for key 'insi_17+OqpEXHucZ6JYuQNDvZXE1HzwYuYNfQVC4of5WF6vR2xV2hcdZz2jjkXeW62auumbsMmllZCbYrEKaTflRKwLTtBVld18dCK5Pmp6AXLj1M9rqq+b2s+EQTsWqzg/qGXKcxIXGCXVyg4+sLkgBXwJiY3Y=' (and output contains 'OK')[0m
‚ÑπÔ∏è Attempting to get specific limits for key 'insi_17+OqpEXHucZ6JYuQNDvZXE1HzwYuYNfQVC4of5WF6vR2xV2hcdZz2jjkXeW62auumbsMmllZCbYrEKaTflRKwLTtBVld18dCK5Pmp6AXLj1M9rqq+b2s+EQTsWqzg/qGXKcxIXGCXVyg4+sLkgBXwJiY3Y=' using root
‚úÖ [0;32mSUCCESS: Get specific limits for key 'insi_17+OqpEXHucZ6JYuQNDvZXE1HzwYuYNfQVC4of5WF6vR2xV2hcdZz2jjkXeW62auumbsMmllZCbYrEKaTflRKwLTtBVld18dCK5Pmp6AXLj1M9rqq+b2s+EQTsWqzg/qGXKcxIXGCXVyg4+sLkgBXwJiY3Y=' (and output contains 'Maximum Limits')[0m
‚úÖ [0;32mSUCCESS: Verify specific disk limit (and output contains 'Bytes on Disk:     555666777')[0m
‚úÖ [0;32mSUCCESS: Verify specific memory limit (and output contains 'Bytes in Memory:   111222333')[0m
‚úÖ [0;32mSUCCESS: Verify specific events limit (and output contains 'Events per Second: 250')[0m
‚úÖ [0;32mSUCCESS: Verify specific subscribers limit (and output contains 'Subscribers:       25')[0m
‚ÑπÔ∏è Attempting to get specific limits for key 'insi_17+OqpEXHucZ6JYuQNDvZXE1HzwYuYNfQVC4of5WF6vR2xV2hcdZz2jjkXeW62auumbsMmllZCbYrEKaTflRKwLTtBVld18dCK5Pmp6AXLj1M9rqq+b2s+EQTsWqzg/qGXKcxIXGCXVyg4+sLkgBXwJiY3Y=' WITHOUT root
‚úÖ [0;32mSUCCESS (Received Expected Error): Get specific limits without root (and output contains 'requires --root flag')[0m
‚ÑπÔ∏è Attempting to delete API key used for get-limits test: insi_17+OqpEXHucZ6JYuQNDvZXE1HzwYuYNfQVC4of5WF6vR2xV2hcdZz2jjkXeW62auumbsMmllZCbYrEKaTflRKwLTtBVld18dCK5Pmp6AXLj1M9rqq+b2s+EQTsWqzg/qGXKcxIXGCXVyg4+sLkgBXwJiY3Y=
‚úÖ [0;32mSUCCESS: API delete for key 'insi_17+OqpEXHucZ6JYuQNDvZXE1HzwYuYNfQVC4of5WF6vR2xV2hcdZz2jjkXeW62auumbsMmllZCbYrEKaTflRKwLTtBVld18dCK5Pmp6AXLj1M9rqq+b2s+EQTsWqzg/qGXKcxIXGCXVyg4+sLkgBXwJiY3Y=' after get-limits test (and output contains 'OK')[0m

[0;34m==== Test: API Key Aliases (Add, List, Use, Delete, Data Scope, Chaining) ====[0m
‚ÑπÔ∏è Creating primary key 'primary_for_alias_1750515943_563117' for alias test
‚úÖ [0;32mSUCCESS: Create primary key for alias test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Parsed primary key: insi_z89Kght9nYVzRfok3Xc8B5ydZjtW+4V0D1Ak+2qN30AgTiwaCvJIZL+r19meXnk0AdSTBpYuck86eI3BldhoHSGGYK1EcaNmrrVsbnws2B+G6DoGVpZeisW63QcKYLNl+raCWOa6HnrnY3q6BobX1cmRIRc=
‚ÑπÔ∏è Setting a value with the primary key 'insi_z89Kght9nYVzRfok3Xc8B5ydZjtW+4V0D1Ak+2qN30AgTiwaCvJIZL+r19meXnk0AdSTBpYuck86eI3BldhoHSGGYK1EcaNmrrVsbnws2B+G6DoGVpZeisW63QcKYLNl+raCWOa6HnrnY3q6BobX1cmRIRc=' to test data scope inheritance
‚úÖ [0;32mSUCCESS: Set value with primary key (and output contains 'OK')[0m
‚ÑπÔ∏è Creating first alias for key insi_z89Kght9nYVzRfok3Xc8B5ydZjtW+4V0D1Ak+2qN30AgTiwaCvJIZL+r19meXnk0AdSTBpYuck86eI3BldhoHSGGYK1EcaNmrrVsbnws2B+G6DoGVpZeisW63QcKYLNl+raCWOa6HnrnY3q6BobX1cmRIRc=
‚úÖ [0;32mSUCCESS: Create first alias (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Parsed alias 1 key: insi_sCbK4aysA3SkcH3GQMoteslEGiHb+LT1h5fY2ro77OvT4AeuiKBsFgSlRDtV/aWrRLDUiDJsjRqAhZ9aT7vmyC09nyCaE1bwcl+rt+IBxTek0iP6m2pZlx7twV0vX1KdAxdxFRgMkCdjC/LazcEPHibcP2PprcJW4WhGkNtZ3gpo7MCn
‚ÑπÔ∏è Getting value with the alias key 'insi_sCbK4aysA3SkcH3GQMoteslEGiHb+LT1h5fY2ro77OvT4AeuiKBsFgSlRDtV/aWrRLDUiDJsjRqAhZ9aT7vmyC09nyCaE1bwcl+rt+IBxTek0iP6m2pZlx7twV0vX1KdAxdxFRgMkCdjC/LazcEPHibcP2PprcJW4WhGkNtZ3gpo7MCn' to test data scope
‚úÖ [0;32mSUCCESS: Get value with alias key (and output contains 'alias-test-value')[0m
‚ÑπÔ∏è Attempting to create an alias from another alias (should fail)
‚úÖ [0;32mSUCCESS (Received Expected Error): Create alias from alias key (and output contains 'Cannot create an alias from an alias key')[0m
‚ÑπÔ∏è Setting a value with the alias key 'insi_sCbK4aysA3SkcH3GQMoteslEGiHb+LT1h5fY2ro77OvT4AeuiKBsFgSlRDtV/aWrRLDUiDJsjRqAhZ9aT7vmyC09nyCaE1bwcl+rt+IBxTek0iP6m2pZlx7twV0vX1KdAxdxFRgMkCdjC/LazcEPHibcP2PprcJW4WhGkNtZ3gpo7MCn' to test limit inheritance
‚úÖ [0;32mSUCCESS: Set value with alias key (and output contains 'OK')[0m
‚ÑπÔ∏è Getting value set by alias using the primary key 'insi_z89Kght9nYVzRfok3Xc8B5ydZjtW+4V0D1Ak+2qN30AgTiwaCvJIZL+r19meXnk0AdSTBpYuck86eI3BldhoHSGGYK1EcaNmrrVsbnws2B+G6DoGVpZeisW63QcKYLNl+raCWOa6HnrnY3q6BobX1cmRIRc='
‚úÖ [0;32mSUCCESS: Get value (set by alias) with primary key (and output contains 'this-should-work')[0m
‚ÑπÔ∏è Creating second alias for key insi_z89Kght9nYVzRfok3Xc8B5ydZjtW+4V0D1Ak+2qN30AgTiwaCvJIZL+r19meXnk0AdSTBpYuck86eI3BldhoHSGGYK1EcaNmrrVsbnws2B+G6DoGVpZeisW63QcKYLNl+raCWOa6HnrnY3q6BobX1cmRIRc=
‚úÖ [0;32mSUCCESS: Create second alias (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Parsed alias 2 key: insi_pRd7+TVvtZnQZu7ctW8Q2Z+752PHHVV0B9EIMOzivsS2kS6KemcPediWiiULS2rYixU+sIXXB/hs6bjKk6J9oVwj93SRRZaVlYt91lW4vJayomyjMQFFhk1yVPYx3ft2wVjSLvGu7BGXebnKchZTFfgCH+ebNQKfZ0h5VuItv4aLk+Tg
‚ÑπÔ∏è Listing aliases for primary key insi_z89Kght9nYVzRfok3Xc8B5ydZjtW+4V0D1Ak+2qN30AgTiwaCvJIZL+r19meXnk0AdSTBpYuck86eI3BldhoHSGGYK1EcaNmrrVsbnws2B+G6DoGVpZeisW63QcKYLNl+raCWOa6HnrnY3q6BobX1cmRIRc=
‚úÖ [0;32mSUCCESS: List aliases (and output contains 'insi_sCbK4aysA3SkcH3GQMoteslEGiHb+LT1h5fY2ro77OvT4AeuiKBsFgSlRDtV/aWrRLDUiDJsjRqAhZ9aT7vmyC09nyCaE1bwcl+rt+IBxTek0iP6m2pZlx7twV0vX1KdAxdxFRgMkCdjC/LazcEPHibcP2PprcJW4WhGkNtZ3gpo7MCn')[0m
‚úÖ [0;32mSUCCESS: Check for second alias in list (and output contains 'insi_pRd7+TVvtZnQZu7ctW8Q2Z+752PHHVV0B9EIMOzivsS2kS6KemcPediWiiULS2rYixU+sIXXB/hs6bjKk6J9oVwj93SRRZaVlYt91lW4vJayomyjMQFFhk1yVPYx3ft2wVjSLvGu7BGXebnKchZTFfgCH+ebNQKfZ0h5VuItv4aLk+Tg')[0m
‚ÑπÔ∏è Verifying first alias key via ping: insi_sCbK4aysA3SkcH3GQMoteslEGiHb+LT1h5fY2ro77OvT4AeuiKBsFgSlRDtV/aWrRLDUiDJsjRqAhZ9aT7vmyC09nyCaE1bwcl+rt+IBxTek0iP6m2pZlx7twV0vX1KdAxdxFRgMkCdjC/LazcEPHibcP2PprcJW4WhGkNtZ3gpo7MCn
‚úÖ [0;32mSUCCESS: Ping with first alias (and output contains 'Ping Response:')[0m
‚ÑπÔ∏è Verifying second alias key via ping: insi_pRd7+TVvtZnQZu7ctW8Q2Z+752PHHVV0B9EIMOzivsS2kS6KemcPediWiiULS2rYixU+sIXXB/hs6bjKk6J9oVwj93SRRZaVlYt91lW4vJayomyjMQFFhk1yVPYx3ft2wVjSLvGu7BGXebnKchZTFfgCH+ebNQKfZ0h5VuItv4aLk+Tg
‚úÖ [0;32mSUCCESS: Ping with second alias (and output contains 'Ping Response:')[0m
‚ÑπÔ∏è Deleting first alias key: insi_sCbK4aysA3SkcH3GQMoteslEGiHb+LT1h5fY2ro77OvT4AeuiKBsFgSlRDtV/aWrRLDUiDJsjRqAhZ9aT7vmyC09nyCaE1bwcl+rt+IBxTek0iP6m2pZlx7twV0vX1KdAxdxFRgMkCdjC/LazcEPHibcP2PprcJW4WhGkNtZ3gpo7MCn
‚úÖ [0;32mSUCCESS: Delete first alias (and output contains 'OK')[0m
‚ÑπÔ∏è Verifying that deleted alias is invalid: insi_sCbK4aysA3SkcH3GQMoteslEGiHb+LT1h5fY2ro77OvT4AeuiKBsFgSlRDtV/aWrRLDUiDJsjRqAhZ9aT7vmyC09nyCaE1bwcl+rt+IBxTek0iP6m2pZlx7twV0vX1KdAxdxFRgMkCdjC/LazcEPHibcP2PprcJW4WhGkNtZ3gpo7MCn
‚úÖ [0;32mSUCCESS (Received Expected Error): Verify deleted alias (and output contains 'Verification FAILED')[0m
‚ÑπÔ∏è Verifying the second alias is the only one remaining in the list
‚úÖ [0;32mSUCCESS: List aliases after delete (and output contains 'insi_pRd7+TVvtZnQZu7ctW8Q2Z+752PHHVV0B9EIMOzivsS2kS6KemcPediWiiULS2rYixU+sIXXB/hs6bjKk6J9oVwj93SRRZaVlYt91lW4vJayomyjMQFFhk1yVPYx3ft2wVjSLvGu7BGXebnKchZTFfgCH+ebNQKfZ0h5VuItv4aLk+Tg')[0m
‚úÖ [0;32mSUCCESS: Deleted alias 'insi_sCbK4aysA3SkcH3GQMoteslEGiHb+LT1h5fY2ro77OvT4AeuiKBsFgSlRDtV/aWrRLDUiDJsjRqAhZ9aT7vmyC09nyCaE1bwcl+rt+IBxTek0iP6m2pZlx7twV0vX1KdAxdxFRgMkCdjC/LazcEPHibcP2PprcJW4WhGkNtZ3gpo7MCn' was not found in list after deletion.[0m
‚ÑπÔ∏è Verifying second alias still works after deleting first: insi_pRd7+TVvtZnQZu7ctW8Q2Z+752PHHVV0B9EIMOzivsS2kS6KemcPediWiiULS2rYixU+sIXXB/hs6bjKk6J9oVwj93SRRZaVlYt91lW4vJayomyjMQFFhk1yVPYx3ft2wVjSLvGu7BGXebnKchZTFfgCH+ebNQKfZ0h5VuItv4aLk+Tg
‚úÖ [0;32mSUCCESS: Ping with second alias after deleting first (and output contains 'Ping Response:')[0m
‚ÑπÔ∏è Cleanup: Deleting primary key insi_z89Kght9nYVzRfok3Xc8B5ydZjtW+4V0D1Ak+2qN30AgTiwaCvJIZL+r19meXnk0AdSTBpYuck86eI3BldhoHSGGYK1EcaNmrrVsbnws2B+G6DoGVpZeisW63QcKYLNl+raCWOa6HnrnY3q6BobX1cmRIRc=
‚úÖ [0;32mSUCCESS: Delete primary key for cleanup (and output contains 'OK')[0m

[0;34m==== Test: API Key Alias Limit (Max 16) ====[0m
‚ÑπÔ∏è Creating primary key 'primary_for_alias_limit_1750515966_563117' for alias limit test
‚úÖ [0;32mSUCCESS: Create primary key for alias limit test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Creating 16 aliases (should succeed)
‚ÑπÔ∏è Creating alias #1...
‚úÖ [0;32mSUCCESS: Create alias #1 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #2...
‚úÖ [0;32mSUCCESS: Create alias #2 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #3...
‚úÖ [0;32mSUCCESS: Create alias #3 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #4...
‚úÖ [0;32mSUCCESS: Create alias #4 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #5...
‚úÖ [0;32mSUCCESS: Create alias #5 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #6...
‚úÖ [0;32mSUCCESS: Create alias #6 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #7...
‚úÖ [0;32mSUCCESS: Create alias #7 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #8...
‚úÖ [0;32mSUCCESS: Create alias #8 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #9...
‚úÖ [0;32mSUCCESS: Create alias #9 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #10...
‚úÖ [0;32mSUCCESS: Create alias #10 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #11...
‚úÖ [0;32mSUCCESS: Create alias #11 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #12...
‚úÖ [0;32mSUCCESS: Create alias #12 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #13...
‚úÖ [0;32mSUCCESS: Create alias #13 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #14...
‚úÖ [0;32mSUCCESS: Create alias #14 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #15...
‚úÖ [0;32mSUCCESS: Create alias #15 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Creating alias #16...
‚úÖ [0;32mSUCCESS: Create alias #16 (and output contains 'Alias Key:')[0m
‚ÑπÔ∏è Attempting to create 17th alias (should fail)
‚úÖ [0;32mSUCCESS (Received Expected Error): Create 17th alias (and output contains 'Alias limit of 16 reached')[0m
‚ÑπÔ∏è Cleanup: Deleting primary key for alias limit test: insi_rwjDjJdEr522kREuzRgV/BeR/wXUveRTFRYaTRe47pf/8EQj3yTgnjkYAFZU1Jr2yEPbS96Fu/Xm3dU7CS5YBaQ2rBJMuK8qgyJ+AXdKvsguqp6vibiolboIEl4FEVFzHiuGNASzjTmCZcQ+MZw4M/Qk7uA=
‚úÖ [0;32mSUCCESS: Delete primary key for alias limit cleanup (and output contains 'OK')[0m

[0;34m==== Test: Alias Deletion Security ====[0m
‚ÑπÔ∏è Creating primary key A
‚ÑπÔ∏è Creating primary key B
‚ÑπÔ∏è Creating alias A1 for key A
‚ÑπÔ∏è Attempting to delete alias A1 using its own key (should fail)
‚úÖ [0;32mSUCCESS (Received Expected Error): Delete alias with its own key (and output contains 'an alias key cannot be used to delete an alias')[0m
‚ÑπÔ∏è Attempting to delete alias A1 using unrelated key B (should fail)
‚úÖ [0;32mSUCCESS (Received Expected Error): Delete alias with unrelated key (and output contains 'you can only delete aliases belonging to the authenticated key')[0m
‚ÑπÔ∏è Attempting to delete non-existent alias 'alias_nonexistent_1750515977_563117' with key A (should fail)
‚úÖ [0;32mSUCCESS (Received Expected Error): Delete non-existent alias (and output contains 'not found')[0m
‚ÑπÔ∏è Cleanup for alias security test

[0;34m==== Test: Root Key Cannot Create Alias ====[0m
‚ÑπÔ∏è Attempting to create an alias using the system root key (should fail)
‚úÖ [0;32mSUCCESS (Received Expected Error): Create alias with root key (and output contains 'Cannot set alias for root key')[0m

[0;34m==== Test: Alias Shares Parent's Resource Limits ====[0m
‚ÑπÔ∏è Creating primary key 'primary_for_limit_share_1750515977_563117' for limit sharing test
‚ÑπÔ∏è Setting disk limit for 'insi_dawBKQNo6S52VwQudQUhEhRNNBtlE/xfSZmiqfriotcx2VDW6CJePRNam729V080Ljlev9LzXFPgJhifrcO0NeDNMsC1QueWQpIPG0g4a/GhepItCSCUHpqfFFdvod51Pf84OvMMcXhAfn9e5fwbgbGT/Mg=' to 50 bytes
‚ÑπÔ∏è Creating alias for the limit-restricted key
‚ÑπÔ∏è Created test file '/tmp/insi_limit_test_blob.txt' of size 66 bytes
‚ÑπÔ∏è Attempting to upload blob with alias key (should fail due to limit)
‚úÖ [0;32mSUCCESS (Received Expected Error): Blob upload with alias exceeds disk limit (and output contains 'exceeded')[0m
‚ÑπÔ∏è Attempting to upload blob with primary key (should also fail)
‚úÖ [0;32mSUCCESS (Received Expected Error): Blob upload with primary key exceeds disk limit (and output contains 'exceeded')[0m
‚ÑπÔ∏è Cleanup for shared limits test

[0;34m==== Test: Multi-Alias Data Scope ====[0m
‚ÑπÔ∏è Creating primary key 'primary_for_multi_alias_1750515983_563117' for multi-alias test
‚úÖ [0;32mSUCCESS: Create primary key for multi-alias test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Creating 3 aliases for key insi_Rfqa5S0MHz8GBzPJbRjAuPcTAXxgIwZd5bUbb7IDgztA1azbJkXDKc91IxWDIXWJPLrAE4RFuzZyhu65a4+gtyiqSkqrD6KwEQ3yyfbbdWUaBKVUBEryqSCf/n8NiAY3EItBg05ze6gmJCujjd6LUW6WOwQ=
‚ÑπÔ∏è  - Alias 1: insi_GwmTC/cPJP7l0XJ1fAz64EO2kdgeZxoroMtujsnyHvjfvlSwm/cV2172CIIkNKpdO16ETfuO1yKoYN3W/DgIeJQFjKuifpn0x3LmFQSccKqGbj+1Xto3PJMtbnUQbKK2MN+F5MM8MpeZe6o3wZGYfFrp7LyDPG2qBYO9z6EpFq/lvtkr
‚ÑπÔ∏è  - Alias 2: insi_jcK1Dj0fOGKCR0jZCK+Mzh4V1uGdH8stDkwL/005mLWtui8YMaA0ARwhJwbLhVtXwzreTTaTBbna0okSmj7AVoc5jft/weNezmKg2TivL2eOCh92xXWM9LNCPDv2ZQC9XmqjX5NuHbm1RMkTH1aNBEO9juhbwOeuLBfB/aIxDv6VAPch
‚ÑπÔ∏è  - Alias 3: insi_DngD4EMydkoDlctDr+9fuK0JtYAD9qUAJGlHVxsG+g0WemoBUrFwZ2WjCh/T0TeL16cLfAEAulGiC5n4Vvce3QzRRNN81wzj9b0VSyo3OKIyHibON9dta8+KU33BxZ2BuqktpcgylcIWvDt374KW0UBz+UUnbScCCRtnr2s2DFx+Z4hq
‚ÑπÔ∏è Using Alias 1 to set 'multi_alias_key' to 'value_from_alias1'
‚úÖ [0;32mSUCCESS: Set value with alias 1 (and output contains 'OK')[0m
‚ÑπÔ∏è Using Alias 2 to get 'multi_alias_key'
‚úÖ [0;32mSUCCESS: Get value with alias 2 (and output contains 'value_from_alias1')[0m
‚ÑπÔ∏è Using Alias 3 to update 'multi_alias_key' to 'updated_by_alias3'
‚úÖ [0;32mSUCCESS: Update value with alias 3 (and output contains 'OK')[0m
‚ÑπÔ∏è Using primary key to confirm final value of 'multi_alias_key'
‚úÖ [0;32mSUCCESS: Confirm updated value with primary key (and output contains 'updated_by_alias3')[0m
‚ÑπÔ∏è Cleanup: Deleting primary key for multi-alias test: insi_Rfqa5S0MHz8GBzPJbRjAuPcTAXxgIwZd5bUbb7IDgztA1azbJkXDKc91IxWDIXWJPLrAE4RFuzZyhu65a4+gtyiqSkqrD6KwEQ3yyfbbdWUaBKVUBEryqSCf/n8NiAY3EItBg05ze6gmJCujjd6LUW6WOwQ=
‚úÖ [0;32mSUCCESS: Delete primary key for multi-alias cleanup (and output contains 'OK')[0m

[0;34m==== Test: Alias Cleanup on Parent Key Deletion ====[0m
‚ÑπÔ∏è Creating primary key 'primary_for_cleanup_test_1750515988_563117' for cleanup test
‚úÖ [0;32mSUCCESS: Create primary key for cleanup test (and output contains 'API Key:')[0m
‚ÑπÔ∏è Parsed primary key for cleanup test: insi_574vvntKnZROfwCWciAhVUMJ8vZv61D1BaBY/jUOo8EZ/jDq3coKalFdbe0KPw3/VKswDRcrOgw0QVzHv+uX+yb4o6a5tAwvN92yMYj7WWC/R3sqZ3HOh6uY0BAXyyW3W0A4K2+e4F19w3UxWV12/X0zvmA=
‚ÑπÔ∏è Creating 3 aliases for key insi_574vvntKnZROfwCWciAhVUMJ8vZv61D1BaBY/jUOo8EZ/jDq3coKalFdbe0KPw3/VKswDRcrOgw0QVzHv+uX+yb4o6a5tAwvN92yMYj7WWC/R3sqZ3HOh6uY0BAXyyW3W0A4K2+e4F19w3UxWV12/X0zvmA=
‚ÑπÔ∏è  - Alias 1: insi_RBAIuxQumc91Iai6ln/EWflK3syZfRxu7YsFeZwqZzOm8GB3ZYfS9TBEZP9Vfy+gupvZdCNHG0QvB2+/qtvFOq1k0jgCtBMJinDk+3QM1kqnY6T6/yAbiBFSnhWGERAlGd07AAQFcIayH0ZYPg8+L9Tk2Ms+xOHng3GVdEnqEQSNHB1H
‚ÑπÔ∏è  - Alias 2: insi_M7pDOF/qZrROrNx8is7va45XgcxkUj2678vz8l8PBKBNfqiGMPSAM58TSdYaCYNOoqbwi7YwyJDz+9J2QxHmMrOkzfMCzIubydc52uL9mRrEr3ZWGZvItPY8PODO46Td479mITJpZVekLcHr1+W8ne2GQMLhJfUF0GWicoRfa4l+1Q3M
‚ÑπÔ∏è  - Alias 3: insi_J6t/iQ4WIWXxGOgtEf/4cXfECcL+jKtwg8VqDuYO4kG3HTzkkgfjy9/ffPuNrV3ZNm+VSybIt9LcDZJF7hJLAf3YyDkTF0mE6CDIc+xepSjnDknGY8DplqYEYx3cBv1+kWHf8PiTLlLo8g3iDy45061N0V/WG4CcvXrOfqHiszkhuWdn
‚ÑπÔ∏è Deleting primary key 'insi_574vvntKnZROfwCWciAhVUMJ8vZv61D1BaBY/jUOo8EZ/jDq3coKalFdbe0KPw3/VKswDRcrOgw0QVzHv+uX+yb4o6a5tAwvN92yMYj7WWC/R3sqZ3HOh6uY0BAXyyW3W0A4K2+e4F19w3UxWV12/X0zvmA=' to trigger alias cleanup
‚úÖ [0;32mSUCCESS: Delete primary key to trigger cleanup (and output contains 'OK')[0m
‚ÑπÔ∏è Waiting 45 seconds for tombstone runner to clean up aliases...
‚ÑπÔ∏è Verifying all aliases are now invalid
‚úÖ [0;32mSUCCESS (Received Expected Error): Verify alias 1 is invalid after parent deletion (and output contains 'Verification FAILED')[0m
‚úÖ [0;32mSUCCESS (Received Expected Error): Verify alias 2 is invalid after parent deletion (and output contains 'Verification FAILED')[0m
‚úÖ [0;32mSUCCESS (Received Expected Error): Verify alias 3 is invalid after parent deletion (and output contains 'Verification FAILED')[0m

[0;32mAll TKV API Key operations tests completed.[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 84
[0;32mAll API Key tests passed successfully![0m
‚úÖ Success: api-keys.sh completed.
üöÄ Running crud-iter.sh...
insid pid: 564567
2025-06-21T10:27:19.083-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:27:19.083-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
2025-06-21T10:27:19.084-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:27:19.084-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-06-21T10:27:19.087-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:27:19.087-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-06-21T10:27:20.112-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-06-21T10:27:20.112-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-06-21T10:27:20.112-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-06-21T10:27:20.119-0400 [INFO]  election won: term=2 tally=1
2025-06-21T10:27:20.119-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-06-21T10:27:20.292-0400 [WARN]  no known peers, aborting election
2025-06-21T10:27:20.519-0400 [WARN]  no known peers, aborting election
2025-06-21T10:27:29.098-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
set root tracker key internal:api_key_memory_usage: value 0
2025-06-21T10:27:29.100-0400 [INFO]  added peer, starting replication: peer=node2
2025-06-21T10:27:29.100-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-06-21T10:27:29.103-0400 [INFO]  added peer, starting replication: peer=node1
2025-06-21T10:27:29.104-0400 [WARN]  failed to get previous log: previous-index=4 last-index=0 error="log not found"
2025-06-21T10:27:29.104-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-06-21T10:27:29.107-0400 [WARN]  failed to get previous log: previous-index=5 last-index=0 error="log not found"
2025-06-21T10:27:29.107-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-06-21T10:27:29.109-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
2025-06-21T10:27:29.115-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
‚ÑπÔ∏è Using config: /tmp/insi-test-cluster/cluster.yaml

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚úÖ [0;32mServer is online. Proceeding with tests.[0m
‚ÑπÔ∏è Starting TKV data tests with insic: /tmp/insi-test-cluster/insic
‚ÑπÔ∏è Using config: /tmp/insi-test-cluster/cluster.yaml

[0;34m==== Test: Set and Get ====[0m
‚úÖ [0;32mSUCCESS: Set key 'testkey_sg_1750516054' to 'testvalue_sg_1750516054'[0m
   Output: OK
‚úÖ [0;32mSUCCESS: Get key 'testkey_sg_1750516054'[0m
   Output: testvalue_sg_1750516054
‚úÖ [0;32mValue for 'testkey_sg_1750516054' matches![0m

[0;34m==== Test: Get Non-Existent Key ====[0m
‚úÖ [0;32mSUCCESS (Received Expected Error): Get non-existent key 'nonexistentkey_1750516054'[0m
   Output contains: Error: Key 'nonexistentkey_1750516054' not found.
‚úÖ [0;32mCorrectly received an error message for non-existent key.[0m

[0;34m==== Test: Set, Delete, and Get ====[0m
‚úÖ [0;32mSUCCESS: Set key 'testkey_del_1750516054' for deletion test[0m
   Output: OK
‚úÖ [0;32mSUCCESS: Delete key 'testkey_del_1750516054'[0m
   Output: OK
‚úÖ [0;32mSUCCESS (Received Expected Error): Get deleted key 'testkey_del_1750516054'[0m
   Output contains: Error: Key 'testkey_del_1750516054' not found.

[0;34m==== Test: Iterate by Prefix ====[0m
‚úÖ [0;32mSUCCESS: Set key 'iter_prefix_1750516054_key1' for iteration[0m
‚úÖ [0;32mSUCCESS: Set key 'iter_prefix_1750516054_key2' for iteration[0m
‚úÖ [0;32mSUCCESS: Set key 'iter_prefix_1750516054_key3' for iteration[0m
‚úÖ [0;32mSUCCESS: Iterate by prefix 'iter_prefix_1750516054_' (expecting keys)[0m
   Output: iter_prefix_1750516054_key1
iter_prefix_1750516054_key2
iter_prefix_1750516054_key3
‚úÖ [0;32mIterate by prefix 'iter_prefix_1750516054_' successfully retrieved all expected keys and no extras.[0m

[0;34m==== Test: Bump Integer Value ====[0m
‚úÖ [0;32mSUCCESS: Set initial value for bump test ('testkey_bump_1750516054' -> '10')[0m
‚úÖ [0;32mSUCCESS: Bump key 'testkey_bump_1750516054' up by '5'[0m
‚úÖ [0;32mSUCCESS: Get key 'testkey_bump_1750516054' after bumping up[0m
‚úÖ [0;32mValue for 'testkey_bump_1750516054' is '15' as expected.[0m
‚úÖ [0;32mSUCCESS: Bump key 'testkey_bump_1750516054' down by '-10'[0m
‚úÖ [0;32mSUCCESS: Get key 'testkey_bump_1750516054' after bumping down[0m
‚úÖ [0;32mValue for 'testkey_bump_1750516054' is '5' as expected.[0m
‚ÑπÔ∏è Testing bumping below zero (expected to result in '0')...
‚úÖ [0;32mSUCCESS: Bump key 'testkey_bump_1750516054' by '-10' which would go below zero[0m
‚úÖ [0;32mSUCCESS: Get key 'testkey_bump_1750516054' after bumping below zero[0m
‚úÖ [0;32mValue for 'testkey_bump_1750516054' is '0' as expected. Bumping does not go below zero.[0m
‚úÖ [0;32mSUCCESS: Bump non-existent key 'new_bump_key_1750516054' by '100'[0m
‚úÖ [0;32mSUCCESS: Get key 'new_bump_key_1750516054' after initial bump[0m
‚úÖ [0;32mValue for new key 'new_bump_key_1750516054' is '100' as expected.[0m
‚úÖ [0;32mSUCCESS (Received Expected Error): Bump key 'new_bump_key_1750516054' with non-integer value 'not-a-number'[0m
   Output contains: time=2025-06-21T10:27:34.648-04:00 level=ERROR msg="bump: value must be an integer" error="strconv.Atoi: parsing \"not-a-number\": invalid syntax"
Error: Value must be an integer: strconv.Atoi: parsing "not-a-number": invalid syntax
‚úÖ [0;32mSUCCESS (Received Expected Error): Bump key 'non_int_key_1750516054' which holds a string value[0m
   Output contains: time=2025-06-21T10:27:34.705-04:00 level=ERROR msg="Bump failed" key=non_int_key_1750516054 error="server returned status 400 Bad Request: The existing value is not a valid integer, cannot bump.
"
Error: server returned status 400 Bad Request: The existing value is not a valid integer, cannot bump.

[0;32mAll TKV data tests completed.[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 21
[0;32mAll tests passed successfully![0m
‚úÖ Success: crud-iter.sh completed.
üöÄ Running cas-setnx.sh...
insid pid: 564973
2025-06-21T10:27:34.915-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:27:34.915-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
2025-06-21T10:27:34.918-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:27:34.918-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-06-21T10:27:34.919-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:27:34.919-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-06-21T10:27:35.979-0400 [WARN]  no known peers, aborting election
2025-06-21T10:27:36.386-0400 [WARN]  no known peers, aborting election
2025-06-21T10:27:36.855-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-06-21T10:27:36.855-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-06-21T10:27:36.855-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-06-21T10:27:36.863-0400 [INFO]  election won: term=2 tally=1
2025-06-21T10:27:36.863-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
set root tracker key internal:api_key_memory_usage: value 0
2025-06-21T10:27:44.930-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-06-21T10:27:44.932-0400 [INFO]  added peer, starting replication: peer=node1
2025-06-21T10:27:44.932-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
set root tracker key internal:api_key_disk_usage: value 0
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-06-21T10:27:44.940-0400 [WARN]  failed to get previous log: previous-index=5 last-index=0 error="log not found"
2025-06-21T10:27:44.940-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-06-21T10:27:44.941-0400 [INFO]  added peer, starting replication: peer=node2
2025-06-21T10:27:44.943-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
2025-06-21T10:27:44.946-0400 [WARN]  failed to get previous log: previous-index=6 last-index=0 error="log not found"
2025-06-21T10:27:44.946-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-06-21T10:27:44.960-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚úÖ [0;32mServer is online. Proceeding with atomic op tests.[0m

[0;34m==== Test: setnx ====[0m
‚úÖ [0;32mSUCCESS: setnx on new key 'test_setnx_1750516069'[0m
‚úÖ [0;32mValue for 'test_setnx_1750516069' correctly set to 'value1'[0m
‚úÖ [0;32mSUCCESS (Received Expected Conflict): setnx on existing key 'test_setnx_1750516069'[0m
‚úÖ [0;32mValue for 'test_setnx_1750516069' remained 'value1' after failed setnx[0m

[0;34m==== Test: cas (Compare-And-Swap) ====[0m
‚úÖ [0;32mSUCCESS (Received Expected Conflict): cas on non-existent key[0m
‚úÖ [0;32mSUCCESS (Received Expected Conflict): cas with incorrect old value for key 'test_cas_1750516069'[0m
‚úÖ [0;32mValue for 'test_cas_1750516069' remained 'initial_cas_value' after failed cas[0m
‚úÖ [0;32mSUCCESS: cas with correct old value for key 'test_cas_1750516069'[0m
‚úÖ [0;32mValue for 'test_cas_1750516069' correctly updated to 'new_cas_value'[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 5
[0;32mAll atomic op tests passed successfully![0m
‚úÖ Success: cas-setnx.sh completed.
üöÄ Running events.sh...
insid pid: 565183
2025-06-21T10:27:51.269-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:27:51.269-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-06-21T10:27:51.380-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:27:51.380-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
2025-06-21T10:27:51.381-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:27:51.381-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-06-21T10:27:52.717-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-06-21T10:27:52.717-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-06-21T10:27:52.717-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-06-21T10:27:52.724-0400 [INFO]  election won: term=2 tally=1
2025-06-21T10:27:52.725-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-06-21T10:27:52.961-0400 [WARN]  no known peers, aborting election
2025-06-21T10:27:53.057-0400 [WARN]  no known peers, aborting election
2025-06-21T10:28:01.276-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-06-21T10:28:01.281-0400 [INFO]  added peer, starting replication: peer=node1
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-06-21T10:28:01.284-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
2025-06-21T10:28:01.284-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-06-21T10:28:01.286-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
2025-06-21T10:28:01.386-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-06-21T10:28:01.391-0400 [INFO]  added peer, starting replication: peer=node2
2025-06-21T10:28:01.395-0400 [WARN]  failed to get previous log: previous-index=4 last-index=0 error="log not found"
2025-06-21T10:28:01.395-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-06-21T10:28:01.398-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
set root tracker key internal:api_key_memory_usage: value 0
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
--- Test Setup ---
Using insic: /tmp/insi-test-cluster/insic
Using config: /tmp/insi-test-cluster/cluster.yaml
Targeting node: node0
Test directory: /tmp/insic_events_test_n8jqTe
Output file: /tmp/insic_events_test_n8jqTe/output.txt
Topic: test-event-topic-565288
------------------
Starting subscriber for topic 'test-event-topic-565288'...
Subscriber started with PID: 565290. Outputting to: /tmp/insic_events_test_n8jqTe/output.txt
Subscriber process seems to be running.
Publishing 3 messages to topic 'test-event-topic-565288'...
Publishing: 'Hello_World_1_565288'
OK
Publishing: 'Another_Message_2_565288'
OK
Publishing: 'Test_Data_3_565288'
OK
All messages published.
Waiting for messages to be processed (10 seconds)...
Stopping subscriber (PID: 565290)...
Subscriber stopped.
Verifying received messages in /tmp/insic_events_test_n8jqTe/output.txt...
OK: Found message 'Hello_World_1_565288'
OK: Found message 'Another_Message_2_565288'
OK: Found message 'Test_Data_3_565288'
--- Test Summary ---
SUCCESS: All 3 messages were received!
See /tmp/insic_events_test_n8jqTe/output.txt for details.
--------------------
--- Cleaning up ---
Subscriber process (PID: 565290) already exited.
Removing temporary directory: /tmp/insic_events_test_n8jqTe
---------------------
‚úÖ Success: events.sh completed.
üöÄ Running get-set-delete.sh...
insid pid: 565440
2025-06-21T10:28:23.268-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:28:23.268-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-06-21T10:28:23.268-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:28:23.268-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
2025-06-21T10:28:23.274-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:28:23.274-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-06-21T10:28:24.276-0400 [WARN]  no known peers, aborting election
2025-06-21T10:28:24.331-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-06-21T10:28:24.331-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-06-21T10:28:24.331-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-06-21T10:28:24.340-0400 [INFO]  election won: term=2 tally=1
2025-06-21T10:28:24.340-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-06-21T10:28:25.204-0400 [WARN]  no known peers, aborting election
2025-06-21T10:28:33.276-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-06-21T10:28:33.281-0400 [INFO]  added peer, starting replication: peer=node1
2025-06-21T10:28:33.281-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-06-21T10:28:33.284-0400 [INFO]  added peer, starting replication: peer=node2
2025-06-21T10:28:33.285-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
2025-06-21T10:28:33.285-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-06-21T10:28:33.289-0400 [WARN]  failed to get previous log: previous-index=4 last-index=0 error="log not found"
2025-06-21T10:28:33.289-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-06-21T10:28:33.290-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
2025-06-21T10:28:33.293-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
set root tracker key internal:api_key_memory_usage: value 0
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
‚ÑπÔ∏è Using config: /tmp/insi-test-cluster/cluster.yaml

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚úÖ [0;32mServer is online. Proceeding with tests.[0m
‚ÑπÔ∏è Starting TKV cache tests with insic: /tmp/insi-test-cluster/insic

[0;34m==== Test: Cache Set and Get Basic ====[0m
‚úÖ [0;32mSUCCESS: Cache set key 'cachekey_sg_1750516118' to 'cachevalue_sg_1750516118', received 'OK'.[0m
‚ÑπÔ∏è Brief pause after set...
‚úÖ [0;32mSUCCESS: Cache get key 'cachekey_sg_1750516118' returned correct value.[0m

[0;34m==== Test: Cache Delete ====[0m
‚úÖ [0;32mSUCCESS: Cache set key 'cachekey_del_1750516118' for delete test, received 'OK'.[0m
‚úÖ [0;32mSUCCESS: Cache delete key 'cachekey_del_1750516118', received 'OK'.[0m
‚ÑπÔ∏è Brief pause after delete...
‚úÖ [0;32mSUCCESS (Received Expected Error): Cache get deleted key 'cachekey_del_1750516118' (should fail after delete)[0m

[0;34m==== Test: Cache Get Non-Existent Key ====[0m
‚úÖ [0;32mSUCCESS (Received Expected Error): Cache get non-existent key 'nonexistentcachekey_1750516118'[0m

[0;34m==== Test: Cache CLI Argument Validation ====[0m
‚úÖ [0;32mSUCCESS (Received Expected Error): cache set: missing value argument[0m
‚úÖ [0;32mSUCCESS (Received Expected Error): cache set: too many arguments[0m
‚úÖ [0;32mSUCCESS (Received Expected Error): cache get: missing key argument[0m
‚úÖ [0;32mSUCCESS (Received Expected Error): cache get: too many arguments[0m
‚úÖ [0;32mSUCCESS (Received Expected Error): cache delete: missing key argument[0m
‚úÖ [0;32mSUCCESS (Received Expected Error): cache delete: too many arguments[0m

[0;34m==== Test: Cache Iterate by Prefix ====[0m
‚úÖ [0;32mSUCCESS: Cache set key 'c_iter_prefix_1750516119_key1' for iteration[0m
‚úÖ [0;32mSUCCESS: Cache set key 'c_iter_prefix_1750516119_key2' for iteration[0m
‚úÖ [0;32mSUCCESS: Cache set key 'c_iter_prefix_1750516119_key3' for iteration[0m
‚úÖ [0;32mSUCCESS: Cache iterate by prefix 'c_iter_prefix_1750516119_'[0m
‚úÖ [0;32mCache iterate by prefix 'c_iter_prefix_1750516119_' successfully retrieved all expected keys and no extras.[0m

[0;32mAll TKV cache tests completed.[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 17
[0;32mAll tests passed successfully![0m
‚úÖ Success: get-set-delete.sh completed.
üöÄ Running cache-cas-setnx.sh...
insid pid: 565777
2025-06-21T10:28:40.263-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:28:40.263-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-06-21T10:28:40.264-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:28:40.264-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-06-21T10:28:40.266-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:28:40.266-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-06-21T10:28:41.728-0400 [WARN]  no known peers, aborting election
2025-06-21T10:28:41.765-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-06-21T10:28:41.765-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-06-21T10:28:41.765-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-06-21T10:28:41.774-0400 [INFO]  election won: term=2 tally=1
2025-06-21T10:28:41.774-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-06-21T10:28:41.949-0400 [WARN]  no known peers, aborting election
2025-06-21T10:28:50.272-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-06-21T10:28:50.276-0400 [INFO]  added peer, starting replication: peer=node2
2025-06-21T10:28:50.279-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
2025-06-21T10:28:50.280-0400 [WARN]  failed to get previous log: previous-index=3 last-index=0 error="log not found"
2025-06-21T10:28:50.280-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-06-21T10:28:50.282-0400 [INFO]  added peer, starting replication: peer=node1
2025-06-21T10:28:50.283-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
2025-06-21T10:28:50.285-0400 [WARN]  failed to get previous log: previous-index=5 last-index=0 error="log not found"
2025-06-21T10:28:50.285-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
set root tracker key internal:api_key_memory_usage: value 0
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
2025-06-21T10:28:50.288-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:

[0;34m==== Pre-Test: Server Ping Check ====[0m
‚úÖ [0;32mServer is online. Proceeding with atomic cache op tests.[0m

[0;34m==== Test: cache setnx ====[0m
‚úÖ [0;32mSUCCESS: cache setnx on new key 'test_cache_setnx_1750516135'[0m
‚úÖ [0;32mValue for 'test_cache_setnx_1750516135' correctly set to 'value1'[0m
‚úÖ [0;32mSUCCESS (Received Expected Conflict/Precondition): cache setnx on existing key 'test_cache_setnx_1750516135'[0m
‚úÖ [0;32mValue for 'test_cache_setnx_1750516135' remained 'value1' after failed setnx[0m

[0;34m==== Test: cache cas (Compare-And-Swap) ====[0m
‚úÖ [0;32mSUCCESS (Received Expected Conflict/Precondition): cas on non-existent key[0m
‚úÖ [0;32mSUCCESS (Received Expected Conflict/Precondition): cas with incorrect old value for key 'test_cache_cas_1750516135'[0m
‚úÖ [0;32mValue for 'test_cache_cas_1750516135' remained 'initial_cas_value' after failed cas[0m
‚úÖ [0;32mSUCCESS: cas with correct old value for key 'test_cache_cas_1750516135'[0m
‚úÖ [0;32mValue for 'test_cache_cas_1750516135' correctly updated to 'new_cas_value'[0m

[0;34m==== Test Summary ====[0m
‚úÖ Successful tests: 5
[0;32mAll atomic cache op tests passed successfully![0m
‚úÖ Success: cache-cas-setnx.sh completed.
üöÄ Running blob.sh...
insid pid: 565973
2025-06-21T10:28:56.550-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:28:56.550-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2222 [Follower]" leader-address= leader-id=
Launching server 127.0.0.1:8443
Launching server 127.0.0.1:8446
2025-06-21T10:28:56.678-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:28:56.678-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2223 [Follower]" leader-address= leader-id=
2025-06-21T10:28:56.679-0400 [INFO]  initial configuration: index=0 servers=[]
2025-06-21T10:28:56.679-0400 [INFO]  entering follower state: follower="Node at 127.0.0.1:2224 [Follower]" leader-address= leader-id=
2025-06-21T10:28:57.788-0400 [WARN]  heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-06-21T10:28:57.788-0400 [INFO]  entering candidate state: node="Node at 127.0.0.1:2222 [Candidate]" term=2
2025-06-21T10:28:57.788-0400 [INFO]  pre-vote successful, starting election: term=2 tally=1 refused=0 votesNeeded=1
2025-06-21T10:28:57.796-0400 [INFO]  election won: term=2 tally=1
2025-06-21T10:28:57.796-0400 [INFO]  entering leader state: leader="Node at 127.0.0.1:2222 [Leader]"
2025-06-21T10:28:57.799-0400 [WARN]  no known peers, aborting election
2025-06-21T10:28:58.157-0400 [WARN]  no known peers, aborting election
set root tracker key internal:api_key_memory_usage: value 0
set root tracker key internal:api_key_disk_usage: value 0
set root tracker key internal:api_key_events: value 0
set root tracker key internal:api_key_subscriptions: value 0
set root tracker key internal:api_key_max_memory_usage:
set root tracker key internal:api_key_max_disk_usage:
set root tracker key internal:api_key_max_events:
set root tracker key internal:api_key_max_subscriptions:
2025-06-21T10:29:06.687-0400 [INFO]  updating configuration: command=AddVoter server-id=node2 server-addr=127.0.0.1:2224 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224}]"
2025-06-21T10:29:06.689-0400 [INFO]  added peer, starting replication: peer=node2
2025-06-21T10:29:06.689-0400 [INFO]  updating configuration: command=AddVoter server-id=node1 server-addr=127.0.0.1:2223 servers="[{Suffrage:Voter ID:node0 Address:127.0.0.1:2222} {Suffrage:Voter ID:node2 Address:127.0.0.1:2224} {Suffrage:Voter ID:node1 Address:127.0.0.1:2223}]"
Launching server 127.0.0.1:8445
Launching server 127.0.0.1:8448
2025-06-21T10:29:06.692-0400 [INFO]  added peer, starting replication: peer=node1
2025-06-21T10:29:06.693-0400 [WARN]  failed to get previous log: previous-index=11 last-index=0 error="log not found"
2025-06-21T10:29:06.694-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node2 127.0.0.1:2224}" next=1
2025-06-21T10:29:06.695-0400 [WARN]  failed to get previous log: previous-index=12 last-index=0 error="log not found"
2025-06-21T10:29:06.695-0400 [WARN]  appendEntries rejected, sending older logs: peer="{Voter node1 127.0.0.1:2223}" next=1
2025-06-21T10:29:06.703-0400 [INFO]  pipelining replication: peer="{Voter node2 127.0.0.1:2224}"
2025-06-21T10:29:06.704-0400 [INFO]  pipelining replication: peer="{Voter node1 127.0.0.1:2223}"
Launching server 127.0.0.1:8444
Launching server 127.0.0.1:8447
